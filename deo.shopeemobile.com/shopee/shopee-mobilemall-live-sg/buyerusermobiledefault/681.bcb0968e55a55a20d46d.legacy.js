"use strict";(self.webpackChunk_shopee_buyer_user_mobile_default=self.webpackChunk_shopee_buyer_user_mobile_default||[]).push([[681],{6560:function(t,e,n){var r=n(7363),i="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},s=r.useState,u=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function a(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!i(t,n)}catch(r){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),r=s({inst:{value:n,getSnapshot:e}}),i=r[0].inst,l=r[1];return o((function(){i.value=n,i.getSnapshot=e,a(i)&&l({inst:i})}),[t,n,e]),u((function(){return a(i)&&l({inst:i}),t((function(){a(i)&&l({inst:i})}))}),[t]),c(n),n};e.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},8791:function(t,e,n){t.exports=n(6560)},3681:function(t,e,n){n.d(e,{a:function(){return J}});var r=n(1630),i="undefined"==typeof window||"Deno"in window;function s(){}function u(t){return"number"==typeof t&&t>=0&&t!==1/0}function o(t,e){if(t===e)return t;var n=a(t)&&a(e);if(n||l(t)&&l(e)){for(var r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),s=i.length,u=n?[]:{},c=0,h=0;h<s;h++){var f=n?h:i[h];u[f]=o(t[f],e[f]),u[f]===t[f]&&c++}return r===s&&c===r?t:u}return e}function c(t,e){if(t&&!e||e&&!t)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0}function a(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function l(t){if(!h(t))return!1;var e=t.constructor;if(void 0===e)return!0;var n=e.prototype;return!!h(n)&&!!n.hasOwnProperty("isPrototypeOf")}function h(t){return"[object Object]"===Object.prototype.toString.call(t)}function f(t){new Promise((function(t){setTimeout(t,0)})).then(t)}function d(t,e,n){return null!=n.isDataEqual&&n.isDataEqual(t,e)?t:"function"==typeof n.structuralSharing?n.structuralSharing(t,e):!1!==n.structuralSharing?o(t,e):e}var p,v,y,b,R,S,m=n(1986),w=n(4884),g=(p=[],v=0,y=function(t){t()},b=function(t){t()},S=function(){var t=p;p=[],t.length&&f((function(){b((function(){t.forEach((function(t){y(t)}))}))}))},{batch:function(t){var e;v++;try{e=t()}finally{--v||S()}return e},batchCalls:function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];R((function(){t.apply(void 0,n)}))}},schedule:R=function(t){v?p.push(t):f((function(){y(t)}))},setNotifyFunction:function(t){y=t},setBatchNotifyFunction:function(t){b=t}}),E=function(){function t(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}var e=t.prototype;return e.subscribe=function(t){var e=this,n={listener:t};return this.listeners.add(n),this.onSubscribe(),function(){e.listeners.delete(n),e.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.size>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},t}(),C=new(function(t){function e(){var e;return(e=t.call(this)||this).setup=function(t){if(!i&&window.addEventListener){var e=function(){return t()};return window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1),function(){window.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e)}}},e}(0,w.Z)(e,t);var n=e.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)},n.setEventListener=function(t){var e,n=this;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((function(t){"boolean"==typeof t?n.setFocused(t):n.onFocus()}))},n.setFocused=function(t){this.focused!==t&&(this.focused=t,this.onFocus())},n.onFocus=function(){this.listeners.forEach((function(t){(0,t.listener)()}))},n.isFocused=function(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},e}(E)),O=["online","offline"],Q=new(function(t){function e(){var e;return(e=t.call(this)||this).setup=function(t){if(!i&&window.addEventListener){var e=function(){return t()};return O.forEach((function(t){window.addEventListener(t,e,!1)})),function(){O.forEach((function(t){window.removeEventListener(t,e)}))}}},e}(0,w.Z)(e,t);var n=e.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)},n.setEventListener=function(t){var e,n=this;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((function(t){"boolean"==typeof t?n.setOnline(t):n.onOnline()}))},n.setOnline=function(t){this.online!==t&&(this.online=t,this.onOnline())},n.onOnline=function(){this.listeners.forEach((function(t){(0,t.listener)()}))},n.isOnline=function(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine},e}(E));var I=function(t){this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent},F=["refetchPage"],L=function(t){function e(e,n){var r;return(r=t.call(this)||this).client=e,r.options=n,r.trackedProps=new Set,r.selectError=null,r.bindMethods(),r.setOptions(n),r}(0,w.Z)(e,t);var n=e.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){1===this.listeners.size&&(this.currentQuery.addObserver(this),U(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.hasListeners()||this.destroy()},n.shouldFetchOnReconnect=function(){return x(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return x(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)},n.setOptions=function(t,e){var n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),c(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();var i=this.hasListeners();i&&T(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(e),!i||this.currentQuery===r&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();var s=this.computeRefetchInterval();!i||this.currentQuery===r&&this.options.enabled===n.enabled&&s===this.currentRefetchInterval||this.updateRefetchInterval(s)},n.getOptimisticResult=function(t){var e=this.client.getQueryCache().build(this.client,t),n=this.createResult(e,t);return function(t,e,n){return!n.keepPreviousData&&(void 0!==n.placeholderData?e.isPlaceholderData:!c(t.getCurrentResult(),e))}(this,n,t)&&(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(t){var e=this,n={};return Object.keys(t).forEach((function(r){Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:function(){return e.trackedProps.add(r),t[r]}})})),n},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(t){var e=void 0===t?{}:t,n=e.refetchPage,i=(0,m.Z)(e,F);return this.fetch((0,r.Z)({},i,{meta:{refetchPage:n}}))},n.fetchOptimistic=function(t){var e=this,n=this.client.defaultQueryOptions(t),r=this.client.getQueryCache().build(this.client,n);return r.isFetchingOptimistic=!0,r.fetch().then((function(){return e.createResult(r,n)}))},n.fetch=function(t){var e,n=this;return this.executeFetch((0,r.Z)({},t,{cancelRefetch:null==(e=t.cancelRefetch)||e})).then((function(){return n.updateResult(),n.currentResult}))},n.executeFetch=function(t){this.updateQuery();var e=this.currentQuery.fetch(this.options,t);return null!=t&&t.throwOnError||(e=e.catch(s)),e},n.updateStaleTimeout=function(){var t=this;if(this.clearStaleTimeout(),!i&&!this.currentResult.isStale&&u(this.options.staleTime)){var e,n,r=(e=this.currentResult.dataUpdatedAt,n=this.options.staleTime,Math.max(e+(n||0)-Date.now(),0)+1);this.staleTimeoutId=setTimeout((function(){t.currentResult.isStale||t.updateResult()}),r)}},n.computeRefetchInterval=function(){var t;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(t=this.options.refetchInterval)&&t},n.updateRefetchInterval=function(t){var e=this;this.clearRefetchInterval(),this.currentRefetchInterval=t,!i&&!1!==this.options.enabled&&u(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((function(){(e.options.refetchIntervalInBackground||C.isFocused())&&e.executeFetch()}),this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(t,e){var n,r,i=this.currentQuery,s=this.options,u=this.currentResult,o=this.currentResultState,c=this.currentResultOptions,a=t!==i,l=a?t.state:this.currentQueryInitialState,h=a?this.currentResult:this.previousQueryResult,f=t.state,p=f.dataUpdatedAt,v=f.error,y=f.errorUpdatedAt,b=f.fetchStatus,R=f.status,S=!1,m=!1;if(e._optimisticResults){var w=this.hasListeners(),g=!w&&U(t,e),E=w&&T(t,i,e,s);(g||E)&&(b="online"!==(null!=(r=t.options.networkMode)?r:"online")||Q.isOnline()?"fetching":"paused",p||(R="loading")),"isRestoring"===e._optimisticResults&&(b="idle")}if(e.keepPreviousData&&!f.dataUpdatedAt&&null!=h&&h.isSuccess&&"error"!==R)n=h.data,p=h.dataUpdatedAt,R=h.status,S=!0;else if(e.select&&void 0!==f.data)if(u&&f.data===(null==o?void 0:o.data)&&e.select===this.selectFn)n=this.selectResult;else try{this.selectFn=e.select,n=e.select(f.data),n=d(null==u?void 0:u.data,n,e),this.selectResult=n,this.selectError=null}catch(L){this.selectError=L}else n=f.data;if(void 0!==e.placeholderData&&void 0===n&&"loading"===R){var C;if(null!=u&&u.isPlaceholderData&&e.placeholderData===(null==c?void 0:c.placeholderData))C=u.data;else if(C="function"==typeof e.placeholderData?e.placeholderData():e.placeholderData,e.select&&void 0!==C)try{C=e.select(C),this.selectError=null}catch(L){this.selectError=L}void 0!==C&&(R="success",n=d(null==u?void 0:u.data,C,e),m=!0)}this.selectError&&(v=this.selectError,n=this.selectResult,y=Date.now(),R="error");var O="fetching"===b,I="loading"===R,F="error"===R;return{status:R,fetchStatus:b,isLoading:I,isSuccess:"success"===R,isError:F,isInitialLoading:I&&O,data:n,dataUpdatedAt:p,error:v,errorUpdatedAt:y,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>l.dataUpdateCount||f.errorUpdateCount>l.errorUpdateCount,isFetching:O,isRefetching:O&&!I,isLoadingError:F&&0===f.dataUpdatedAt,isPaused:"paused"===b,isPlaceholderData:m,isPreviousData:S,isRefetchError:F&&0!==f.dataUpdatedAt,isStale:P(t,e),refetch:this.refetch,remove:this.remove}},n.updateResult=function(t){var e=this,n=this.currentResult,i=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!c(i,n)){this.currentResult=i;var s={cache:!0};!1!==(null==t?void 0:t.listeners)&&function(){if(!n)return!0;var t=e.options.notifyOnChangeProps,r="function"==typeof t?t():t;if("all"===r||!r&&!e.trackedProps.size)return!0;var i=new Set(null!=r?r:e.trackedProps);return e.options.useErrorBoundary&&i.add("error"),Object.keys(e.currentResult).some((function(t){var r=t;return e.currentResult[r]!==n[r]&&i.has(r)}))}()&&(s.listeners=!0),this.notify((0,r.Z)({},s,t))}},n.updateQuery=function(){var t=this.client.getQueryCache().build(this.client,this.options);if(t!==this.currentQuery){var e=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))}},n.onQueryUpdate=function(t){var e={};"success"===t.type?e.onSuccess=!t.manual:"error"!==t.type||t.error instanceof I||(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()},n.notify=function(t){var e=this;g.batch((function(){var n,r,i,s;if(t.onSuccess)null==(n=(r=e.options).onSuccess)||n.call(r,e.currentResult.data),null==(i=(s=e.options).onSettled)||i.call(s,e.currentResult.data,null);else if(t.onError){var u,o,c,a;null==(u=(o=e.options).onError)||u.call(o,e.currentResult.error),null==(c=(a=e.options).onSettled)||c.call(a,void 0,e.currentResult.error)}t.listeners&&e.listeners.forEach((function(t){(0,t.listener)(e.currentResult)})),t.cache&&e.client.getQueryCache().notify({query:e.currentQuery,type:"observerResultsUpdated"})}))},e}(E);function U(t,e){return function(t,e){return!(!1===e.enabled||t.state.dataUpdatedAt||"error"===t.state.status&&!1===e.retryOnMount)}(t,e)||t.state.dataUpdatedAt>0&&x(t,e,e.refetchOnMount)}function x(t,e,n){if(!1!==e.enabled){var r="function"==typeof n?n(t):n;return"always"===r||!1!==r&&P(t,e)}return!1}function T(t,e,n,r){return!1!==n.enabled&&(t!==e||!1===r.enabled)&&(!n.suspense||"error"!==t.state.status)&&P(t,n)}function P(t,e){return t.isStaleByTime(e.staleTime)}var k=n(7363),D=n(8791).useSyncExternalStore;var A,_=k.createContext((A=!1,{clearReset:function(){A=!1},reset:function(){A=!0},isReset:function(){return A}})),q=function(){return k.useContext(_)},j=k.createContext(void 0),B=k.createContext(!1);var Z=function(t){var e=(void 0===t?{}:t).context,n=k.useContext(function(t,e){return t||(e&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=j),window.ReactQueryClientContext):j)}(e,k.useContext(B)));if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},M=k.createContext(!1),K=function(){return k.useContext(M)};M.Provider;var z=function(t,e){(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},N=function(t){k.useEffect((function(){t.clearReset()}),[t])},W=function(t){var e,n,r=t.result,i=t.errorResetBoundary,s=t.useErrorBoundary,u=t.query;return r.isError&&!i.isReset()&&!r.isFetching&&(e=s,n=[r.error,u],"function"==typeof e?e.apply(void 0,n):!!e)},V=function(t){t.suspense&&"number"!=typeof t.staleTime&&(t.staleTime=1e3)},G=function(t,e,n){return(null==t?void 0:t.suspense)&&function(t,e){return t.isLoading&&t.isFetching&&!e}(e,n)},H=function(t,e,n){return e.fetchOptimistic(t).then((function(e){var n=e.data;null==t.onSuccess||t.onSuccess(n),null==t.onSettled||t.onSettled(n,null)})).catch((function(e){n.clearReset(),null==t.onError||t.onError(e),null==t.onSettled||t.onSettled(void 0,e)}))};function J(t,e,n){var i=function(t,e,n){return i=t,Array.isArray(i)?"function"==typeof e?(0,r.Z)({},n,{queryKey:t,queryFn:e}):(0,r.Z)({},e,{queryKey:t}):t;var i}(t,e,n);return function(t,e){var n=Z({context:t.context}),r=K(),i=q(),s=n.defaultQueryOptions(t);s._optimisticResults=r?"isRestoring":"optimistic",s.onError&&(s.onError=g.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=g.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=g.batchCalls(s.onSettled)),V(s),z(s,i),N(i);var u=k.useState((function(){return new e(n,s)}))[0],o=u.getOptimisticResult(s);if(D(k.useCallback((function(t){var e=r?function(){}:u.subscribe(g.batchCalls(t));return u.updateResult(),e}),[u,r]),(function(){return u.getCurrentResult()}),(function(){return u.getCurrentResult()})),k.useEffect((function(){u.setOptions(s,{listeners:!1})}),[s,u]),G(s,o,r))throw H(s,u,i);if(W({result:o,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:u.getCurrentQuery()}))throw o.error;return s.notifyOnChangeProps?o:u.trackResult(o)}(i,L)}}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/mobilemall-buyerusermobiledefault/_/681.bcb0968e55a55a20d46d.legacy.js.map