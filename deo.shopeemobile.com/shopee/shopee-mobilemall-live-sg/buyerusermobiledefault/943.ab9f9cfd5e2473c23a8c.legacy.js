(self.webpackChunk_shopee_buyer_user_mobile_default=self.webpackChunk_shopee_buyer_user_mobile_default||[]).push([[943],{4393:function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ABTest=void 0;var o,i=r(5714),u=r(2546),a=(o=r(6047))&&o.__esModule?o:{default:o},c=r(4937),s=r(9919);function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function h(){h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(E){c=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),u=new T(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var u=r.delegate;if(u){var a=x(u,r);if(a){if(a===f)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,u),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(E){return{type:"throw",arg:E}}}t.wrap=s;var f={};function d(){}function v(){}function p(){}var y={};c(y,i,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(j([])));b&&b!==e&&r.call(b,i)&&(y=b);var _=p.prototype=d.prototype=Object.create(y);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(i,u,a,c){var s=l(t[i],t,u);if("throw"!==s.type){var f=s.arg,h=f.value;return h&&"object"==n(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(h).then((function(t){f.value=t,a(f)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;this._invoke=function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function j(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=p,c(_,"constructor",p),c(p,"constructor",v),v.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},m(w.prototype),c(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var u=new w(s(e,r,n,o),i);return t.isGeneratorFunction(r)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},m(_),c(_,a,"Generator"),c(_,i,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=j,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return u.type="throw",u.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:j(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function d(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(s){return void r(s)}a.done?e(c):Promise.resolve(c).then(n,o)}function v(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function u(t){d(i,n,o,u,a,"next",t)}function a(t){d(i,n,o,u,a,"throw",t)}u(void 0)}))}}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=function(){function t(e){var r,n,o,a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"_initConfig",void 0),y(this,"_url",void 0),y(this,"_cache",void 0),!e.country)throw Error("需要配置country参数, 如SG, ID");if(!e.bizName)throw Error("需要提供当前接入的业务方, 如ci.abtest-trafficservice");this._initConfig=e,this._debug("AB Test init Params:"),this._debug(e),u.env2AbEnv.enableStaging(e.enableStaging),e.devMode&&null!==(r=globalThis.location)&&void 0!==r&&null!==(n=r.host)&&void 0!==n&&null!==(o=n.includes)&&void 0!==o&&o.call(n,"localhost:")?this._url=(0,c.getDevModeTrafficApi)(e.env):e.isWsa?this._url=(0,c.getWsaTrafficApi)():this._url=(0,c.getTrafficApi)(e.env),this._debug("Traffic Path:"),this._debug(this._url),this._cache=new i.ABCache(e),(null!==(a=e.isInitFetch)&&void 0!==a?a:u.defaultConfig.isInitFetch)&&this.getExperiments()}var e,r,n,o,f,d,g,b,_,m;return e=t,r=[{key:"getExperiments",value:(m=v(h().mark((function t(e){var r,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getExperiments"),t.next=3,this._fetchTrafficResult(e);case 3:return n=t.sent,t.abrupt("return",null!==(r=null==n?void 0:n.experiments)&&void 0!==r?r:[]);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"getExperiment",value:(_=v(h().mark((function t(e,r){var n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getExperiment"),t.next=3,this.getExperiments(r);case 3:return n=t.sent,o=n.find((function(t){return t.exp_name===e})),this._debug(o),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return _.apply(this,arguments)})},{key:"getFeatures",value:(b=v(h().mark((function t(e){var r,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getFeatures"),t.next=3,this._fetchTrafficResult(e);case 3:return n=t.sent,t.abrupt("return",null!==(r=null==n?void 0:n.feature_map)&&void 0!==r?r:[]);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)})},{key:"getFeatureByKey",value:(g=v(h().mark((function t(e,r){var n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getFeatureByKey"),t.next=3,this.getFeatures(r);case 3:return n=t.sent,o=n.find((function(t){return t.feature_key===e})),this._debug(o),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return g.apply(this,arguments)})},{key:"_fetchTrafficResult",value:(d=v(h().mark((function t(e){var r,n,o,i,u,a,c,s;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._debug("内部请求分流结果"),this._cache.setMergedConfig(e),(i=null===(r=this._cache)||void 0===r?void 0:r.getMergedConfig()).sceneKeys&&0!==i.sceneKeys.filter((function(t){return t})).length){t.next=6;break}return this._debug("Scene Key 为空, 没有拉取实验"),t.abrupt("return");case 6:if(u=this._cache.getTraffic(),this._debug("获取分流缓存结果"),this._debug(u),null==u||!u.resp){t.next=12;break}return null!=u&&u.needRefresh&&this.fetch(i.sceneKeys,i.country,null!==(c=i.filters)&&void 0!==c?c:[],void 0,e),t.abrupt("return",null!==(a=null==u?void 0:u.resp)&&void 0!==a?a:[]);case 12:return t.next=14,this.fetch(i.sceneKeys,i.country,null!==(n=i.filters)&&void 0!==n?n:[],void 0,e);case 14:return s=t.sent,t.abrupt("return",null==s||null===(o=s.data)||void 0===o?void 0:o[0]);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"_getExpReq",value:function(t){return t||(t=this._cache.getMergedConfig()),{meta:{country:t.country,customid:t.customid,userid_str:t.userid,shopid_str:t.shopid,device_fingerprint:t.device_fingerprint},filter_data:t.filters,biz_name:t.bizName,scene_keys:t.sceneKeys}}},{key:"fetchInc",value:(f=v(h().mark((function t(e,r,n,o,i){var u;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fetch(Array.from(new Set([].concat(l(null!==(u=this._initConfig.sceneKeys)&&void 0!==u?u:[]),l(e)))),r,n,o,i));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n,o){return f.apply(this,arguments)})},{key:"fetch",value:(o=v(h().mark((function t(e,r,n,o,i){var c,s,l,f,d,v,p,y,g,b,_,m,w,x,O;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d=null!=i?i:{},e&&(d.sceneKeys=e),r&&(d.country=r),n&&(d.filters=n),this._debug("newOptions"),this._debug(d),this._cache.setMergedConfig(d),v=this._getExpReq(),this._debug("Fetch Exp Req Body"),this._debug(v),!o||"function"!=typeof o){t.next=18;break}return t.next=13,o(this._url,v);case 13:if(f=t.sent,!(null!==(p=f)&&void 0!==p&&p.error||null!==(y=f)&&void 0!==y&&y.error_msg)){t.next=16;break}throw Error("error: ".concat(null===(g=f)||void 0===g?void 0:g.error,", error msg: ").concat(null===(b=f)||void 0===b?void 0:b.error_msg));case 16:t.next=29;break;case 18:return t.next=20,(0,a.default)(this._url,{method:"POST",headers:u.reqHeaders,body:JSON.stringify(v),credentials:"include"});case 20:if(f=t.sent,null!==(_=f)&&void 0!==_&&_.ok){t.next=23;break}throw Error("网络异常, Status: ".concat(f.status,":").concat(f.statusText,", Text: ").concat(f.text));case 23:return t.next=25,f.json();case 25:if(f=t.sent,!(null!==(m=f)&&void 0!==m&&m.error||null!==(w=f)&&void 0!==w&&w.error_msg)){t.next=28;break}throw Error("error: ".concat(null===(x=f)||void 0===x?void 0:x.error,", error msg: ").concat(null===(O=f)||void 0===O?void 0:O.error_msg));case 28:f&&f.data&&0!==f.data.length||this._debug("对应的场景没有web实验, 您可以去站点上创建并开启实验");case 29:return this._debug("请求成功"),this._debug("分流信息: "),this._debug(null===(c=f)||void 0===c?void 0:c.data[0]),this._cache.setTraffic(null===(s=f)||void 0===s||null===(l=s.data)||void 0===l?void 0:l[0]),this._debug("Resp Body"),this._debug(f),t.abrupt("return",f);case 36:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n,i){return o.apply(this,arguments)})},{key:"_debug",value:function(t){this._initConfig.debug&&(0,s.debug)(t)}},{key:"getVersion",value:function(){return this._cache.getVersion()}},{key:"getGroupIdByPointId",value:function(t){return this._cache.getGroupIdByPointId(t)}},{key:"getCache",value:function(){return this._cache.getCache()}}],n=[{key:"init",value:function(e){e.filters||(e.filters=[]);var r=new t(e);return globalThis[u.windowInjectKey]=r,r}}],r&&p(e.prototype,r),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.ABTest=g},5714:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ABCache=void 0;var n,o=(n=r(9039))&&n.__esModule?n:{default:n},i=r(2923),u=r(2546),a=r(9919),c=r(5998);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=function(){function t(e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"_cache",void 0),h(this,"_cacheTime",void 0),h(this,"_initConfig",void 0),h(this,"_cacheKey",""),h(this,"_mergedConfig",{}),this._initConfig=null!=e?e:{},this._cacheTime=null!==(r=null==e?void 0:e.cacheTime)&&void 0!==r?r:u.defaultConfig.cacheTime,this.setMergedConfig();var n=(0,i.getStorage)();this._cache=null!=n?n:{}}var e,r;return e=t,(r=[{key:"_debug",value:function(t){var e;null!==(e=this._initConfig)&&void 0!==e&&e.debug&&(0,a.debug)(t)}},{key:"validateCache",value:function(){var t,e={needRefresh:!0};if(this._cacheTime===u.nocache)return this._debug("设置为不使用本地缓存, 当前内容session有效"),e;var r=null===(t=this._cache)||void 0===t?void 0:t[this._cacheKey];return r&&r.resp?!r.expireTime||(0,c.isBefore)(r.expireTime,(0,c.currentDate)())?this._initConfig.cacheExpireRefresh?(this._debug("缓存已经失效 但是优先使用缓存结果"),e.resp=r.resp,e):(this._debug("缓存已经失效"),e):(this._debug("缓存失效时间为".concat((0,c.formateDate)(null==r?void 0:r.expireTime))),this._debug("当前时间为".concat((0,c.formateDate)(new Date))),this._debug("从缓存中拉取信息"),e.resp=r.resp,e.needRefresh=!1,e):(this._debug("本地无对应缓存"),e)}},{key:"getTraffic",value:function(){var t;return null!==(t=this.validateCache())&&void 0!==t?t:{}}},{key:"setTraffic",value:function(t){var e,r={resp:t,config:this._mergedConfig,expireTime:(0,c.currentDate)(this._cacheTime)};this._cache[this._cacheKey]=r,this._debug("更新内存信息"),this._debug(this._cache);var n=null!==(e=(0,i.getStorage)())&&void 0!==e?e:{};n[this._cacheKey]=r,this._debug("更新缓存信息"),this._debug(n),(0,i.setStorage)(n)}},{key:"getVersion",value:function(){var t,e,r=null===(t=this._cache)||void 0===t||null===(e=t[this._cacheKey])||void 0===e?void 0:e.resp;return this._debug("TMS获取版本信息"),this._debug(null==r?void 0:r.version),null==r?void 0:r.version}},{key:"getGroupIdByPointId",value:function(t){var e,r,n,o,i,u=null===(e=this._cache)||void 0===e||null===(r=e[this._cacheKey])||void 0===r?void 0:r.resp,a=null!==(n=null==u||null===(o=u.point_infos)||void 0===o||null===(i=o.find((function(e){return e.point_id===t})))||void 0===i?void 0:i.group_ids)&&void 0!==n?n:[];if(this._debug("根据Pointid".concat(t,"获取实验分组")),this._debug(a),0===a.length){var c=Object.values(this._cache).reduce((function(t,e){var r,n;return t.concat(null!==(r=null===(n=e.resp)||void 0===n?void 0:n.point_infos)&&void 0!==r?r:[])}),[]).filter((function(e){return e.point_id===t})).flatMap((function(t){return t.group_ids}));a=Array.from(new Set(c))}return a}},{key:"getCache",value:function(){return this._cache}},{key:"setMergedConfig",value:function(t){this._mergedConfig=l(l({},this._initConfig),null!=t?t:{}),this.setCacheKey()}},{key:"setCacheKey",value:function(){var t=this._mergedConfig;this._cacheKey=(0,o.default)(JSON.stringify({meta:{country:t.country,customid:t.customid,userid_str:t.userid,shopid_str:t.shopid,device_fingerprint:t.device_fingerprint},filter_data:t.filters,biz_name:t.bizName,scene_keys:t.sceneKeys}))}},{key:"getMergedConfig",value:function(){return this._mergedConfig}}])&&f(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.ABCache=d},2546:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.windowInjectKey=e.url2EnvMap=e.trafficAPI=e.reqHeaders=e.noneLiveEnv=e.nocache=e.localStorageKey=e.liveEnvUrl=e.env2UrlMap=e.env2AbEnv=e.defaultConfig=e.countryPostfixMap=e.byFeatureAPI=void 0;var n=r(9919);e.trafficAPI="api/v4/abtest/traffic/get_web_experiments",e.byFeatureAPI="api/v4/abtest/traffic/get_feature_by_feature_key",e.localStorageKey="__abtest__",e.windowInjectKey="__abtest__",e.nocache=0,e.liveEnvUrl="",e.defaultConfig={cacheTime:5,isInitFetch:!1};var o={live:"",liveish:"live-test",uat:"uat",test:"test",staging:"staging",stable:"test-stable"};e.env2UrlMap=o;var i=Object.values(o).filter((function(t){return""!==t}));e.noneLiveEnv=i;var u=(0,n.flip)(o);e.url2EnvMap=u,e.env2AbEnv={staging:"test","test-stable":"test",enableStaging:function(t){this.staging=t?"staging":"test"}},e.reqHeaders={"Content-Type":"application/json"},e.countryPostfixMap={shopeepay:"shopeepay.",shopee:"shopee."}},5998:function(t,e){"use strict";function r(t,e){return"number"==typeof t&&(t=new Date(t)),t.setMinutes(t.getMinutes()+e),t}Object.defineProperty(e,"__esModule",{value:!0}),e.addMin=r,e.currentDate=function(t){return t?r(new Date,t).valueOf():Date.now()},e.formateDate=function(t){return"number"==typeof t&&(t=new Date(t)),t.toString()},e.isBefore=function(t,e){return void 0!==t&&("number"!=typeof t&&(t=new Date(t)),"number"!=typeof e&&(e=new Date(e)),t.valueOf()<e.valueOf())}},6047:function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=((n=r(2400))&&n.__esModule?n:{default:n}).default;e.default=o},4937:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDevModeTrafficApi=function(t){return"//abtest-api.dataplt.".concat(null!=t?t:"test",".shopee.io/").concat(n.trafficAPI)},e.getTrafficApi=function(t){var e,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(null===globalThis||void 0===globalThis||null===(e=globalThis.location)||void 0===e?void 0:e.hostname)||"";t?(r=n.env2UrlMap[t],(0,o.isValidKey)(r,n.env2AbEnv)&&(r=n.env2AbEnv[r])):r=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===globalThis||void 0===globalThis||null===(t=globalThis.location)||void 0===t?void 0:t.hostname;if(!e||null!=e&&e.includes("localhost"))return"test";var r,o=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=u(t))){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){a=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(a)throw o}}}}(n.noneLiveEnv);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=e.lastIndexOf("".concat(i,"."));if(0===a||"."===e[a-1])return"staging"===i||"test-stable"===i?n.env2AbEnv[i]:i}}catch(c){o.e(c)}finally{o.f()}return n.liveEnvUrl}(a);var c="";r!==n.liveEnvUrl&&(c=".");for(var s="",l=0,f=Object.entries(n.countryPostfixMap);l<f.length;l++){var h=i(f[l],2),d=h[0],v=h[1];if(a.includes(d)){s=i(a.split(v),2)[1];break}}return"io"!==s&&s||(s="sg"),"//".concat(r).concat(c,"shopee.").concat(s,"/").concat(n.trafficAPI)},e.getWsaTrafficApi=function(){return"/".concat(n.trafficAPI)};var n=r(2546),o=r(9919);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],u=!0,a=!1;try{for(r=r.call(t);!(u=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);u=!0);}catch(c){a=!0,o=c}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return i}}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},9756:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={ABTest:!0};Object.defineProperty(e,"ABTest",{enumerable:!0,get:function(){return o.ABTest}});var o=r(4393),i=r(2111);Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===i[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}}))}))},2923:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getStorage=function(){try{var t=globalThis.localStorage.getItem(n.localStorageKey);if(t)return JSON.parse(t)}catch(e){}return null},e.setStorage=function(t){try{globalThis.localStorage.setItem(n.localStorageKey,JSON.stringify(t))}catch(e){}};var n=r(2546)},2111:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9919:function(t,e){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.debug=function(t){},e.flip=void 0,e.hasSetId=function(t){return!!(t.shopid||t.userid||t.customid||t.device_fingerprint)},e.isValidKey=function(t,e){return t in e},e.flip=function(t){return Object.fromEntries(Object.entries(t).map((function(t){var e,n,o=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],u=!0,a=!1;try{for(r=r.call(t);!(u=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);u=!0);}catch(c){a=!0,o=c}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0];return[o[1],i]})))}},8953:function(t){var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=e},3033:function(t){var e,r;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var o=t[n]<<16|t[n+1]<<8|t[n+2],i=0;i<4;i++)8*n+6*i<=8*t.length?r.push(e.charAt(o>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,o=0;n<t.length;o=++n%4)0!=o&&r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|e.indexOf(t.charAt(n))>>>6-2*o);return r}},t.exports=r},3819:function(t){function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},2400:function(t,e,r){t.exports=self.fetch||(self.fetch=r(3073).default||r(3073))},9039:function(t,e,r){var n,o,i,u,a;n=r(3033),o=r(8953).utf8,i=r(3819),u=r(8953).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?u.stringToBytes(t):o.stringToBytes(t):i(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var r=n.bytesToWords(t),c=8*t.length,s=1732584193,l=-271733879,f=-1732584194,h=271733878,d=0;d<r.length;d++)r[d]=16711935&(r[d]<<8|r[d]>>>24)|4278255360&(r[d]<<24|r[d]>>>8);r[c>>>5]|=128<<c%32,r[14+(c+64>>>9<<4)]=c;var v=a._ff,p=a._gg,y=a._hh,g=a._ii;for(d=0;d<r.length;d+=16){var b=s,_=l,m=f,w=h;s=v(s,l,f,h,r[d+0],7,-680876936),h=v(h,s,l,f,r[d+1],12,-389564586),f=v(f,h,s,l,r[d+2],17,606105819),l=v(l,f,h,s,r[d+3],22,-1044525330),s=v(s,l,f,h,r[d+4],7,-176418897),h=v(h,s,l,f,r[d+5],12,1200080426),f=v(f,h,s,l,r[d+6],17,-1473231341),l=v(l,f,h,s,r[d+7],22,-45705983),s=v(s,l,f,h,r[d+8],7,1770035416),h=v(h,s,l,f,r[d+9],12,-1958414417),f=v(f,h,s,l,r[d+10],17,-42063),l=v(l,f,h,s,r[d+11],22,-1990404162),s=v(s,l,f,h,r[d+12],7,1804603682),h=v(h,s,l,f,r[d+13],12,-40341101),f=v(f,h,s,l,r[d+14],17,-1502002290),s=p(s,l=v(l,f,h,s,r[d+15],22,1236535329),f,h,r[d+1],5,-165796510),h=p(h,s,l,f,r[d+6],9,-1069501632),f=p(f,h,s,l,r[d+11],14,643717713),l=p(l,f,h,s,r[d+0],20,-373897302),s=p(s,l,f,h,r[d+5],5,-701558691),h=p(h,s,l,f,r[d+10],9,38016083),f=p(f,h,s,l,r[d+15],14,-660478335),l=p(l,f,h,s,r[d+4],20,-405537848),s=p(s,l,f,h,r[d+9],5,568446438),h=p(h,s,l,f,r[d+14],9,-1019803690),f=p(f,h,s,l,r[d+3],14,-187363961),l=p(l,f,h,s,r[d+8],20,1163531501),s=p(s,l,f,h,r[d+13],5,-1444681467),h=p(h,s,l,f,r[d+2],9,-51403784),f=p(f,h,s,l,r[d+7],14,1735328473),s=y(s,l=p(l,f,h,s,r[d+12],20,-1926607734),f,h,r[d+5],4,-378558),h=y(h,s,l,f,r[d+8],11,-2022574463),f=y(f,h,s,l,r[d+11],16,1839030562),l=y(l,f,h,s,r[d+14],23,-35309556),s=y(s,l,f,h,r[d+1],4,-1530992060),h=y(h,s,l,f,r[d+4],11,1272893353),f=y(f,h,s,l,r[d+7],16,-155497632),l=y(l,f,h,s,r[d+10],23,-1094730640),s=y(s,l,f,h,r[d+13],4,681279174),h=y(h,s,l,f,r[d+0],11,-358537222),f=y(f,h,s,l,r[d+3],16,-722521979),l=y(l,f,h,s,r[d+6],23,76029189),s=y(s,l,f,h,r[d+9],4,-640364487),h=y(h,s,l,f,r[d+12],11,-421815835),f=y(f,h,s,l,r[d+15],16,530742520),s=g(s,l=y(l,f,h,s,r[d+2],23,-995338651),f,h,r[d+0],6,-198630844),h=g(h,s,l,f,r[d+7],10,1126891415),f=g(f,h,s,l,r[d+14],15,-1416354905),l=g(l,f,h,s,r[d+5],21,-57434055),s=g(s,l,f,h,r[d+12],6,1700485571),h=g(h,s,l,f,r[d+3],10,-1894986606),f=g(f,h,s,l,r[d+10],15,-1051523),l=g(l,f,h,s,r[d+1],21,-2054922799),s=g(s,l,f,h,r[d+8],6,1873313359),h=g(h,s,l,f,r[d+15],10,-30611744),f=g(f,h,s,l,r[d+6],15,-1560198380),l=g(l,f,h,s,r[d+13],21,1309151649),s=g(s,l,f,h,r[d+4],6,-145523070),h=g(h,s,l,f,r[d+11],10,-1120210379),f=g(f,h,s,l,r[d+2],15,718787259),l=g(l,f,h,s,r[d+9],21,-343485551),s=s+b>>>0,l=l+_>>>0,f=f+m>>>0,h=h+w>>>0}return n.endian([s,l,f,h])})._ff=function(t,e,r,n,o,i,u){var a=t+(e&r|~e&n)+(o>>>0)+u;return(a<<i|a>>>32-i)+e},a._gg=function(t,e,r,n,o,i,u){var a=t+(e&n|r&~n)+(o>>>0)+u;return(a<<i|a>>>32-i)+e},a._hh=function(t,e,r,n,o,i,u){var a=t+(e^r^n)+(o>>>0)+u;return(a<<i|a>>>32-i)+e},a._ii=function(t,e,r,n,o,i,u){var a=t+(r^(e|~n))+(o>>>0)+u;return(a<<i|a>>>32-i)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(a(t,e));return e&&e.asBytes?r:e&&e.asString?u.bytesToString(r):n.bytesToHex(r)}},3073:function(t,e,r){"use strict";function n(t,e){return e=e||{},new Promise((function(r,n){var o=new XMLHttpRequest,i=[],u=[],a={},c=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:c,headers:{keys:function(){return i},entries:function(){return u},get:function(t){return a[t.toLowerCase()]},has:function(t){return t.toLowerCase()in a}}}};for(var s in o.open(e.method||"get",t,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,r){i.push(e=e.toLowerCase()),u.push([e,r]),a[e]=a[e]?a[e]+","+r:r})),r(c())},o.onerror=n,o.withCredentials="include"==e.credentials,e.headers)o.setRequestHeader(s,e.headers[s]);o.send(e.body||null)}))}r.r(e),r.d(e,{default:function(){return n}})},8542:function(t,e){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var t="",e=0;e<arguments.length;e++){var r=arguments[e];r&&(t=u(t,i(r)))}return t}function i(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return o.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var r in t)n.call(t,r)&&t[r]&&(e=u(e,r));return e}function u(t,e){return e?t?t+" "+e:t+e:t}t.exports?(o.default=o,t.exports=o):void 0===(r=function(){return o}.apply(e,[]))||(t.exports=r)}()},5214:function(t,e,r){"use strict";function n(t,e,r,n,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var u=t.apply(e,r);function a(t){n(u,o,i,a,c,"next",t)}function c(t){n(u,o,i,a,c,"throw",t)}a(void 0)}))}}r.d(e,{Z:function(){return o}})},6744:function(t,e,r){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r.d(e,{Z:function(){return o}})},4884:function(t,e,r){"use strict";function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}r.d(e,{Z:function(){return o}})},1986:function(t,e,r){"use strict";function n(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}r.d(e,{Z:function(){return n}})},1630:function(t,e){"use strict";var r=Object.assign.bind();e.Z=r}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/mobilemall-buyerusermobiledefault/_/943.ab9f9cfd5e2473c23a8c.legacy.js.map