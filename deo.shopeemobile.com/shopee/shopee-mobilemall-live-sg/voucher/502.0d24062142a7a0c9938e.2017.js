"use strict";(self.webpackChunk_shopee_voucher_rw=self.webpackChunk_shopee_voucher_rw||[]).push([[502],{1966:(e,r,t)=>{t.d(r,{l:()=>u,p:()=>s});var o,a,c,i,_=((o=_||{})[o.Captcha=1]="Captcha",o[o.ForceLogin=2]="ForceLogin",o),n=((a=n||{})[a.Block=2]="Block",a[a.Challenge=3]="Challenge",a),s=((c={})[c.UNKNOWN=0]="UNKNOWN",c[c.VOUCHER_OPC_DRAWER=1]="VOUCHER_OPC_DRAWER",c[c.VOUCHER_CART_DRAWER=2]="VOUCHER_CART_DRAWER",c),u=((i={})[i.NORMAL=0]="NORMAL",i[i.MALL=1]="MALL",i[i.PREFERRED=2]="PREFERRED",i[i.PREFERRED_PLUS=3]="PREFERRED_PLUS",i)},2378:(e,r,t)=>{t.d(r,{A:()=>o});let o=function(e,r,t){if(Array.isArray(r)&&r.length)for(var o=0,a=r.length;o<a;o++){var c=r[o];if(!e||!e.hasOwnProperty(c))return t;e=e[c]}return e}},2530:(e,r,t)=>{t.d(r,{T:()=>y});var o={};t.r(o),t.d(o,{clear:()=>l,getItem:()=>s,isSupported:()=>n,removeItem:()=>d,setItem:()=>u});var a=t(9469),c=t(1594),i=t(4122);function _(e,r){var t=r.isSupported.bind(this,e),o=r.getItem.bind(this,e),a=r.setItem.bind(this,e),c=r.removeItem.bind(this,e);return{read:o,get:o,getItem:o,write:a,set:a,setItem:a,remove:c,removeItem:c,clear:r.clear.bind(this,e),isSupported:t}}var n=function(e){var r="SPC_"+e+"_TEST_KEY";try{if(!(self&&self[e]))return!1;return self[e].setItem(r,r),self[e].removeItem(r),!0}catch(e){return!1}},s=function(e,r){try{if(window&&window[e]){var t=window[e].getItem(r);return t?JSON.parse(t):void 0}}catch(e){return}},u=function(e,r,t){try{if(window&&window[e]){var o=JSON.stringify(t);window[e].setItem(r,o)}}catch(e){}},d=function(e,r){try{window&&window[e]&&window[e].removeItem(r)}catch(e){}},l=function(e,r){var t={};r&&r.forEach(function(r){t[r]=s(e,r)});try{window&&window[e]&&window[e].clear()}catch(e){}r&&r.forEach(function(r){t[r]&&u(e,r,t[r])})},p=_("localStorage",o);_("sessionStorage",o);var h="@shopee/account-basic-info";t(6048),t(9170);var f=t(574);f.FetchUtils.get,f.FetchUtils.post;var v=Object.freeze({username:"",nickname:"",default_address:void 0,holiday_mode_on:!1,holiday_mode_mtime:null,userid:0,shopid:0,access:{wallet_setting:void 0,wallet_provider:void 0},phone:"",has_password:!1,phone_verified:!1,payment_password:void 0,web_option:void 0,portrait:"",is_seller:!1,is_mall_seller:!1,email:"",email_verified:!1,not_new_user:!1,ctime:0,feed_account_info:void 0,birth_timestamp:void 0,birth_timestamp_verified:!1,adult_consent:void 0,cb_option:0,tos_accepted_time:void 0,cover:"",cookies_accepted_time:void 0,disallow_data_processing:void 0,tax_id:""}),m=t(9066);t(2914);var b=t(2378);new(t(5497)).PerformanceTrace("accountInfo",{type:"accountInfoLoad"});var w=t(2562),g=function(e){var r=(0,b.A)(e,["info"]),t=(0,b.A)(r,["userid"],null),o=(0,b.A)(e,["progress"],m.Ay.INIT),a=(0,b.A)(e,["error"]),c=o===m.Ay.INIT||o===m.Ay.REQ||o===m.Ay.ERR&&19!==a?w.u.UNKNOWN:o===m.Ay.OK&&t?w.u.LOGGED_IN:w.u.NOT_LOGGED_IN;return{accountInfo:{userId:(0,b.A)(r,["userid"])||v.userid,username:(0,b.A)(r,["username"])||v.username,nickname:(0,b.A)(r,["nickname"])||v.nickname,email:(0,b.A)(r,["email"])||v.email,emailVerified:(0,b.A)(r,["email_verified"])||v.email_verified,phone:(0,b.A)(r,["phone"])||v.phone,hasPassword:(0,b.A)(r,["has_password"])||v.has_password,portrait:(0,b.A)(r,["portrait"])||v.portrait,adultConsentTimestamp:(0,b.A)(r,["adult_consent"])||v.adult_consent,birthTimestamp:(0,b.A)(r,["birth_timestamp"])||v.birth_timestamp,birthTimestampVerified:(0,b.A)(r,["birth_timestamp_verified"])||v.birth_timestamp_verified,ctime:(0,b.A)(r,["ctime"])||v.ctime,isSeller:(0,b.A)(r,["is_seller"])||v.is_seller,isMallSeller:(0,b.A)(r,["is_mall_seller"])||v.is_mall_seller,isNewUser:!(0,b.A)(r,["not_new_user"])||v.not_new_user,shopId:(0,b.A)(r,["shopid"])||v.shopid,tosAcceptedTime:(0,b.A)(r,["tos_accepted_time"])||v.tos_accepted_time,webOption:(0,b.A)(r,["web_option"])||v.web_option,paymentPassword:(0,b.A)(r,["payment_password"])||v.payment_password,cbOption:(0,b.A)(r,["cb_option"])||v.cb_option,cookiesAcceptedTime:(0,b.A)(r,["cookies_accepted_time"])||v.cookies_accepted_time,disallowDataProcessing:(0,b.A)(r,["disallow_data_processing"])||v.disallow_data_processing,taxId:(0,b.A)(r,["tax_id"])||v.tax_id},accountStatus:c,accountInfoProgress:o,accountInfoError:a}},y=function(){var e=(0,c.useContext)(i.AccountContext),r=e.actions,t=e.state,o=(0,c.useMemo)(function(){return g(t)},[t]),_=o.accountStatus,n=o.accountInfo,s=n.username,u=n.portrait;return(0,c.useEffect)(function(){if(_===w.u.LOGGED_IN)p.setItem(h,{username:s,portrait:u});else _===w.u.NOT_LOGGED_IN&&p.removeItem(h)},[_,s,u]),(0,c.useMemo)(function(){return(0,a._)({},o,r)},[o,r])}},2562:(e,r,t)=>{t.d(r,{u:()=>a});var o,a=((o={})[o.UNKNOWN=0]="UNKNOWN",o[o.LOGGED_IN=1]="LOGGED_IN",o[o.NOT_LOGGED_IN=2]="NOT_LOGGED_IN",o)},2577:(e,r,t)=>{t.d(r,{pq:()=>B.p,Q8:()=>ei,p8:()=>o,Nn:()=>z,XW:()=>X,Wg:()=>$,tk:()=>J,Hv:()=>q,tA:()=>ee,uJ:()=>er,OL:()=>Z,QG:()=>ec,CN:()=>eo,lm:()=>et,v4:()=>ea});var o={};t.r(o),t.d(o,{bS:()=>b,WH:()=>v,r8:()=>m,sy:()=>w,ZR:()=>T,bV:()=>L,Qi:()=>P,c0:()=>G,EM:()=>n,$L:()=>F,li:()=>D,uQ:()=>A,pk:()=>y,q5:()=>_,EP:()=>l,Bw:()=>p,YD:()=>h,FE:()=>f,Wc:()=>g,vF:()=>S,jq:()=>k,tG:()=>c,GV:()=>i,fW:()=>d,DO:()=>s,md:()=>I,eL:()=>O,Vk:()=>E,hR:()=>u,xl:()=>N,ey:()=>R,KI:()=>C});var a=t(9469);t(7660);var c="/api/v2/voucher_wallet/get_vouchers",i="/api/v2/voucher_wallet/spl/get_vouchers",_="/api/v2/voucher_wallet/get_recommend_vouchers",n="/api/v2/voucher_wallet/get_partner_vouchers",s="/api/v2/voucher_wallet/mark_partner_voucher",u="/api/v2/voucher_wallet/save_voucher",d="/api/v2/voucher_wallet/get_free_shipping_voucher_by_promotion_id",l="/api/v2/voucher_wallet/get_shop_vouchers_by_shopid",p="/api/v2/voucher_wallet/spl/get_shop_vouchers_by_shopid",h="/api/v2/voucher_wallet/get_shop_voucher_list_by_shopid",f="/api/v2/voucher_wallet/spl/get_shop_voucher_list_by_shopid",v="/api/v2/voucher_wallet/batch_get_voucher_by_promotion_id",m="/api/v2/voucher_wallet/spl/batch_get_voucher_by_promotion_id",b="/api/v2/voucher_wallet/batch_get_vouchers_by_promotion_ids",w="/api/v4/voucher_wallet/batch_get_vouchers_by_promotion_ids",g="/api/v2/voucher_wallet/get_user_voucher_by_time",y="/api/v2/voucher_wallet/get_recommend_shop_vouchers",A="/api/v2/voucher_wallet/get_recommend_platform_vouchers",E="/api/v2/voucher_wallet/save_shop_voucher_by_voucher_code",I="/api/v2/voucher_wallet/save_platform_voucher_by_voucher_code",O="/api/v2/voucher_wallet/save_shop_voucher",R="/api/v2/voucher_wallet/validate_shop_voucher_by_voucher_code",N="/api/v2/voucher_wallet/validate_platform_voucher_by_voucher_code",C="/api/v4/voucher_wallet/validate_voucher_drawer",D="/api/v2/voucher_wallet/spl/get_recommend_vouchers",S="/api/v2/voucher_wallet/get_user_voucher_list",k="/api/v4/voucher_wallet/get_user_voucher_list_meta",L="/api/v4/mpi/get_microsite_recommended_vouchers",F="/api/v4/voucher/get_recommended_vouchers_by_model",G="/api/v4/mpi/rcmd/get_recommended_vouchers_by_model",P="/api/v4/mpi/rcmd/get_recommended_opv",T="/api/v4/microsite/get_vouchers",U=t(6048),W=t(9170),H=t(574);function x(e){return!!(e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e))}function M(e,r){return r&&!0===r.clone&&x(e)?V(Array.isArray(e)?[]:{},e,r):e}function j(e,r,t){var o=e.slice();return r.forEach(function(r,a){void 0===o[a]?o[a]=M(r,t):x(r)?o[a]=V(e[a],r,t):-1===e.indexOf(r)&&o.push(M(r,t))}),o}function V(e,r,t){if(!e)return r;if(!r)return e;var o,a=Array.isArray(r),c=Array.isArray(e),i=t||{arrayMerge:j};return a!==c?M(r,t):a?(i.arrayMerge||j)(e,r,t):(o={},x(e)&&Object.keys(e).forEach(function(r){o[r]=M(e[r],t)}),Object.keys(r).forEach(function(a){x(r[a])&&e[a]?o[a]=V(e[a],r[a],t):o[a]=M(r[a],t)}),o)}V.all=function(e,r){if(!Array.isArray(e)||e.length<2)throw Error("first argument should be an array with at least two elements");return e.reduce(function(e,t){return V(e,t,r)})};let K=V;function Q(e){return(0,U._)(function(){return(0,W.YH)(this,function(r){return 0x562056f===e.error?[2,new Promise(function(){})]:e.error?[2,{error:e.error,error_msg:e.error_msg,data:e.data,response:void 0}]:[2,{response:(0,a._)({},e,{status:e.__raw.status,headers:e.__raw.headers})}]})})()}var Y=function(){var e="Voucher.RW";return(0,a._)({apiProtection:{signatureLevel:2}},e?{antiCrawler:{appKey:e,shouldReplaceHistory:!1}}:{})};function z(e,r){return(0,U._)(function(){var t,o,c;return(0,W.YH)(this,function(i){switch(i.label){case 0:return c=K(null!=(t=Y())?t:{},null!=(o=null==r?void 0:r.antiFraudConfig)?o:{}),[4,H.FetchUtils.get(e,(0,a._)({},r,{antiFraudConfig:c}))];case 1:return[4,Q(i.sent())];case 2:return[2,i.sent()]}})})()}function q(e,r,t){return(0,U._)(function(){var o,c,i;return(0,W.YH)(this,function(_){switch(_.label){case 0:return i=K(null!=(o=Y())?o:{},null!=(c=null==t?void 0:t.antiFraudConfig)?c:{}),[4,H.FetchUtils.post(e,r||{},(0,a._)({},t,{antiFraudConfig:i}))];case 1:return[4,Q(_.sent())];case 2:return[2,_.sent()]}})})()}var B=t(1966);function J(e,r,t,o,c){return q("/api/v2/voucher_wallet/get_voucher_detail",(0,a._)({promotionid:e,voucher_code:r,signature:t},o),(0,a._)({},c?{headers:c}:{},{antiFraudConfig:{antiCrawler:{shouldReplaceHistory:!0}}}))}function $(e,r){return q(y,{orders:e.orders,shopid:e.shopid,shop_ids:e.shop_ids,group_buy_info:e.group_buy_info,slash_price_info:e.slash_price_info,spm_channel_id:e.spm_channel_id,legacy_spm_channel_id:e.legacy_spm_channel_id,check_voucher_payment_criteria:e.check_voucher_payment_criteria,selected_payment_channel_data:e.selected_payment_channel_data,card_bin_number:e.card_bin_number,sorting_flag:e.sorting_flag,priority_promotion_ids:e.priority_promotion_ids,has_redeem_coins:e.has_redeem_coins,platform_vouchers:e.platform_vouchers,move_up_addon_voucher:e.move_up_addon_voucher,caller_source:e.caller_source,cursor:e.cursor},r?{headers:r}:{})}function X(e,r){var t=e.orders,o=e.group_buy_info,c=e.slash_price_info,i=e.voucher_market_type,_=e.dp_items,n=e.check_voucher_payment_criteria,s=e.selected_payment_channel_data,u=e.spm_channel_id,d=e.legacy_spm_channel_id,l=e.card_bin_number,p=e.need_wallet_active_info,h=e.sorting_flag,f=e.priority_promotion_ids,v=e.voucher_payment_type,m=e.has_redeem_coins,b=e.higher_bpsf_logistics_channel,w=e.payment_manual_change,g=e.caller_source;return q(A,(0,a._)({orders:t,group_buy_info:o,slash_price_info:c,voucher_market_type:i,dp_items:_,check_voucher_payment_criteria:n,selected_payment_channel_data:s,spm_channel_id:u,legacy_spm_channel_id:d,card_bin_number:l,need_wallet_active_info:p,sorting_flag:h,priority_promotion_ids:f},null!=v?{voucher_payment_type:v}:{},{has_redeem_coins:m,higher_bpsf_logistics_channel:b,payment_manual_change:w,caller_source:g}),r?{headers:r}:{})}function Z(e,r){return q(E,{voucher_code:e.voucher_code,shop_ids:e.shop_ids,shop_orders:e.shop_orders},(0,a._)({},r?{headers:r}:{}))}function ee(e,r){return q(I,{voucher_code:e.voucher_code},(0,a._)({},r?{headers:r}:{}))}function er(e,r){return q(O,{promotionid:e.promotionid,voucher_code:e.voucher_code,shopid:e.shopid},(0,a._)({},r?{headers:r}:{}))}function et(e,r){return q(R,e,(0,a._)({},r?{headers:r}:{}))}function eo(e,r){return q(N,e,(0,a._)({},r?{headers:r}:{}))}function ea(e,r){return q(C,e,r?{headers:r}:{})}function ec(e,r){var t=e.voucher_code,o=e.voucher_promotionid,c=e.promotion_signature,i=e.need_user_voucher_status,_=e.source,n=e.sz_dfp,s=e.need_sz_dfp;return q(u,(0,a._)({voucher_code:t,voucher_promotionid:o,signature:c},n&&{security_device_fingerprint:n},i?{need_user_voucher_status:i}:{},null==_?{}:{signature_source:_}),(0,a._)({},void 0!==s&&s?{antiFraudConfig:{deviceFingerPrint:{dataFormatter:function(e){return{security_device_fingerprint:e}}}}}:{},r?{headers:r}:{}))}function ei(e,r,t){return q(b,{promotion_info:e,need_user_voucher_status:!!r},t?{headers:t}:{})}},2914:(e,r,t)=>{t.d(r,{S:()=>o});var o=!!("undefined"!=typeof window&&window.document&&window.document.createElement)},3060:(e,r,t)=>{t.d(r,{g:()=>s});var o=/\/+/g,a=/[\s<>#%"{}|\\^[\]`;/?:@&=+$,]/g,c=/\0/g,i=/-+/g;function _(e){return e.trim().replace(a,"-").replace(c,"").replace(i,"-")}var n=t(1152);function s(e,r){var t=(0,n.R)(e),a=t.host,c=t.pathname,i=t.hash,s=t.search,u=t.href,d=!!a&&(a===r||a.replace("mall.","")===r||a.replace("lite.","")===r),l=c.replace(o,"/").split("/").map(_).join("/");return{url:d?""+l+s+i:u,sameDomain:d}}},3276:(e,r,t)=>{t.d(r,{A:()=>o});let o=function(e,r){return function(t,o){return(void 0===t&&(t=r),o&&e.hasOwnProperty(o.type))?e[o.type](t,o):t}}},4514:(e,r,t)=>{t.d(r,{EDf:()=>m,GYv:()=>p,HiQ:()=>_,Hov:()=>l,Ipv:()=>u,Kpn:()=>d,MoL:()=>i,Pxd:()=>c,UHC:()=>n,VM8:()=>s,VaE:()=>w,WQe:()=>o,c9T:()=>a,nxe:()=>v,vOD:()=>h,wG4:()=>b,x73:()=>g,ype:()=>f});var o="4e7517143480ade87916f4f8983ab85c5357ebf36f3b9a000cebfc15415da811",a="4a87145be31ce93d0d2002604b0818503ebdf7ce31e037e1b5aa13bde4348be8",c="ae81efe6e5a11084e9ca6691298706f54f1155df057bddf28eff57d4c316276c",i="06bf4621b8c4a48fd700fb009e823c9fc8304a34bb0aacc15b19ced1d0657bd8",_="2be92b542a827f3fd9b5fb785602e862bc1aaa63977518df5d45dd393e91f046",n="f5041c85fe43171e18836abfec9cb029302b848cf9716f4caf5572e04f503ebd",s="ca04bd98d36350ecc960136c219d60fff82405b3fb796fbc88e3040cea75846e",u="e0095d4ddf8b28086c0a2d6b2cba1af01a7c8860c0d3ccb5be8197a8f22991ec",d="b410284d5c4392a13d39671dae9814903d79a764488cc7ec4a8f6fef4958f2e0",l="3e0388a5baeb24421dd941c696efc512656230dfa9cefba0f155107f78da439b",p="c623bac0c6dabe51bbd44428f297e78208b61e1b213895a354174426fb4fb003",h="ff1d0987c48e9429e46f479f2e418cfcc5f6ffd07cc17e23e8c5a1522e747a39",f="03caabe5caf6f2790ecae42c54a64ff07058339f0bea5e536026f785fabf17f1",v="d2da29cf8366fe6208831c9661aa448db5773ac7fd0b549fe8a92927e1ef8f95",m="7760fc55006d91d43fb88bacfbfdff46ec057281283ec96ae01db8d49be8cbf3",b="4ff9b3e24cd3c07317724e53b9ccf84eb99cd3cf8ebd601cc5c5107925c314ed",w="488e0e8b9c76a529c6fcb4cc7540f1a12f1b830fc11e35935362d836dea3438b",g="dab29607ace2228a98ac82afc26be0f4b10ee137d9d5ea25da4f4f5ed7825928"},7548:(e,r,t)=>{t.d(r,{b:()=>o});function o(e){return{NAME:""+e,REQUESTED:""+e+"_REQUESTED",SUCCESS:""+e+"_SUCCESS",FAILED:""+e+"_FAILED"}}},9066:(e,r,t)=>{t.d(r,{Ay:()=>a,Gd:()=>o});var o=Object.freeze({INIT:0,REQ:1,OK:2,ERR:3});Object.freeze({apiProgress:o.INIT,error:null,error_msg:null});let a=o}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/mobilemall-voucher/_/502.0d24062142a7a0c9938e.2017.js.map