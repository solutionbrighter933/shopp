"use strict";(self.webpackChunk_shopee_voucher_rw=self.webpackChunk_shopee_voucher_rw||[]).push([[76],{1291:(o,r,e)=>{e.d(r,{CH:()=>u,fq:()=>h,x2:()=>s});var c=e(1966);function s(o,r){var e,s=[];if((null==o||null==(e=o.recommendedShopVouchers)?void 0:e.shopData)&&r.length>0){s=r.map(function(r){var e,s,u;return{shopid:r,shopName:(null==(e=o.recommendedShopVouchers.shopData)?void 0:e[r])?o.recommendedShopVouchers.shopData[r].shopName:"",shopType:(null==(s=o.recommendedShopVouchers.shopData)?void 0:s[r])?o.recommendedShopVouchers.shopData[r].shopType:c.l.NORMAL,vouchers:(null==(u=o.recommendedShopVouchers.shopData)?void 0:u[r])?o.recommendedShopVouchers.shopData[r].vouchers:[]}},[]);var u=o.recommendedShopVouchers.shopDataPositionMap||{};Object.keys(u).length>0&&s.sort(function(o,r){var e,c;return(null!=(e=u[o.shopid])?e:Number.MAX_SAFE_INTEGER)-(null!=(c=u[r.shopid])?c:Number.MAX_SAFE_INTEGER)})}return s.length>0?s.filter(function(o){return o.vouchers.length>0}):s}function u(o){var r;return null==o||null==(r=o.recommendedShopVouchers)?void 0:r.next_cursor}function h(o,r,e){if(!e)return{};var c,s=null==o||null==(c=o.voucherDetail)?void 0:c[r||"0"];return(null==s?void 0:s[e])||{}}},8076:(o,r,e)=>{e.d(r,{z:()=>g});var c,s=e(9469),u=e(7809),h=e(2796),n=e(1594),d=e.n(n),i=e(9066),a=e(3276),_=e(1966),p=e(6983),t=e(8909),m=e(3501),v=e(1291),l=t.No;let f=(0,a.A)(((c={})[m.Us.REQUESTED]=function(o,r){var e,c,u,h,n,d=r.shopId,i=r.itemId,a=i?((h={})[i]={vouchers:(null==(u=o.shop)||null==(c=u[d])||null==(e=c[i])?void 0:e.vouchers)||[],error:-100},h):{};return(0,s._)({},o,{shop:(0,s._)({},o.shop,((n={})[d]=(0,s._)({},o.shop[d],!i&&{error:-100}||{},a),n))})},c[m.Us.SUCCESS]=function(o,r){var e,c,u,h=r.data,n=r.shopId,d=r.itemId,i=r.priorityVoucherList;return(0,s._)({},o,{shop:(0,s._)({},o.shop,!d&&((e={})[n]={error:0,vouchers:(null==h?void 0:h.voucher_list)||[],priorityVoucherList:i},e)||{},d&&o.shop&&((u={})[n]=(0,s._)({},o.shop[n],((c={})[d]={vouchers:(null==h?void 0:h.voucher_list)||[],error:0},c)),u))})},c[m.Us.FAILED]=function(o,r){var e,c,u,h=r.shopId,n=r.error,d=r.itemId;return(0,s._)({},o,{shop:(0,s._)({},o.shop,!d&&((e={})[h]={error:n,vouchers:[]},e)||{},{error:n},d&&o.shop&&((u={})[h]=(0,s._)({},o.shop[h],((c={})[d]={vouchers:[],error:n},c)),u))})},c[m.zo.REQUESTED]=function(o,r){var e;return(0,s._)({},o,{recommendedShopVouchers:(0,s._)({},o.recommendedShopVouchers,{progress:i.Ay.REQ}),shop:(0,s._)({},o.shop,((e={})[r.shopId]={vouchers:[],error:-100},e))})},c[m.zo.FAILED]=function(o,r){var e;return(0,s._)({},o,{recommendedShopVouchers:(0,s._)({},o.recommendedShopVouchers,{progress:i.Ay.ERR,error:r.error,error_msg:r.error_msg}),shop:(0,s._)({},o.shop,((e={})[r.shopId]=(0,s._)({},o.shop[r.shopId],{error:r.error}),e))})},c[m.zo.SUCCESS]=function(o,r){var e,c,u,h,n,d=r.data,a=r.shop_voucher_lists,t=r.shopId,m=r.isCheckout,v=r.next_cursor;return(0,s._)({},o,{recommendedShopVouchers:(0,s._)({},o.recommendedShopVouchers,(null==d?void 0:d.shop_vouchers)&&((h={})[t]=(d.shop_vouchers||[]).filter(function(o){var r,e;return!m&&![p.GM.NOT_COMPLETE_TASK].includes(null!=(r=o.invalid_message_code)?r:-1/0)||!p.oV.includes(null!=(e=o.invalid_message_code)?e:-1/0)}),h),{shopData:(0,s._)({},o.recommendedShopVouchers.shopData,a.reduce(function(o,r){var e,c,u,h;return(0,s._)({},o,((h={})[null!=(e=r.shop_id)?e:0]={vouchers:(r.shop_vouchers||[]).filter(function(o){var r,e;return!m&&![p.GM.NOT_COMPLETE_TASK].includes(null!=(r=o.invalid_message_code)?r:-1/0)||!p.oV.includes(null!=(e=o.invalid_message_code)?e:-1/0)}),shopName:null!=(c=r.shop_name)?c:"",shopType:null!=(u=r.shop_type)?u:_.l.NORMAL},h))},{})),shopDataPositionMap:(0,s._)({},o.recommendedShopVouchers.shopDataPositionMap,(e=o.recommendedShopVouchers.shopDataPositionMap,c=a.map(function(o){var r;return null!=(r=o.shop_id)?r:0}),u=Object.keys(e||{}).length,c.reduce(function(o,r,c){return(null==e?void 0:e[r])!==void 0?o[r]=e[r]:o[r]=u+c,o},{}))),next_cursor:v,progress:i.Ay.OK}),shop:(0,s._)({},o.shop,((n={})[t]=(0,s._)({},o.shop[t],{error:0}),n))})},c[l.FAILED]=function(o,r){var e,c=r.payload,u=c.error,h=c.error_msg,n=c.error_config,d=c.voucher_code;return(0,s._)({},o,{claimProgress:(0,s._)({},o.claimProgress,((e={})[d]={progress:u===p.Aq?i.Ay.OK:i.Ay.ERR,error:u,error_msg:h,error_config:n},e))})},c[l.SUCCESS]=function(o,r){var e=null==(m=r.payload.voucher)?void 0:m.shop_id,c=r.payload,u=c.voucher_code,h=c.voucher_promotionid,n=c.voucher,d=o.shop,a=(0,v.fq)(o,u,h?String(h):null);if(e){var _,p,t,m,l,f=o.shop[e],S=((null==f?void 0:f.vouchers)||[]).map(function(o){return o.voucher_code===r.payload.voucher_code?(0,s._)({},o,{is_claimed_before:!0}):o});d=(0,s._)({},d,((l={})[e]=(0,s._)({},f,{vouchers:[].concat(S)}),l))}return(0,s._)({},o,{shop:(0,s._)({},d),claimProgress:(0,s._)({},o.claimProgress,((_={})[r.payload.voucher_code]={progress:i.Ay.OK},_)),voucherDetail:((t={})[u||"0"]=((p={})[h]=(0,s._)({},a,{voucher_basic_info:a.voucher_basic_info||n?(0,s._)({},a.voucher_basic_info,n):null,progress:i.Ay.OK}),p),t)})},c[l.REQUESTED]=function(o,r){var e;return(0,s._)({},o,{claimProgress:(0,s._)({},o.claimProgress,((e={})[r.payload.voucher_code]={progress:i.Ay.REQ},e))})},c[m.YZ.REQUESTED]=function(o,r){var e;return(0,s._)({},o,{claimProgress:(0,s._)({},o.claimProgress,((e={})[r.voucher_code]={progress:i.Ay.REQ},e))})},c[m.YZ.SUCCESS]=function(o,r){var e,c=r.voucher_code,u=r.invalid_message_code,h=r.shopid,n=!u||u===p.cO.CLAIM_ERROR_EXIST,d=o.shop;if(h){var a,_=o.shop[h],t=((null==_?void 0:_.vouchers)||[]).map(function(o){return o.voucher_code===c?(0,s._)({},o,{is_claimed_before:n}):o});d=(0,s._)({},d,((a={})[h]=(0,s._)({},_,{vouchers:[].concat(t)}),a))}return(0,s._)({},o,{shop:(0,s._)({},d),claimProgress:(0,s._)({},o.claimProgress,((e={})[c]={progress:n?i.Ay.OK:i.Ay.ERR,invalid_message_code:u},e))})},c[m.YZ.FAILED]=function(o,r){var e,c=r.error;return(0,s._)({},o,{claimProgress:(0,s._)({},o.claimProgress,((e={})[r.voucher_code]={progress:c===p.Aq?i.Ay.OK:i.Ay.ERR,error:c,error_msg:r.error_msg},e))})},c[m.$m.REQUESTED]=function(o,r){var e;return(0,s._)({},o,{claimProgress:(0,s._)({},o.claimProgress,((e={})[r.voucher_code]={progress:i.Ay.REQ},e))})},c[m.$m.SUCCESS]=function(o,r){var e=r.shopid,c=o.shop;if(r.voucher&&e){var u,h,n=o.shop[e],d=((null==n?void 0:n.vouchers)||[]).map(function(o){return o.voucher_code===r.voucher_code?(0,s._)({},o,{is_claimed_before:!0}):o});c=(0,s._)({},c,((h={})[e]=(0,s._)({},n,{vouchers:[].concat(d)}),h))}return(0,s._)({},o,{shop:(0,s._)({},c),claimProgress:(0,s._)({},o.claimProgress,((u={})[r.voucher_code]={progress:r.voucher?i.Ay.OK:i.Ay.ERR},u))})},c[m.$m.FAILED]=function(o,r){var e,c=r.error,u=r.error_msg,h=r.error_config,n=r.voucher_code,d=r.invalid_message_code;return(0,s._)({},o,{claimProgress:(0,s._)({},o.claimProgress,((e={})[n]={progress:c===p.Aq?i.Ay.OK:i.Ay.ERR,error:c,error_msg:u,error_config:h,invalid_message_code:d},e))})},c[m.$k]=function(o,r){var e,c,u,h,n=r.voucher,d=r.shop_name,i=r.shop_type,a=n.shop_id;return a?(0,s._)({},o,{recommendedShopVouchers:(0,s._)({},o.recommendedShopVouchers,((h={})[a]=o.recommendedShopVouchers[a]?[].concat([n],o.recommendedShopVouchers[a].filter(function(o){return o.voucher_code!==n.voucher_code})):[n],h.shopData=(0,s._)({},o.recommendedShopVouchers.shopData,(null==(e=o.recommendedShopVouchers.shopData)?void 0:e[a])?((c={})[a]=(0,s._)({},o.recommendedShopVouchers.shopData[a],{vouchers:[].concat([n],o.recommendedShopVouchers.shopData[a].vouchers.filter(function(o){return o.voucher_code!==n.voucher_code}))}),c):((u={})[a]={vouchers:[n],shopName:null!=d?d:"",shopType:null!=i?i:_.l.NORMAL},u)),h))}):o},c[m.S_]=function(o,r){var e,c,u,h=r.voucher,n=h.shop_id;return n?(0,s._)({},o,{recommendedShopVouchers:(0,s._)({},o.recommendedShopVouchers,((u={})[n]=o.recommendedShopVouchers[n]?o.recommendedShopVouchers[n].filter(function(o){return o.voucher_code!==h.voucher_code}):[],u.shopData=(0,s._)({},o.recommendedShopVouchers.shopData,(null==(e=o.recommendedShopVouchers.shopData)?void 0:e[n])&&((c={})[n]=(0,s._)({},o.recommendedShopVouchers.shopData[n],{vouchers:o.recommendedShopVouchers.shopData[n].vouchers.filter(function(o){return o.voucher_code!==h.voucher_code})}),c)),u))}):o},c[m.VZ]=function(o,r){var e,c,u,h=r.voucher,n=h.shop_id;return n?(0,s._)({},o,{recommendedShopVouchers:(0,s._)({},o.recommendedShopVouchers,((u={})[n]=o.recommendedShopVouchers[n]?o.recommendedShopVouchers[n].map(function(o){return o.voucher_code===h.voucher_code?h:o}):[h],u.shopData=(0,s._)({},o.recommendedShopVouchers.shopData,(null==(e=o.recommendedShopVouchers.shopData)?void 0:e[n])&&((c={})[n]=(0,s._)({},o.recommendedShopVouchers.shopData[n],{vouchers:o.recommendedShopVouchers.shopData[n].vouchers.map(function(o){return o.voucher_code===h.voucher_code?h:o})}),c)),u))}):o},c[m.Ub]=function(o,r){var e,c=r.voucher.voucher_code;return c?(0,s._)({},o,{claimProgress:(0,s._)({},o.claimProgress,((e={})[c]={progress:i.Ay.OK},e))}):o},c[m.bZ.SUCCESS]=function(o,r){var e={};return r.data.forEach(function(r){var c,u=o.shop[r.shopid];e[r.shopid]={error:0,vouchers:(c=null==u?void 0:u.vouchers,r.voucher_list.map(function(o){return(0,s._)({},o,{is_claimed_before:null==c?void 0:c.some(function(r){return r.voucher_promotionid===o.voucher_promotionid&&r.is_claimed_before})})}))}}),(0,s._)({},o,{shop:(0,s._)({},o.shop,e)})},c[m.hq.REQUESTED]=function(o,r){var e,c,u=r.promotionid,h=r.voucher_code;return(0,s._)({},o,{voucherDetail:((c={})[h||"0"]=((e={})[u]={progress:i.Ay.REQ},e),c)})},c[m.hq.SUCCESS]=function(o,r){var e,c,u=r.data,h=r.promotionid,n=r.voucher_code;return(0,s._)({},o,{voucherDetail:((c={})[n||"0"]=(0,s._)({},o.voucherDetail[n],((e={})[h]=(0,s._)({},u,{progress:i.Ay.OK,error:void 0,error_msg:void 0}),e)),c)})},c[m.hq.FAILED]=function(o,r){var e,c,u=r.error,h=r.promotionid,n=r.voucher_code,d=r.error_msg;return(0,s._)({},o,{voucherDetail:((c={})[n||"0"]=(0,s._)({},o.voucherDetail[n],((e={})[h]={error:u,progress:i.Ay.ERR,error_msg:d},e)),c),error:u||-1})},c),{shop:{},claimProgress:{},voucherDetail:{},recommendedShopVouchers:{}});var S=e(8394);function g(o){function r(r){var e=r.injectAsyncReducer,c=(0,u._)(r,["injectAsyncReducer"]);return d().useEffect(function(){e({voucher:f})},[e]),(0,h.jsx)(o,(0,s._)({},c))}return r.displayName="withVoucherReduxInjected("+(o.displayName||o.name||"Component")+")",(0,S.withInjectReducer)(r)}}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/mobilemall-voucher/_/76.57f867a14bdf411a9e75.2017.js.map