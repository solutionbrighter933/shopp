"use strict";(globalThis.webpackChunk_shopee_voucher_rw=globalThis.webpackChunk_shopee_voucher_rw||[]).push([[504],{2527:(e,t,r)=>{r.d(t,{A1:()=>m,BH:()=>y,D$:()=>h,HL:()=>_,Hw:()=>f,bB:()=>s,cp:()=>d,fg:()=>v,iX:()=>E,vW:()=>p});var n=r(7013),i=r(8946);let{localizeCompactNumber:o,compactCurrency:u,formatServerCurrency:a,compactServerCurrency:c}=(0,i.getUtilsByCountry)((0,n.JK)(),n.mf?(0,n.mf)():void 0);function _(e,t){return isFinite(t=parseFloat(String(t||0)))?"zh-Hant"===(0,n.mf)()?Math.round(100-t)/10:Math.round(t):t}function s(e,t=!0){return isFinite(e=parseFloat(String(e||0))/1e5)?"zh-Hant"===(0,n.mf)()&&t?parseFloat(((100-e)/10).toFixed(3)):parseFloat(e.toFixed(2)):e}let l=(e,t)=>{switch(t){case"TH":case"TW":return(0,i.formatCurrency)(t,(0,i.deflateServerNumber)(e,t));case"VN":return u((0,i.deflateServerNumber)(e,t),3);default:return u((0,i.deflateServerNumber)(e,t),2)}};function d(e,t,r=!1){let n=r?{symbol:""}:void 0;switch(t){case"TW":return(0,i.formatCurrency)(t,(0,i.deflateServerNumber)(e,t),n);case"VN":return u((0,i.deflateServerNumber)(e,t),{maxPrecision:3,...n});default:return u((0,i.deflateServerNumber)(e,t),n)}}function m(e,t){return l(e,t)}function h(e,t){return l(e,t)}function f(e,t){switch(t){case"ID":return o(e);case"VN":return u(e,{symbol:"",maxPrecision:3});default:return u(e,{symbol:"",precision:0},[])}}function p(e,t){return _(t,e)}let y=(e,t)=>"TW"===t?(0,i.formatCurrency)(t,e,{symbol:""}):u(e,{symbol:"",maxPrecision:3}),E=(e,t)=>"TW"===t?a(e,{precision:!1}):c(e,{maxPrecision:3}),v=(e,t)=>u((0,i.deflateServerNumber)(e,t),{maxPrecision:3})},5504:(e,t,r)=>{r.d(t,{j0:()=>er,jt:()=>n,Is:()=>ep,J8:()=>eE,_J:()=>ey,SH:()=>es,jz:()=>Q,wH:()=>el,iN:()=>em,v:()=>ed,N$:()=>eu,qE:()=>ee,Vp:()=>et,l:()=>ef,Vr:()=>m,Qm:()=>_,M8:()=>y,Zq:()=>x,_j:()=>d,Oz:()=>h,CQ:()=>v,bS:()=>w,AV:()=>G,U2:()=>g,am:()=>L,ni:()=>k,u4:()=>B,or:()=>eh,OJ:()=>e_});var n={};r.r(n),r.d(n,{isAirpayVoucher:()=>m,isAvailableFreeShippingVoucher:()=>p,isBeforeClaimStartTime:()=>U,isCashLoanVoucher:()=>C,isCoinCashbackVoucher:()=>_,isDigitalPurchaseVoucher:()=>y,isDiscountVoucher:()=>a,isFreeShippingVoucher:()=>c,isMultiRewardVoucher:()=>x,isNormalVoucher:()=>O,isOfflineVoucher:()=>d,isPublicVoucher:()=>E,isPublisherOfflinePaymentVoucher:()=>h,isShoppingMallOPV:()=>s,isSingleShopVoucher:()=>v,isThirdPartyNowVoucher:()=>I,isUpcomingVoucher:()=>w,isUserWalletPartnerVoucher:()=>M,isVoucherClaimEndTimeOver:()=>P,isVoucherClaimInvalidError:()=>G,isVoucherComing:()=>g,isVoucherEndingSoon:()=>R,isVoucherEndingSoonWithTime:()=>L,isVoucherExpired:()=>l,isVoucherInapplicable:()=>k,isVoucherInvalid:()=>B,isVoucherNew:()=>T,isVoucherNotClaimable:()=>H,isVoucherStartingSoon:()=>A,isVoucherUsedUp:()=>f,isVoucherValid:()=>S});var i=r(7383),o=r(6983),u=r(8946);function a(e){return e.reward_type===o.tK.NORMAL_VOUCHER}function c(e){return e.reward_type===o.tK.FREE_SHIPPING_VOUCHER}function _(e){return e.reward_type===o.tK.COIN_CASHBACK_VOUCHER}function s(e){return!!e&&e.ui_display_type===o.$r.SHOPPING_MALL_OPV}function l(e){return"boolean"==typeof e.has_expired?e.has_expired:"number"==typeof e.end?e.end<Date.now()/1e3:!!e.end_time&&e.end_time<Date.now()/1e3}function d(e){return e.voucher_market_type===o.b1.OFFLINE_PAYMENT}function m(e){return!!(e&&e.voucher_external_market_type===o.qB.AIRPAY_OPV)}function h(e){return(d(e)||m(e))&&e.ui_display_type===o.$r.PUBLISHER_OPV}function f(e){return"number"==typeof e.left_count&&Number.isInteger(e.left_count)&&e.left_count<=0}function p(e){return!e.fsv_error_message&&e.is_applicable}function y(e){return e&&e.voucher_market_type===o.b1.DIGITAL_PURCHASE}function E(e){return e.use_type===o.hB.PUBLIC}function v(e){return!!e.shop_id}function O(e){return e.reward_type===o.tK.NORMAL_VOUCHER}function I(e){return 3===e.third_party_type}function M(e){return e.voucher_external_market_type===o.qB.PARTNER}function C(e){return e?.voucher_market_type===o.b1.CASHLOAN_BUYER||e?.voucher_market_type===o.b1.CASHLOAN_SELLER||e?.voucher_market_type===o.b1.SHOPEEPAY_LATER||e?.voucher_market_type===o.b1.SHOPEE_INSURANCE}function S(e){return!l(e)&&!e.fully_redeemed&&(!!e.is_claimed_before||!e.fully_claimed)}let D=new Date;D.setDate(D.getDate()+4);let N=new Date(D.toDateString()).getTime()/1e3,V=new Date;V.setDate(V.getDate()-3);let b=new Date(V.toDateString()).getTime()/1e3;function R(e){return!!e.end_time&&!l(e)&&e.end_time<N}function L(e){let t=new Date;return t.setDate(t.getDate()+3),!l(e)&&!!e.end_time&&e.end_time<t.getTime()/1e3}function A(e){let t=new Date;return t.setDate(t.getDate()+3),e<=t.getTime()/1e3}function T(e){return!l(e)&&!!e.start_time&&e.start_time>b}function g(e){return!!e.start_time&&e.start_time>Date.now()/1e3}function w(e){return(!!e.shop_id||e.voucher_market_type===o.b1.DEFAULT_MARKET_PLACE||e.voucher_market_type===o.b1.OFFLINE_PAYMENT)&&g(e)}function P(e){return!!e.claim_end_time&&e.claim_end_time<Date.now()/1e3}function U(e){return!!e.claim_start_time&&e.claim_start_time>Date.now()/1e3}function H(e){let{fully_used:t,fully_claimed:r,disabled:n,has_expired:i,already_redeemed:o}=e;return t||i||n||r&&!o||P(e)&&!o}let B=e=>!!e&&o.zT.includes(e)&&e!==o.GM.ALREADY_USED,k=e=>!!e&&o.kO.includes(e),G=e=>!!e&&e!==o.cO.CLAIM_ERROR_OK&&e!==o.cO.CLAIM_ERROR_EXIST,x=e=>!!e?.detail_multi_reward_info;var K=r(7660),F=r(7013);let $={ID:"co.id",SG:"sg",MY:"com.my",VN:"vn",PH:"ph",TH:"co.th",TW:"tw",BR:"com.br"}[(0,F.JK)()],J={test:"test.",uat:"uat.",live:""},W=J[(0,F._$)()]??J.live,X={ID:"co.id",SG:"sg",MY:"com.my",VN:"vn",PH:"ph",TH:"co.th",TW:"tw",BR:"com.br"}[(0,F.JK)()],Y={test:"test.",uat:"uat.",live:""},z=Y[(0,F._$)()]??Y.live;function Q(e,{fromMyVoucherPage:t=!1}={fromMyVoucherPage:!1}){if(e.exclusive_channel_type){if(e.exclusive_channel_type===o.K7.LIVESTREAM)return function(e,t={customFromSource:"voucher_use_pc"}){if(e.exclusive_channel_type!==o.K7.LIVESTREAM||void 0===$||void 0===W)return;let r=`https://live.${W}shopee.${$}/middle-page`,n={};return e.shop_id?(n.type="shop_session",n.id=e.shop_id):n.type="lp",r+(0,K.f6)(n)+`#${t.customFromSource}`}(e);if(e.exclusive_channel_type===o.K7.SHORT_VIDEO)return function(e,t){if(e.exclusive_channel_type!==o.K7.SHORT_VIDEO||void 0===X||void 0===z)return;let r=`https://sv.${z}shopee.${X}/landing`,n={type:"voucher",targetPage:"common-timeline",fromSource:"PC",location:t.location},i={};return e.shop_id&&(i.shopid=e.shop_id),i.promotionId=e.promotionid,n.extInfo=JSON.stringify(i),r+(0,K.f6)(n)}(e,{location:t?"voucher_wallet":"cart_voucher_drawer"})}}var j=r(574);let{t:q}=j.I18n,{t:Z}=j.I18n,ee=e=>{if(!e||e===o.cO.CLAIM_ERROR_EXIST)return"";switch(e){case o.cO.CLAIM_ERROR_NO_QUOTA:return Z("is_fully_redeemed");case o.cO.CLAIM_ERROR_EXPIRED:return Z("is_expired");default:return Z("is_invalid")}},et=e=>{if(!e)return"";switch(e){case o.GM.NO_QUOTA:return Z("is_fully_redeemed");case o.GM.CODE_EXPIRED:return Z("is_expired");default:return Z("is_invalid")}},er="6";r(9066);var en=r(2527);let{t:ei}=j.I18n;function eo(e){return"fsv_error_message"in e?e.fsv_error_message??"":""}function eu(e){if(null==e.invalid_message_code)return eo(e);switch(e.invalid_message_code){case o.GM.NONE:case o.GM.INVALID:case o.GM.CODE_EXPIRED:case o.GM.NO_QUOTA:return eo(e);case o.GM.MIN_BUCKET_NOT_MET:return ei("msg_voucher_min_bucket_not_met",{n:(0,en.fg)((e.min_spend||0)-(e.current_spend||0),__LOCALE__)});case o.GM.NO_APPLICABLE:if(e.exclusive_channel_type===o.K7.LIVESTREAM)return ei("voucher_card_promotion_error_live_only");if(e.exclusive_channel_type===o.K7.SHORT_VIDEO)return ei("voucher_card_promotion_error_video_only");break;case o.GM.PRODUCT_CHANNEL_EXCLUSIVE_LIVE_STREAMING:return ei("voucher_card_promotion_error_live_only");case o.GM.PRODUCT_CHANNEL_EXCLUSIVE_SHORT_VIDEO:return ei("voucher_card_promotion_error_video_only");case o.GM.PRODUCT_STREAMER_SCOPE_LIVE_STREAMING:return ei("voucher_card_promotion_error_live_streamer_only");case o.GM.PRODUCT_STREAMER_SCOPE_SHORT_VIDEO:return ei("voucher_card_promotion_error_video_streamer_only")}return ei(o.O2[e.invalid_message_code||0])||eo(e)}var ea=r(1594),ec=r(4518);let e_=e=>{let t=(0,ea.useMemo)(()=>{let e=document.createElement("div");return document.body.appendChild(e),e},[]),r=(0,ea.useCallback)(()=>{(0,ec.unmountComponentAtNode)(t)&&t.parentNode&&t.parentNode.removeChild(t)},[t]);return(0,ea.useEffect)(()=>r,[r]),(0,ea.useCallback)(n=>new Promise((i,o)=>{(0,ec.render)(e({destroy:r,confirm:()=>{i(),r()},cancel:()=>{o(),r()},props:n}),t)}),[r,t,e])};function es(e){return(function(e,t=`
`){return e.split(t).map(e=>e.trim())})(e).map(e=>0===e.length?e:"- "+e)}function el(e){let{invalid_message_code:t,is_claimed_before:r}=e;return r?t?o.Cc.CLAIMED_INVALID:o.Cc.CLAIMED_VALID:o.Cc.UNCLAIMED}function ed(e,t){let r,n=e?.value_in_secs||0;switch(e?.type){case o.bn.MINUTES:n=Math.floor(n/60),r="minutes";break;case o.bn.HOURS:n=Math.floor(n/3600),r="hours";break;case o.bn.DAYS:n=Math.floor(n/86400),r="days";break;default:n=t||0,r="days"}return{duration:n,durationType:r}}function em(e,t,{shortFormat:r,isUserOwned:n,useNewTimeVersion:o}){let{claim_start_time:u,start_time:a}=e,c=!!u&&Date.now()/1e3<u,_=c&&!n?u:a;if("number"!=typeof _)return"";let s=c&&!n?"label_voucher_claim":"label_voucher_use",l=r?i.UB:i.ON;return A(_)?t(`${s}_in`,{time:o?(0,i.ZE)({timestampInSecond:_,opt:{roundUpDay:!0},unitLowerBounds:{day:1+1/86400,hour:1+1/3600},timeBetweenMin:1,totalUnits:1,endUnit:"minute"}):(0,i.ZE)({timestampInSecond:_,unitLowerBounds:{day:1+1/86400,hour:1+1/3600},totalUnits:1})}):t(`${s}_from`,{date:l(_)})}function eh(e,t){return!e&&t}function ef(e,t){let r=null!=t&&t!==o.GM.NONE&&t!==o.GM.INVALID&&t!==o.GM.CODE_EXPIRED&&t!==o.GM.NO_QUOTA;return e&&r}function ep(e){let t={...e,activityId:`${e.activityId||""}`};return Object.keys(t).forEach(e=>{t[e]=encodeURIComponent(btoa(JSON.stringify(t[e]||"")))}),t}let ey=(e,t)=>(0,u.formatCurrency)(t,(0,u.deflateServerNumber)(e,t)),eE=(e,t)=>(0,u.formatCurrency)(t,e,{symbol:"",precision:0})},7383:(e,t,r)=>{r.d(t,{ZE:()=>h,ON:()=>l,UB:()=>p,Hy:()=>s,k_:()=>d,xW:()=>y});var n=r(7013),i=r(574),o=r(6983);let u=r.microfeI(5),{formatTime:a,formatDuration:c}=(0,u.getBoundUtils)((0,n.JK)(),(0,n.mf)()),_=e=>o.s3.includes(e)?"dd/MM/yyyy":"TW"===e?"yyyy.MM.dd":"dd.MM.yyyy",s=e=>a(1e3*e,_((0,n.JK)())),l=e=>a(1e3*e,_((0,n.JK)()));async function d(e,t,r){await i.I18n.fetchTranslationCollection(t);let n=r?.roundUpDay?h({timestampInSecond:e,opt:{...r},unitLowerBounds:{day:1+1/86400,hour:1+1/3600},timeBetweenMin:1,totalUnits:1,endUnit:"minute"}):m(e,r);return r&&r.noLeft?n||i.I18n.t("label_1_minute"):n?i.I18n.t("label_time_left",{time:n}):i.I18n.t("label_1_minute_left")}let m=(e,t={})=>{let r=new Date(1e3*e),i=new Date,{formatDuration:o}=(0,u.getBoundUtils)((0,n.JK)(),(0,n.mf)());return(0,u.timeBetween)("minute",r)>1?o(r,i,{unitLowerBounds:{day:1},totalUnits:1,roundLast:e=>"day"===e&&t.roundUpDay?"ceil":"floor"}):null},h=({timestampInSecond:e,opt:t={},unitLowerBounds:r,timeBetweenMin:n=1,totalUnits:o,endUnit:a})=>{let _=new Date(1e3*e),s=new Date;return(0,u.timeBetween)("minute",_)>n?c(_,s,{unitLowerBounds:r,endUnit:a,totalUnits:o,roundLast:e=>"day"===e&&t.roundUpDay||"minute"===e&&t.roundUpMinute?"ceil":"floor"}):i.I18n.t("label_1_minute")},f=e=>({month:"short",day:"short",...["MX","ES","FR","CO","CL"].some(t=>e.useLocale.toLocaleUpperCase().includes(t))?{dateLiteral:"/",month:"2-digit",day:"2-digit"}:({"zh-TW":{dateLiteral:".",month:"numeric",day:"numeric"},"vn-VN":{dateLiteral:".",month:"2-digit",day:"2-digit"},"pt-BR":{dateLiteral:".",month:"2-digit",day:"2-digit"}})[e.useLocale]}),p=e=>a(1e3*e,f),y=e=>{let t="dd MMM yyyy hh:mm";return"TW"===(0,n.JK)()&&(t="en"===(0,n.mf)()?"yyyy MMM dd hh:mm":"yyyyyMMMMdddd hh:mm"),a(1e3*e,t)}}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/mobilemall-voucher/_/504.966b3555cdec84a8c878.2023.js.map