"use strict";(self.webpackChunk_shopee_voucher_rw=self.webpackChunk_shopee_voucher_rw||[]).push([[504],{2527:(e,r,t)=>{t.d(r,{A1:()=>h,BH:()=>E,D$:()=>v,HL:()=>l,Hw:()=>p,bB:()=>d,cp:()=>f,fg:()=>O,iX:()=>I,vW:()=>y});var n=t(9469),i=t(7013),o=t(8946),u=(0,o.getUtilsByCountry)((0,i.JK)(),i.mf?(0,i.mf)():void 0),a=u.localizeCompactNumber,c=u.compactCurrency,_=u.formatServerCurrency,s=u.compactServerCurrency;function l(e,r){return isFinite(r=parseFloat(String(r||0)))?"zh-Hant"===(0,i.mf)()?Math.round(100-r)/10:Math.round(r):r}function d(e,r){return(void 0===r&&(r=!0),isFinite(e=parseFloat(String(e||0))/1e5))?"zh-Hant"===(0,i.mf)()&&r?parseFloat(((100-e)/10).toFixed(3)):parseFloat(e.toFixed(2)):e}var m=function(e,r){switch(r){case"TH":case"TW":return(0,o.formatCurrency)(r,(0,o.deflateServerNumber)(e,r));case"VN":return c((0,o.deflateServerNumber)(e,r),3);default:return c((0,o.deflateServerNumber)(e,r),2)}};function f(e,r,t){void 0===t&&(t=!1);var i=t?{symbol:""}:void 0;switch(r){case"TW":return(0,o.formatCurrency)(r,(0,o.deflateServerNumber)(e,r),i);case"VN":return c((0,o.deflateServerNumber)(e,r),(0,n._)({maxPrecision:3},i));default:return c((0,o.deflateServerNumber)(e,r),i)}}function h(e,r){return m(e,r)}function v(e,r){return m(e,r)}function p(e,r){switch(r){case"ID":return a(e);case"VN":return c(e,{symbol:"",maxPrecision:3});default:return c(e,{symbol:"",precision:0},[])}}function y(e,r){return l(r,e)}var E=function(e,r){return"TW"===r?(0,o.formatCurrency)(r,e,{symbol:""}):c(e,{symbol:"",maxPrecision:3})},I=function(e,r){return"TW"===r?_(e,{precision:!1}):s(e,{maxPrecision:3})},O=function(e,r){return c((0,o.deflateServerNumber)(e,r),{maxPrecision:3})}},5504:(e,r,t)=>{t.d(r,{j0:()=>ei,jt:()=>o,Is:()=>ey,J8:()=>eI,_J:()=>eE,SH:()=>ed,jz:()=>Z,wH:()=>em,iN:()=>eh,v:()=>ef,N$:()=>ec,qE:()=>et,Vp:()=>en,l:()=>ep,Vr:()=>v,Qm:()=>d,M8:()=>I,Zq:()=>J,_j:()=>h,Oz:()=>p,CQ:()=>M,bS:()=>H,AV:()=>F,U2:()=>P,am:()=>w,ni:()=>K,u4:()=>G,or:()=>ev,OJ:()=>el});var n,i,o={};t.r(o),t.d(o,{isAirpayVoucher:()=>v,isAvailableFreeShippingVoucher:()=>E,isBeforeClaimStartTime:()=>k,isCashLoanVoucher:()=>N,isCoinCashbackVoucher:()=>d,isDigitalPurchaseVoucher:()=>I,isDiscountVoucher:()=>s,isFreeShippingVoucher:()=>l,isMultiRewardVoucher:()=>J,isNormalVoucher:()=>C,isOfflineVoucher:()=>h,isPublicVoucher:()=>O,isPublisherOfflinePaymentVoucher:()=>p,isShoppingMallOPV:()=>m,isSingleShopVoucher:()=>M,isThirdPartyNowVoucher:()=>S,isUpcomingVoucher:()=>H,isUserWalletPartnerVoucher:()=>D,isVoucherClaimEndTimeOver:()=>B,isVoucherClaimInvalidError:()=>F,isVoucherComing:()=>P,isVoucherEndingSoon:()=>T,isVoucherEndingSoonWithTime:()=>w,isVoucherExpired:()=>f,isVoucherInapplicable:()=>K,isVoucherInvalid:()=>G,isVoucherNew:()=>U,isVoucherNotClaimable:()=>x,isVoucherStartingSoon:()=>g,isVoucherUsedUp:()=>y,isVoucherValid:()=>V});var u=t(9469),a=t(7383),c=t(6983),_=t(8946);function s(e){return e.reward_type===c.tK.NORMAL_VOUCHER}function l(e){return e.reward_type===c.tK.FREE_SHIPPING_VOUCHER}function d(e){return e.reward_type===c.tK.COIN_CASHBACK_VOUCHER}function m(e){return!!e&&e.ui_display_type===c.$r.SHOPPING_MALL_OPV}function f(e){return"boolean"==typeof e.has_expired?e.has_expired:"number"==typeof e.end?e.end<Date.now()/1e3:!!e.end_time&&e.end_time<Date.now()/1e3}function h(e){return e.voucher_market_type===c.b1.OFFLINE_PAYMENT}function v(e){return!!(e&&e.voucher_external_market_type===c.qB.AIRPAY_OPV)}function p(e){return(h(e)||v(e))&&e.ui_display_type===c.$r.PUBLISHER_OPV}function y(e){return"number"==typeof e.left_count&&Number.isInteger(e.left_count)&&e.left_count<=0}function E(e){return!e.fsv_error_message&&e.is_applicable}function I(e){return e&&e.voucher_market_type===c.b1.DIGITAL_PURCHASE}function O(e){return e.use_type===c.hB.PUBLIC}function M(e){return!!e.shop_id}function C(e){return e.reward_type===c.tK.NORMAL_VOUCHER}function S(e){return 3===e.third_party_type}function D(e){return e.voucher_external_market_type===c.qB.PARTNER}function N(e){return(null==e?void 0:e.voucher_market_type)===c.b1.CASHLOAN_BUYER||(null==e?void 0:e.voucher_market_type)===c.b1.CASHLOAN_SELLER||(null==e?void 0:e.voucher_market_type)===c.b1.SHOPEEPAY_LATER||(null==e?void 0:e.voucher_market_type)===c.b1.SHOPEE_INSURANCE}function V(e){return!f(e)&&!e.fully_redeemed&&(!!e.is_claimed_before||!e.fully_claimed)}var b=new Date;b.setDate(b.getDate()+4);var R=new Date(b.toDateString()).getTime()/1e3,L=new Date;L.setDate(L.getDate()-3);var A=new Date(L.toDateString()).getTime()/1e3;function T(e){return!!e.end_time&&!f(e)&&e.end_time<R}function w(e){var r=new Date;return r.setDate(r.getDate()+3),!f(e)&&!!e.end_time&&e.end_time<r.getTime()/1e3}function g(e){var r=new Date;return r.setDate(r.getDate()+3),e<=r.getTime()/1e3}function U(e){return!f(e)&&!!e.start_time&&e.start_time>A}function P(e){return!!e.start_time&&e.start_time>Date.now()/1e3}function H(e){return(!!e.shop_id||e.voucher_market_type===c.b1.DEFAULT_MARKET_PLACE||e.voucher_market_type===c.b1.OFFLINE_PAYMENT)&&P(e)}function B(e){return!!e.claim_end_time&&e.claim_end_time<Date.now()/1e3}function k(e){return!!e.claim_start_time&&e.claim_start_time>Date.now()/1e3}function x(e){var r=e.fully_used,t=e.fully_claimed,n=e.disabled,i=e.has_expired,o=e.already_redeemed;return r||i||n||t&&!o||B(e)&&!o}var G=function(e){return!!e&&c.zT.includes(e)&&e!==c.GM.ALREADY_USED},K=function(e){return!!e&&c.kO.includes(e)},F=function(e){return!!e&&e!==c.cO.CLAIM_ERROR_OK&&e!==c.cO.CLAIM_ERROR_EXIST},J=function(e){return!!(null==e?void 0:e.detail_multi_reward_info)},W=t(7660),X=t(7013),Y={ID:"co.id",SG:"sg",MY:"com.my",VN:"vn",PH:"ph",TH:"co.th",TW:"tw",BR:"com.br"}[(0,X.JK)()],z={test:"test.",uat:"uat.",live:""},Q=null!=(n=z[(0,X._$)()])?n:z.live,$={ID:"co.id",SG:"sg",MY:"com.my",VN:"vn",PH:"ph",TH:"co.th",TW:"tw",BR:"com.br"}[(0,X.JK)()],j={test:"test.",uat:"uat.",live:""},q=null!=(i=j[(0,X._$)()])?i:j.live;function Z(e,r){var t,n=(void 0===r?{fromMyVoucherPage:!1}:r).fromMyVoucherPage;if(e.exclusive_channel_type){if(e.exclusive_channel_type===c.K7.LIVESTREAM){if(void 0===t&&(t={customFromSource:"voucher_use_pc"}),e.exclusive_channel_type!==c.K7.LIVESTREAM)return;if(void 0!==Y&&void 0!==Q){var i={};return e.shop_id?(i.type="shop_session",i.id=e.shop_id):i.type="lp","https://live."+Q+"shopee."+Y+"/middle-page"+(0,W.f6)(i)+"#"+t.customFromSource}return}if(e.exclusive_channel_type===c.K7.SHORT_VIDEO){if(e.exclusive_channel_type!==c.K7.SHORT_VIDEO)return;if(void 0!==$&&void 0!==q){var o={type:"voucher",targetPage:"common-timeline",fromSource:"PC",location:void 0!==n&&n?"voucher_wallet":"cart_voucher_drawer"},u={};return e.shop_id&&(u.shopid=e.shop_id),u.promotionId=e.promotionid,o.extInfo=JSON.stringify(u),"https://sv."+q+"shopee."+$+"/landing"+(0,W.f6)(o)}return}}}var ee=t(574);ee.I18n.t;var er=ee.I18n.t,et=function(e){if(!e||e===c.cO.CLAIM_ERROR_EXIST)return"";switch(e){case c.cO.CLAIM_ERROR_NO_QUOTA:return er("is_fully_redeemed");case c.cO.CLAIM_ERROR_EXPIRED:return er("is_expired");default:return er("is_invalid")}},en=function(e){if(!e)return"";switch(e){case c.GM.NO_QUOTA:return er("is_fully_redeemed");case c.GM.CODE_EXPIRED:return er("is_expired");default:return er("is_invalid")}},ei="6";t(9066);var eo=t(2527),eu=ee.I18n.t;function ea(e){var r;return"fsv_error_message"in e&&null!=(r=e.fsv_error_message)?r:""}function ec(e){if(null==e.invalid_message_code)return ea(e);switch(e.invalid_message_code){case c.GM.NONE:case c.GM.INVALID:case c.GM.CODE_EXPIRED:case c.GM.NO_QUOTA:return ea(e);case c.GM.MIN_BUCKET_NOT_MET:return eu("msg_voucher_min_bucket_not_met",{n:(0,eo.fg)((e.min_spend||0)-(e.current_spend||0),__LOCALE__)});case c.GM.NO_APPLICABLE:if(e.exclusive_channel_type===c.K7.LIVESTREAM)return eu("voucher_card_promotion_error_live_only");if(e.exclusive_channel_type===c.K7.SHORT_VIDEO)return eu("voucher_card_promotion_error_video_only");break;case c.GM.PRODUCT_CHANNEL_EXCLUSIVE_LIVE_STREAMING:return eu("voucher_card_promotion_error_live_only");case c.GM.PRODUCT_CHANNEL_EXCLUSIVE_SHORT_VIDEO:return eu("voucher_card_promotion_error_video_only");case c.GM.PRODUCT_STREAMER_SCOPE_LIVE_STREAMING:return eu("voucher_card_promotion_error_live_streamer_only");case c.GM.PRODUCT_STREAMER_SCOPE_SHORT_VIDEO:return eu("voucher_card_promotion_error_video_streamer_only")}return eu(c.O2[e.invalid_message_code||0])||ea(e)}var e_=t(1594),es=t(4518),el=function(e){var r=(0,e_.useMemo)(function(){var e=document.createElement("div");return document.body.appendChild(e),e},[]),t=(0,e_.useCallback)(function(){(0,es.unmountComponentAtNode)(r)&&r.parentNode&&r.parentNode.removeChild(r)},[r]);return(0,e_.useEffect)(function(){return t},[t]),(0,e_.useCallback)(function(n){return new Promise(function(i,o){(0,es.render)(e({destroy:t,confirm:function(){i(),t()},cancel:function(){o(),t()},props:n}),r)})},[t,r,e])};function ed(e){var r;return(void 0===r&&(r=`
`),e.split(r).map(function(e){return e.trim()})).map(function(e){return 0===e.length?e:"- "+e})}function em(e){var r=e.invalid_message_code;return e.is_claimed_before?r?c.Cc.CLAIMED_INVALID:c.Cc.CLAIMED_VALID:c.Cc.UNCLAIMED}function ef(e,r){var t,n=(null==e?void 0:e.value_in_secs)||0;switch(null==e?void 0:e.type){case c.bn.MINUTES:n=Math.floor(n/60),t="minutes";break;case c.bn.HOURS:n=Math.floor(n/3600),t="hours";break;case c.bn.DAYS:n=Math.floor(n/86400),t="days";break;default:n=r||0,t="days"}return{duration:n,durationType:t}}function eh(e,r,t){var n=t.shortFormat,i=t.isUserOwned,o=t.useNewTimeVersion,u=e.claim_start_time,c=e.start_time,_=!!u&&Date.now()/1e3<u,s=_&&!i?u:c;if("number"!=typeof s)return"";var l=_&&!i?"label_voucher_claim":"label_voucher_use",d=n?a.UB:a.ON;return g(s)?r(""+l+"_in",{time:o?(0,a.ZE)({timestampInSecond:s,opt:{roundUpDay:!0},unitLowerBounds:{day:1+1/86400,hour:1+1/3600},timeBetweenMin:1,totalUnits:1,endUnit:"minute"}):(0,a.ZE)({timestampInSecond:s,unitLowerBounds:{day:1+1/86400,hour:1+1/3600},totalUnits:1})}):r(""+l+"_from",{date:d(s)})}function ev(e,r){return!e&&r}function ep(e,r){var t=null!=r&&r!==c.GM.NONE&&r!==c.GM.INVALID&&r!==c.GM.CODE_EXPIRED&&r!==c.GM.NO_QUOTA;return e&&t}function ey(e){var r=(0,u._)({},e,{activityId:""+(e.activityId||"")});return Object.keys(r).forEach(function(e){r[e]=encodeURIComponent(btoa(JSON.stringify(r[e]||"")))}),r}var eE=function(e,r){return(0,_.formatCurrency)(r,(0,_.deflateServerNumber)(e,r))},eI=function(e,r){return(0,_.formatCurrency)(r,e,{symbol:"",precision:0})}},7383:(e,r,t)=>{t.d(r,{ZE:()=>y,ON:()=>h,UB:()=>I,Hy:()=>f,k_:()=>v,xW:()=>O});var n=t(6048),i=t(9469),o=t(9170),u=t(7013),a=t(574),c=t(6983);let _=t.microfeI(5);var s=(0,_.getBoundUtils)((0,u.JK)(),(0,u.mf)()),l=s.formatTime,d=s.formatDuration,m=function(e){return c.s3.includes(e)?"dd/MM/yyyy":"TW"===e?"yyyy.MM.dd":"dd.MM.yyyy"},f=function(e){return l(1e3*e,m((0,u.JK)()))},h=function(e){return l(1e3*e,m((0,u.JK)()))};function v(e,r,t){return(0,n._)(function(){var n;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,a.I18n.fetchTranslationCollection(r)];case 1:if(o.sent(),n=(null==t?void 0:t.roundUpDay)?y({timestampInSecond:e,opt:(0,i._)({},t),unitLowerBounds:{day:1+1/86400,hour:1+1/3600},timeBetweenMin:1,totalUnits:1,endUnit:"minute"}):p(e,t),t&&t.noLeft)return[2,n||a.I18n.t("label_1_minute")];return[2,n?a.I18n.t("label_time_left",{time:n}):a.I18n.t("label_1_minute_left")]}})})()}var p=function(e,r){void 0===r&&(r={});var t=new Date(1e3*e),n=new Date,i=(0,_.getBoundUtils)((0,u.JK)(),(0,u.mf)()).formatDuration;return(0,_.timeBetween)("minute",t)>1?i(t,n,{unitLowerBounds:{day:1},totalUnits:1,roundLast:function(e){return"day"===e&&r.roundUpDay?"ceil":"floor"}}):null},y=function(e){var r=e.timestampInSecond,t=e.opt,n=void 0===t?{}:t,i=e.unitLowerBounds,o=e.timeBetweenMin,u=e.totalUnits,c=e.endUnit,s=new Date(1e3*r),l=new Date;return(0,_.timeBetween)("minute",s)>(void 0===o?1:o)?d(s,l,{unitLowerBounds:i,endUnit:c,totalUnits:u,roundLast:function(e){return"day"===e&&n.roundUpDay||"minute"===e&&n.roundUpMinute?"ceil":"floor"}}):a.I18n.t("label_1_minute")},E=function(e){var r=["MX","ES","FR","CO","CL"].some(function(r){return e.useLocale.toLocaleUpperCase().includes(r)})?{dateLiteral:"/",month:"2-digit",day:"2-digit"}:({"zh-TW":{dateLiteral:".",month:"numeric",day:"numeric"},"vn-VN":{dateLiteral:".",month:"2-digit",day:"2-digit"},"pt-BR":{dateLiteral:".",month:"2-digit",day:"2-digit"}})[e.useLocale];return(0,i._)({month:"short",day:"short"},r)},I=function(e){return l(1e3*e,E)},O=function(e){var r="dd MMM yyyy hh:mm";return"TW"===(0,u.JK)()&&(r="en"===(0,u.mf)()?"yyyy MMM dd hh:mm":"yyyyyMMMMdddd hh:mm"),l(1e3*e,r)}}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/mobilemall-voucher/_/504.0dbbf3e75bddd1ca58d2.2017.js.map