(globalThis.webpackChunk_shopee_voucher_rw=globalThis.webpackChunk_shopee_voucher_rw||[]).push([[204],{310:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},318:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ABCache=void 0;var n,i=(n=r(8236))&&n.__esModule?n:{default:n},o=r(1441),s=r(4707),u=r(4625),a=r(5033);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.ABCache=function(){var e;function t(e){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");h(this,"_cache",void 0),h(this,"_cacheTime",void 0),h(this,"_initConfig",void 0),h(this,"_cacheKey",""),h(this,"_mergedConfig",{}),this._initConfig=null!=e?e:{},this._cacheTime=null!=(r=null==e?void 0:e.cacheTime)?r:s.defaultConfig.cacheTime,this.setMergedConfig();var r,n=(0,o.getStorage)();this._cache=null!=n?n:{}}return e=[{key:"_debug",value:function(e){var t;null!=(t=this._initConfig)&&t.debug&&(0,u.debug)(e)}},{key:"validateCache",value:function(){var e,t={needRefresh:!0};if(this._cacheTime===s.nocache)return this._debug("设置为不使用本地缓存, 当前内容session有效"),t;var r=null==(e=this._cache)?void 0:e[this._cacheKey];if(!r||!r.resp)return this._debug("本地无对应缓存"),t;if(!r.expireTime||(0,a.isBefore)(r.expireTime,(0,a.currentDate)()))if(this._initConfig.cacheExpireRefresh)return this._debug("缓存已经失效 但是优先使用缓存结果"),t.resp=r.resp,t;else return this._debug("缓存已经失效"),t;return this._debug("缓存失效时间为".concat((0,a.formateDate)(null==r?void 0:r.expireTime))),this._debug("当前时间为".concat((0,a.formateDate)(new Date))),this._debug("从缓存中拉取信息"),t.resp=r.resp,t.needRefresh=!1,t}},{key:"getTraffic",value:function(){var e;return null!=(e=this.validateCache())?e:{}}},{key:"setTraffic",value:function(e){var t,r={resp:e,config:this._mergedConfig,expireTime:(0,a.currentDate)(this._cacheTime)};this._cache[this._cacheKey]=r,this._debug("更新内存信息"),this._debug(this._cache);var n=null!=(t=(0,o.getStorage)())?t:{};n[this._cacheKey]=r,this._debug("更新缓存信息"),this._debug(n),(0,o.setStorage)(n)}},{key:"getVersion",value:function(){var e,t,r=null==(e=this._cache)||null==(t=e[this._cacheKey])?void 0:t.resp;return this._debug("TMS获取版本信息"),this._debug(null==r?void 0:r.version),null==r?void 0:r.version}},{key:"getGroupIdByPointId",value:function(e){var t,r,n,i,o,s=null==(t=this._cache)||null==(r=t[this._cacheKey])?void 0:r.resp,u=null!=(n=null==s||null==(i=s.point_infos)||null==(o=i.find(function(t){return t.point_id===e}))?void 0:o.group_ids)?n:[];return this._debug("根据Pointid".concat(e,"获取实验分组")),this._debug(u),0===u.length&&(u=Array.from(new Set(Object.values(this._cache).reduce(function(e,t){var r,n;return e.concat(null!=(r=null==(n=t.resp)?void 0:n.point_infos)?r:[])},[]).filter(function(t){return t.point_id===e}).flatMap(function(e){return e.group_ids})))),u}},{key:"getCache",value:function(){return this._cache}},{key:"setMergedConfig",value:function(e){this._mergedConfig=l(l({},this._initConfig),null!=e?e:{}),this.setCacheKey()}},{key:"setCacheKey",value:function(){var e=this._mergedConfig;this._cacheKey=(0,i.default)(JSON.stringify({meta:{country:e.country,customid:e.customid,userid_str:e.userid,shopid_str:e.shopid,device_fingerprint:e.device_fingerprint},filter_data:e.filters,biz_name:e.bizName,scene_keys:e.sceneKeys}))}},{key:"getMergedConfig",value:function(){return this._mergedConfig}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}()},378:(e,t,r)=>{"use strict";e.exports=r(8887)},1441:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStorage=function(){try{var e=globalThis.localStorage.getItem(n.localStorageKey);if(e)return JSON.parse(e)}catch{}return null},t.setStorage=function(e){try{globalThis.localStorage.setItem(n.localStorageKey,JSON.stringify(e))}catch{}};var n=r(4707)},2337:(e,t,r)=>{"use strict";function n(e,t){return t=t||{},new Promise(function(r,n){var i=new XMLHttpRequest,o=[],s=[],u={},a=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return s},get:function(e){return u[e.toLowerCase()]},has:function(e){return e.toLowerCase()in u}}}};for(var c in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(e,t,r){o.push(t=t.toLowerCase()),s.push([t,r]),u[t]=u[t]?u[t]+","+r:r}),r(a())},i.onerror=n,i.withCredentials="include"==t.credentials,t.headers)i.setRequestHeader(c,t.headers[c]);i.send(t.body||null)})}r.r(t),r.d(t,{default:()=>n})},2455:(e,t,r)=>{"use strict";let n;r.d(t,{I:()=>m});var i=r(5283),o=r(276),s=r(1737),u=r(6551),a=r(6315);class c extends u.Q{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.currentQuery.addObserver(this),l(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return h(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return h(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){let r=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),(0,i.f8)(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();let o=this.hasListeners();o&&f(this.currentQuery,n,this.options,r)&&this.executeFetch(),this.updateResult(t),o&&(this.currentQuery!==n||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();let s=this.computeRefetchInterval();o&&(this.currentQuery!==n||this.options.enabled!==r.enabled||s!==this.currentRefetchInterval)&&this.updateRefetchInterval(s)}getOptimisticResult(e){var t,r,n;let o=this.client.getQueryCache().build(this.client,e),s=this.createResult(o,e);return t=this,r=s,(n=e).keepPreviousData||(void 0!==n.placeholderData?!r.isPlaceholderData:(0,i.f8)(t.getCurrentResult(),r))||(this.currentResult=s,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),s}getCurrentResult(){return this.currentResult}trackResult(e){let t={};return Object.keys(e).forEach(r=>{Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){let t=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,t);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return null!=e&&e.throwOnError||(t=t.catch(i.lQ)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),i.S$||this.currentResult.isStale||!(0,i.gn)(this.options.staleTime))return;let e=(0,i.j3)(this.currentResult.dataUpdatedAt,this.options.staleTime);this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},e+1)}computeRefetchInterval(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!i.S$&&!1!==this.options.enabled&&(0,i.gn)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||s.m.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){let r,n=this.currentQuery,o=this.options,s=this.currentResult,u=this.currentResultState,c=this.currentResultOptions,h=e!==n,p=h?e.state:this.currentQueryInitialState,y=h?this.currentResult:this.previousQueryResult,{state:v}=e,{dataUpdatedAt:g,error:b,errorUpdatedAt:m,fetchStatus:_,status:x}=v,w=!1,S=!1;if(t._optimisticResults){let r=this.hasListeners(),i=!r&&l(e,t),s=r&&f(e,n,t,o);(i||s)&&(_=(0,a.v_)(e.options.networkMode)?"fetching":"paused",g||(x="loading")),"isRestoring"===t._optimisticResults&&(_="idle")}if(t.keepPreviousData&&!v.dataUpdatedAt&&null!=y&&y.isSuccess&&"error"!==x)r=y.data,g=y.dataUpdatedAt,x=y.status,w=!0;else if(t.select&&void 0!==v.data)if(s&&v.data===(null==u?void 0:u.data)&&t.select===this.selectFn)r=this.selectResult;else try{this.selectFn=t.select,r=t.select(v.data),r=(0,i.pl)(null==s?void 0:s.data,r,t),this.selectResult=r,this.selectError=null}catch(e){this.selectError=e}else r=v.data;if(void 0!==t.placeholderData&&void 0===r&&"loading"===x){let e;if(null!=s&&s.isPlaceholderData&&t.placeholderData===(null==c?void 0:c.placeholderData))e=s.data;else if(e="function"==typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&void 0!==e)try{e=t.select(e),this.selectError=null}catch(e){this.selectError=e}void 0!==e&&(x="success",r=(0,i.pl)(null==s?void 0:s.data,e,t),S=!0)}this.selectError&&(b=this.selectError,r=this.selectResult,m=Date.now(),x="error");let O="fetching"===_,E="loading"===x,T="error"===x;return{status:x,fetchStatus:_,isLoading:E,isSuccess:"success"===x,isError:T,isInitialLoading:E&&O,data:r,dataUpdatedAt:g,error:b,errorUpdatedAt:m,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>p.dataUpdateCount||v.errorUpdateCount>p.errorUpdateCount,isFetching:O,isRefetching:O&&!E,isLoadingError:T&&0===v.dataUpdatedAt,isPaused:"paused"===_,isPlaceholderData:S,isPreviousData:w,isRefetchError:T&&0!==v.dataUpdatedAt,isStale:d(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){let t=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,(0,i.f8)(r,t))return;this.currentResult=r;let n={cache:!0},o=()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options,r="function"==typeof e?e():e;if("all"===r||!r&&!this.trackedProps.size)return!0;let n=new Set(null!=r?r:this.trackedProps);return this.options.useErrorBoundary&&n.add("error"),Object.keys(this.currentResult).some(e=>this.currentResult[e]!==t[e]&&n.has(e))};(null==e?void 0:e.listeners)!==!1&&o()&&(n.listeners=!0),this.notify({...n,...e})}updateQuery(){let e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;let t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){let t={};"success"===e.type?t.onSuccess=!e.manual:"error"!==e.type||(0,a.wm)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){o.j.batch(()=>{var t,r,n,i,o,s,u,a;e.onSuccess?(null==(t=(r=this.options).onSuccess)||t.call(r,this.currentResult.data),null==(n=(i=this.options).onSettled)||n.call(i,this.currentResult.data,null)):e.onError&&(null==(o=(s=this.options).onError)||o.call(s,this.currentResult.error),null==(u=(a=this.options).onSettled)||u.call(a,void 0,this.currentResult.error)),e.listeners&&this.listeners.forEach(({listener:e})=>{e(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function l(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&("error"!==e.state.status||!1!==t.retryOnMount)||e.state.dataUpdatedAt>0&&h(e,t,t.refetchOnMount)}function h(e,t,r){if(!1!==t.enabled){let n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&d(e,t)}return!1}function f(e,t,r,n){return!1!==r.enabled&&(e!==t||!1===n.enabled)&&(!r.suspense||"error"!==e.state.status)&&d(e,r)}function d(e,t){return e.isStaleByTime(t.staleTime)}var p=r(1594);let y=r(378).useSyncExternalStore,v=p.createContext((n=!1,{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}));var g=r(330);let b=p.createContext(!1);function m(e,t,r){return function(e,t){let r=(0,g.jE)({context:e.context}),n=p.useContext(b),i=p.useContext(v),s=r.defaultQueryOptions(e);s._optimisticResults=n?"isRestoring":"optimistic",s.onError&&(s.onError=o.j.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=o.j.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=o.j.batchCalls(s.onSettled)),s.suspense&&"number"!=typeof s.staleTime&&(s.staleTime=1e3),(s.suspense||s.useErrorBoundary)&&!i.isReset()&&(s.retryOnMount=!1),p.useEffect(()=>{i.clearReset()},[i]);let[u]=p.useState(()=>new t(r,s)),a=u.getOptimisticResult(s);if(y(p.useCallback(e=>{let t=n?()=>void 0:u.subscribe(o.j.batchCalls(e));return u.updateResult(),t},[u,n]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),p.useEffect(()=>{u.setOptions(s,{listeners:!1})},[s,u]),(null==s?void 0:s.suspense)&&a.isLoading&&a.isFetching&&!n)throw u.fetchOptimistic(s).then(({data:e})=>{null==s.onSuccess||s.onSuccess(e),null==s.onSettled||s.onSettled(e,null)}).catch(e=>{i.clearReset(),null==s.onError||s.onError(e),null==s.onSettled||s.onSettled(void 0,e)});if((({result:e,errorResetBoundary:t,useErrorBoundary:r,query:n})=>{var i;return e.isError&&!t.isReset()&&!e.isFetching&&(i=[e.error,n],"function"==typeof r?r(...i):!!r)})({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:u.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:u.trackResult(a)}((0,i.vh)(e,t,r),c)}b.Provider},2552:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={ABTest:!0};Object.defineProperty(t,"ABTest",{enumerable:!0,get:function(){return i.ABTest}});var i=r(6493),o=r(310);Object.keys(o).forEach(function(e){"default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})})},3479:(e,t,r)=>{e.exports=self.fetch||(self.fetch=r(2337).default||r(2337))},3627:e=>{var t,r;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e.exports=r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 0xff00ff&r.rotl(e,8)|0xff00ff00&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var i=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?r.push(t.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],n=0,i=0;n<e.length;i=++n%4)0!=i&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(n))>>>6-2*i);return r}}},4625:(e,t)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.debug=function(e){},t.flip=void 0,t.hasSetId=function(e){return!!(e.shopid||e.userid||e.customid||e.device_fingerprint)},t.isValidKey=function(e,t){return e in t},t.flip=function(e){return Object.fromEntries(Object.entries(e).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],s=!0,u=!1;try{for(i=i.call(e);!(s=(r=i.next()).done)&&(o.push(r.value),2!==o.length);s=!0);}catch(e){u=!0,n=e}finally{try{s||null==i.return||i.return()}finally{if(u)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return r(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,2)}}(e,2)||function(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(),n=t[0];return[t[1],n]}))}},4707:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.windowInjectKey=t.url2EnvMap=t.trafficAPI=t.reqHeaders=t.noneLiveEnv=t.nocache=t.localStorageKey=t.liveEnvUrl=t.env2UrlMap=t.env2AbEnv=t.defaultConfig=t.countryPostfixMap=t.byFeatureAPI=void 0;var n=r(4625);t.trafficAPI="api/v4/abtest/traffic/get_web_experiments",t.byFeatureAPI="api/v4/abtest/traffic/get_feature_by_feature_key",t.localStorageKey="__abtest__",t.windowInjectKey="__abtest__",t.nocache=0,t.liveEnvUrl="",t.defaultConfig={cacheTime:5,isInitFetch:!1};var i={live:"",liveish:"live-test",uat:"uat",test:"test",staging:"staging",stable:"test-stable"};t.env2UrlMap=i,t.noneLiveEnv=Object.values(i).filter(function(e){return""!==e}),t.url2EnvMap=(0,n.flip)(i),t.env2AbEnv={staging:"test","test-stable":"test",enableStaging:function(e){e?this.staging="staging":this.staging="test"}},t.reqHeaders={"Content-Type":"application/json"},t.countryPostfixMap={shopeepay:"shopeepay.",shopee:"shopee."}},5033:(e,t)=>{"use strict";function r(e,t){return"number"==typeof e&&(e=new Date(e)),e.setMinutes(e.getMinutes()+t),e}Object.defineProperty(t,"__esModule",{value:!0}),t.addMin=r,t.currentDate=function(e){return e?r(new Date,e).valueOf():Date.now()},t.formateDate=function(e){return"number"==typeof e&&(e=new Date(e)),e.toString()},t.isBefore=function(e,t){return void 0!==e&&("number"!=typeof e&&(e=new Date(e)),"number"!=typeof t&&(t=new Date(t)),e.valueOf()<t.valueOf())}},6493:(e,t,r)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ABTest=void 0;var i,o=r(318),s=r(4707),u=(i=r(7392))&&i.__esModule?i:{default:i},a=r(9603),c=r(4625);function l(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,void 0)}}(e)||function(){throw TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f(){f=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function a(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{a({},"")}catch{a=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var i,o=Object.create((t&&t.prototype instanceof d?t:d).prototype),s=new O(n||[]);return i="suspendedStart",o._invoke=function(t,n){if("executing"===i)throw Error("Generator is already running");if("completed"===i){if("throw"===t)throw n;return T()}for(s.method=t,s.arg=n;;){var o=s.delegate;if(o){var u=function e(t,r){var n=t.iterator[r.method];if(void 0===n){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method))return h;r.method="throw",r.arg=TypeError("The iterator does not provide a 'throw' method")}return h}var i=l(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,h;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):o:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(o,s);if(u){if(u===h)continue;return u}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===i)throw i="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);i="executing";var a=l(e,r,s);if("normal"===a.type){if(i=s.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:s.done}}"throw"===a.type&&(i="completed",s.method="throw",s.arg=a.arg)}},o}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h={};function d(){}function p(){}function y(){}var v={};a(v,o,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(E([])));b&&b!==t&&r.call(b,o)&&(v=b);var m=y.prototype=d.prototype=Object.create(v);function _(e){["next","throw","return"].forEach(function(t){a(e,t,function(e){return this._invoke(t,e)})})}function x(e,t){var i;this._invoke=function(o,s){function u(){return new t(function(i,u){!function i(o,s,u,a){var c=l(e[o],e,s);if("throw"!==c.type){var h=c.arg,f=h.value;return f&&"object"==n(f)&&r.call(f,"__await")?t.resolve(f.__await).then(function(e){i("next",e,u,a)},function(e){i("throw",e,u,a)}):t.resolve(f).then(function(e){h.value=e,u(h)},function(e){return i("throw",e,u,a)})}a(c.arg)}(o,s,i,u)})}return i=i?i.then(u,u):u()}}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function E(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=y,a(m,"constructor",y),a(y,"constructor",p),p.displayName=a(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,a(e,u,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},_(x.prototype),a(x.prototype,s,function(){return this}),e.AsyncIterator=x,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var s=new x(c(t,r,n,i),o);return e.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},_(m),a(m,u,"Generator"),a(m,o,function(){return this}),a(m,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(u&&a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!a)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function d(e,t,r,n,i,o,s){try{var u=e[o](s),a=u.value}catch(e){r(e);return}u.done?t(a):Promise.resolve(a).then(n,i)}function p(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function s(e){d(o,n,i,s,u,"next",e)}function u(e){d(o,n,i,s,u,"throw",e)}s(void 0)})}}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.ABTest=function(){var e,t,r,n,i,h,d,g,b;function m(e){var t,r,n,i;if(!(this instanceof m))throw TypeError("Cannot call a class as a function");if(v(this,"_initConfig",void 0),v(this,"_url",void 0),v(this,"_cache",void 0),!e.country)throw Error("需要配置country参数, 如SG, ID");if(!e.bizName)throw Error("需要提供当前接入的业务方, 如ci.abtest-trafficservice");this._initConfig=e,this._debug("AB Test init Params:"),this._debug(e),s.env2AbEnv.enableStaging(e.enableStaging),e.devMode&&null!=(t=globalThis.location)&&null!=(r=t.host)&&null!=(n=r.includes)&&n.call(r,"localhost:")?this._url=(0,a.getDevModeTrafficApi)(e.env):e.isWsa?this._url=(0,a.getWsaTrafficApi)():this._url=(0,a.getTrafficApi)(e.env),this._debug("Traffic Path:"),this._debug(this._url),this._cache=new o.ABCache(e),(null!=(i=e.isInitFetch)?i:s.defaultConfig.isInitFetch)&&this.getExperiments()}return g=[{key:"getExperiments",value:(e=p(f().mark(function e(t){var r,n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._debug("getExperiments"),e.next=3,this._fetchTrafficResult(t);case 3:return n=e.sent,e.abrupt("return",null!=(r=null==n?void 0:n.experiments)?r:[]);case 5:case"end":return e.stop()}},e,this)})),function(t){return e.apply(this,arguments)})},{key:"getExperiment",value:(t=p(f().mark(function e(t,r){var n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._debug("getExperiment"),e.next=3,this.getExperiments(r);case 3:return n=e.sent.find(function(e){return e.exp_name===t}),this._debug(n),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)})),function(e,r){return t.apply(this,arguments)})},{key:"getFeatures",value:(r=p(f().mark(function e(t){var r,n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._debug("getFeatures"),e.next=3,this._fetchTrafficResult(t);case 3:return n=e.sent,e.abrupt("return",null!=(r=null==n?void 0:n.feature_map)?r:[]);case 5:case"end":return e.stop()}},e,this)})),function(e){return r.apply(this,arguments)})},{key:"getFeatureByKey",value:(n=p(f().mark(function e(t,r){var n;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._debug("getFeatureByKey"),e.next=3,this.getFeatures(r);case 3:return n=e.sent.find(function(e){return e.feature_key===t}),this._debug(n),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)})},{key:"_fetchTrafficResult",value:(i=p(f().mark(function e(t){var r,n,i,o,s,u,a,c;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._debug("内部请求分流结果"),this._cache.setMergedConfig(t),!(!(o=null==(r=this._cache)?void 0:r.getMergedConfig()).sceneKeys||0===o.sceneKeys.filter(function(e){return e}).length)){e.next=6;break}return this._debug("Scene Key 为空, 没有拉取实验"),e.abrupt("return");case 6:if(s=this._cache.getTraffic(),this._debug("获取分流缓存结果"),this._debug(s),!(null!=s&&s.resp)){e.next=12;break}return null!=s&&s.needRefresh&&this.fetch(o.sceneKeys,o.country,null!=(a=o.filters)?a:[],void 0,t),e.abrupt("return",null!=(u=null==s?void 0:s.resp)?u:[]);case 12:return e.next=14,this.fetch(o.sceneKeys,o.country,null!=(n=o.filters)?n:[],void 0,t);case 14:return c=e.sent,e.abrupt("return",null==c||null==(i=c.data)?void 0:i[0]);case 16:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"_getExpReq",value:function(e){return e||(e=this._cache.getMergedConfig()),{meta:{country:e.country,customid:e.customid,userid_str:e.userid,shopid_str:e.shopid,device_fingerprint:e.device_fingerprint},filter_data:e.filters,biz_name:e.bizName,scene_keys:e.sceneKeys}}},{key:"fetchInc",value:(h=p(f().mark(function e(t,r,n,i,o){var s;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch(Array.from(new Set([].concat(l(null!=(s=this._initConfig.sceneKeys)?s:[]),l(t)))),r,n,i,o));case 1:case"end":return e.stop()}},e,this)})),function(e,t,r,n,i){return h.apply(this,arguments)})},{key:"fetch",value:(d=p(f().mark(function e(t,r,n,i,o){var a,c,l,h,d,p,y,v,g,b,m,_,x,w,S;return f().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d=null!=o?o:{},t&&(d.sceneKeys=t),r&&(d.country=r),n&&(d.filters=n),this._debug("newOptions"),this._debug(d),this._cache.setMergedConfig(d),p=this._getExpReq(),this._debug("Fetch Exp Req Body"),this._debug(p),!(i&&"function"==typeof i)){e.next=18;break}return e.next=13,i(this._url,p);case 13:if(!(null!=(y=h=e.sent)&&y.error||null!=(v=h)&&v.error_msg)){e.next=16;break}throw Error("error: ".concat(null==(g=h)?void 0:g.error,", error msg: ").concat(null==(b=h)?void 0:b.error_msg));case 16:e.next=29;break;case 18:return e.next=20,(0,u.default)(this._url,{method:"POST",headers:s.reqHeaders,body:JSON.stringify(p),credentials:"include"});case 20:if(null!=(m=h=e.sent)&&m.ok){e.next=23;break}throw Error("网络异常, Status: ".concat(h.status,":").concat(h.statusText,", Text: ").concat(h.text));case 23:return e.next=25,h.json();case 25:if(!(null!=(_=h=e.sent)&&_.error||null!=(x=h)&&x.error_msg)){e.next=28;break}throw Error("error: ".concat(null==(w=h)?void 0:w.error,", error msg: ").concat(null==(S=h)?void 0:S.error_msg));case 28:h&&h.data&&0!==h.data.length||this._debug("对应的场景没有web实验, 您可以去站点上创建并开启实验");case 29:return this._debug("请求成功"),this._debug("分流信息: "),this._debug(null==(a=h)?void 0:a.data[0]),this._cache.setTraffic(null==(c=h)||null==(l=c.data)?void 0:l[0]),this._debug("Resp Body"),this._debug(h),e.abrupt("return",h);case 36:case"end":return e.stop()}},e,this)})),function(e,t,r,n,i){return d.apply(this,arguments)})},{key:"_debug",value:function(e){this._initConfig.debug&&(0,c.debug)(e)}},{key:"getVersion",value:function(){return this._cache.getVersion()}},{key:"getGroupIdByPointId",value:function(e){return this._cache.getGroupIdByPointId(e)}},{key:"getCache",value:function(){return this._cache.getCache()}}],b=[{key:"init",value:function(e){e.filters||(e.filters=[]);var t=new m(e);return globalThis[s.windowInjectKey]=t,t}}],g&&y(m.prototype,g),b&&y(m,b),Object.defineProperty(m,"prototype",{writable:!1}),m}()},7392:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=((n=r(3479))&&n.__esModule?n:{default:n}).default},8155:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},8236:(e,t,r)=>{var n,i,o,s,u;n=r(3627),i=r(8155).utf8,o=r(9677),s=r(8155).bin,(u=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),a=8*e.length,c=0x67452301,l=-0x10325477,h=-0x67452302,f=0x10325476,d=0;d<r.length;d++)r[d]=(r[d]<<8|r[d]>>>24)&0xff00ff|(r[d]<<24|r[d]>>>8)&0xff00ff00;r[a>>>5]|=128<<a%32,r[(a+64>>>9<<4)+14]=a;for(var p=u._ff,y=u._gg,v=u._hh,g=u._ii,d=0;d<r.length;d+=16){var b=c,m=l,_=h,x=f;c=p(c,l,h,f,r[d+0],7,-0x28955b88),f=p(f,c,l,h,r[d+1],12,-0x173848aa),h=p(h,f,c,l,r[d+2],17,0x242070db),l=p(l,h,f,c,r[d+3],22,-0x3e423112),c=p(c,l,h,f,r[d+4],7,-0xa83f051),f=p(f,c,l,h,r[d+5],12,0x4787c62a),h=p(h,f,c,l,r[d+6],17,-0x57cfb9ed),l=p(l,h,f,c,r[d+7],22,-0x2b96aff),c=p(c,l,h,f,r[d+8],7,0x698098d8),f=p(f,c,l,h,r[d+9],12,-0x74bb0851),h=p(h,f,c,l,r[d+10],17,-42063),l=p(l,h,f,c,r[d+11],22,-0x76a32842),c=p(c,l,h,f,r[d+12],7,0x6b901122),f=p(f,c,l,h,r[d+13],12,-0x2678e6d),h=p(h,f,c,l,r[d+14],17,-0x5986bc72),l=p(l,h,f,c,r[d+15],22,0x49b40821),c=y(c,l,h,f,r[d+1],5,-0x9e1da9e),f=y(f,c,l,h,r[d+6],9,-0x3fbf4cc0),h=y(h,f,c,l,r[d+11],14,0x265e5a51),l=y(l,h,f,c,r[d+0],20,-0x16493856),c=y(c,l,h,f,r[d+5],5,-0x29d0efa3),f=y(f,c,l,h,r[d+10],9,0x2441453),h=y(h,f,c,l,r[d+15],14,-0x275e197f),l=y(l,h,f,c,r[d+4],20,-0x182c0438),c=y(c,l,h,f,r[d+9],5,0x21e1cde6),f=y(f,c,l,h,r[d+14],9,-0x3cc8f82a),h=y(h,f,c,l,r[d+3],14,-0xb2af279),l=y(l,h,f,c,r[d+8],20,0x455a14ed),c=y(c,l,h,f,r[d+13],5,-0x561c16fb),f=y(f,c,l,h,r[d+2],9,-0x3105c08),h=y(h,f,c,l,r[d+7],14,0x676f02d9),l=y(l,h,f,c,r[d+12],20,-0x72d5b376),c=v(c,l,h,f,r[d+5],4,-378558),f=v(f,c,l,h,r[d+8],11,-0x788e097f),h=v(h,f,c,l,r[d+11],16,0x6d9d6122),l=v(l,h,f,c,r[d+14],23,-0x21ac7f4),c=v(c,l,h,f,r[d+1],4,-0x5b4115bc),f=v(f,c,l,h,r[d+4],11,0x4bdecfa9),h=v(h,f,c,l,r[d+7],16,-0x944b4a0),l=v(l,h,f,c,r[d+10],23,-0x41404390),c=v(c,l,h,f,r[d+13],4,0x289b7ec6),f=v(f,c,l,h,r[d+0],11,-0x155ed806),h=v(h,f,c,l,r[d+3],16,-0x2b10cf7b),l=v(l,h,f,c,r[d+6],23,0x4881d05),c=v(c,l,h,f,r[d+9],4,-0x262b2fc7),f=v(f,c,l,h,r[d+12],11,-0x1924661b),h=v(h,f,c,l,r[d+15],16,0x1fa27cf8),l=v(l,h,f,c,r[d+2],23,-0x3b53a99b),c=g(c,l,h,f,r[d+0],6,-0xbd6ddbc),f=g(f,c,l,h,r[d+7],10,0x432aff97),h=g(h,f,c,l,r[d+14],15,-0x546bdc59),l=g(l,h,f,c,r[d+5],21,-0x36c5fc7),c=g(c,l,h,f,r[d+12],6,0x655b59c3),f=g(f,c,l,h,r[d+3],10,-0x70f3336e),h=g(h,f,c,l,r[d+10],15,-1051523),l=g(l,h,f,c,r[d+1],21,-0x7a7ba22f),c=g(c,l,h,f,r[d+8],6,0x6fa87e4f),f=g(f,c,l,h,r[d+15],10,-0x1d31920),h=g(h,f,c,l,r[d+6],15,-0x5cfebcec),l=g(l,h,f,c,r[d+13],21,0x4e0811a1),c=g(c,l,h,f,r[d+4],6,-0x8ac817e),f=g(f,c,l,h,r[d+11],10,-0x42c50dcb),h=g(h,f,c,l,r[d+2],15,0x2ad7d2bb),l=g(l,h,f,c,r[d+9],21,-0x14792c6f),c=c+b>>>0,l=l+m>>>0,h=h+_>>>0,f=f+x>>>0}return n.endian([c,l,h,f])})._ff=function(e,t,r,n,i,o,s){var u=e+(t&r|~t&n)+(i>>>0)+s;return(u<<o|u>>>32-o)+t},u._gg=function(e,t,r,n,i,o,s){var u=e+(t&n|r&~n)+(i>>>0)+s;return(u<<o|u>>>32-o)+t},u._hh=function(e,t,r,n,i,o,s){var u=e+(t^r^n)+(i>>>0)+s;return(u<<o|u>>>32-o)+t},u._ii=function(e,t,r,n,i,o,s){var u=e+(r^(t|~n))+(i>>>0)+s;return(u<<o|u>>>32-o)+t},u._blocksize=16,u._digestsize=16,e.exports=function(e,t){if(null==e)throw Error("Illegal argument "+e);var r=n.wordsToBytes(u(e,t));return t&&t.asBytes?r:t&&t.asString?s.bytesToString(r):n.bytesToHex(r)}},8887:(e,t,r)=>{"use strict";var n=r(1594),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,s=n.useEffect,u=n.useLayoutEffect,a=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch{return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),i=n[0].inst,l=n[1];return u(function(){i.value=r,i.getSnapshot=t,c(i)&&l({inst:i})},[e,r,t]),s(function(){return c(i)&&l({inst:i}),e(function(){c(i)&&l({inst:i})})},[e]),a(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},9603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDevModeTrafficApi=function(e){return"//abtest-api.dataplt.".concat(null!=e?e:"test",".shopee.io/").concat(n.trafficAPI)},t.getTrafficApi=function(e){var t,r,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(null==globalThis||null==(t=globalThis.location)?void 0:t.hostname)||"";e?(r=n.env2UrlMap[e],(0,i.isValidKey)(r,n.env2AbEnv)&&(r=n.env2AbEnv[r])):r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null==globalThis||null==(t=globalThis.location)?void 0:t.hostname;if(!e||null!=e&&e.includes("localhost"))return"test";var t,r,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,u=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){a=!0,o=e},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw o}}}}(n.noneLiveEnv);try{for(i.s();!(r=i.n()).done;){var o=r.value,u=e.lastIndexOf("".concat(o,"."));if(0===u||"."===e[u-1]){if("staging"===o||"test-stable"===o)return n.env2AbEnv[o];return o}}}catch(e){i.e(e)}finally{i.f()}return n.liveEnvUrl}(u);var a="";r!==n.liveEnvUrl&&(a=".");for(var c="",l=0,h=Object.entries(n.countryPostfixMap);l<h.length;l++){var f=o(h[l],2),d=f[0],p=f[1];if(u.includes(d)){c=o(u.split(p),2)[1];break}}return"io"!==c&&c||(c="sg"),"//".concat(r).concat(a,"shopee.").concat(c,"/").concat(n.trafficAPI)},t.getWsaTrafficApi=function(){return"/".concat(n.trafficAPI)};var n=r(4707),i=r(4625);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],s=!0,u=!1;try{for(i=i.call(e);!(s=(r=i.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(e){u=!0,n=e}finally{try{s||null==i.return||i.return()}finally{if(u)throw n}}return o}}(e,t)||s(e,t)||function(){throw TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}},9677:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){var r;return null!=e&&(t(e)||"function"==typeof(r=e).readFloatLE&&"function"==typeof r.slice&&t(r.slice(0,0))||!!e._isBuffer)}}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/mobilemall-voucher/_/204.4a6109685cb5f39cb199.2023.js.map