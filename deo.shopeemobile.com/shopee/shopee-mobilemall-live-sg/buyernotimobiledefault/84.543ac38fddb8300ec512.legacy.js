(self.webpackChunk_shopee_buyer_noti_mobile_default=self.webpackChunk_shopee_buyer_noti_mobile_default||[]).push([[84],{4393:function(t,e,n){"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ABTest=void 0;var i,o=n(5714),u=n(2546),s=(i=n(6047))&&i.__esModule?i:{default:i},a=n(4937),c=n(9919);function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(){h=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function a(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(C){a=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),u=new x(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var u=n.delegate;if(u){var s=S(u,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var a=l(t,e,n);if("normal"===a.type){if(r=n.done?"completed":"suspendedYield",a.arg===f)continue;return{value:a.arg,done:n.done}}"throw"===a.type&&(r="completed",n.method="throw",n.arg=a.arg)}}}(t,n,u),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=c;var f={};function d(){}function v(){}function p(){}var y={};a(y,o,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(R([])));b&&b!==e&&n.call(b,o)&&(y=b);var m=p.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(o,u,s,a){var c=l(t[o],t,u);if("throw"!==c.type){var f=c.arg,h=f.value;return h&&"object"==r(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):e.resolve(h).then((function(t){f.value=t,s(f)}),(function(t){return i("throw",t,s,a)}))}a(c.arg)}var o;this._invoke=function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}}function S(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function R(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return v.prototype=p,a(m,"constructor",p),a(p,"constructor",v),v.displayName=a(p,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,s,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(w.prototype),a(w.prototype,u,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var u=new w(c(e,n,r,i),o);return t.isGeneratorFunction(n)?u:u.next().then((function(t){return t.done?t.value:u.next()}))},_(m),a(m,s,"Generator"),a(m,o,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=R,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return u.type="throw",u.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),a=n.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var u=o?o.completion:{};return u.type=t,u.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:R(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function d(t,e,n,r,i,o,u){try{var s=t[o](u),a=s.value}catch(c){return void n(c)}s.done?e(a):Promise.resolve(a).then(r,i)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function u(t){d(o,r,i,u,s,"next",t)}function s(t){d(o,r,i,u,s,"throw",t)}u(void 0)}))}}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=function(){function t(e){var n,r,i,s;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"_initConfig",void 0),y(this,"_url",void 0),y(this,"_cache",void 0),!e.country)throw Error("需要配置country参数, 如SG, ID");if(!e.bizName)throw Error("需要提供当前接入的业务方, 如ci.abtest-trafficservice");this._initConfig=e,this._debug("AB Test init Params:"),this._debug(e),u.env2AbEnv.enableStaging(e.enableStaging),e.devMode&&null!==(n=globalThis.location)&&void 0!==n&&null!==(r=n.host)&&void 0!==r&&null!==(i=r.includes)&&void 0!==i&&i.call(r,"localhost:")?this._url=(0,a.getDevModeTrafficApi)(e.env):e.isWsa?this._url=(0,a.getWsaTrafficApi)():this._url=(0,a.getTrafficApi)(e.env),this._debug("Traffic Path:"),this._debug(this._url),this._cache=new o.ABCache(e),(null!==(s=e.isInitFetch)&&void 0!==s?s:u.defaultConfig.isInitFetch)&&this.getExperiments()}var e,n,r,i,f,d,g,b,m,_;return e=t,n=[{key:"getExperiments",value:(_=v(h().mark((function t(e){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getExperiments"),t.next=3,this._fetchTrafficResult(e);case 3:return r=t.sent,t.abrupt("return",null!==(n=null==r?void 0:r.experiments)&&void 0!==n?n:[]);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return _.apply(this,arguments)})},{key:"getExperiment",value:(m=v(h().mark((function t(e,n){var r,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getExperiment"),t.next=3,this.getExperiments(n);case 3:return r=t.sent,i=r.find((function(t){return t.exp_name===e})),this._debug(i),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return m.apply(this,arguments)})},{key:"getFeatures",value:(b=v(h().mark((function t(e){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getFeatures"),t.next=3,this._fetchTrafficResult(e);case 3:return r=t.sent,t.abrupt("return",null!==(n=null==r?void 0:r.feature_map)&&void 0!==n?n:[]);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)})},{key:"getFeatureByKey",value:(g=v(h().mark((function t(e,n){var r,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getFeatureByKey"),t.next=3,this.getFeatures(n);case 3:return r=t.sent,i=r.find((function(t){return t.feature_key===e})),this._debug(i),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return g.apply(this,arguments)})},{key:"_fetchTrafficResult",value:(d=v(h().mark((function t(e){var n,r,i,o,u,s,a,c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._debug("内部请求分流结果"),this._cache.setMergedConfig(e),(o=null===(n=this._cache)||void 0===n?void 0:n.getMergedConfig()).sceneKeys&&0!==o.sceneKeys.filter((function(t){return t})).length){t.next=6;break}return this._debug("Scene Key 为空, 没有拉取实验"),t.abrupt("return");case 6:if(u=this._cache.getTraffic(),this._debug("获取分流缓存结果"),this._debug(u),null==u||!u.resp){t.next=12;break}return null!=u&&u.needRefresh&&this.fetch(o.sceneKeys,o.country,null!==(a=o.filters)&&void 0!==a?a:[],void 0,e),t.abrupt("return",null!==(s=null==u?void 0:u.resp)&&void 0!==s?s:[]);case 12:return t.next=14,this.fetch(o.sceneKeys,o.country,null!==(r=o.filters)&&void 0!==r?r:[],void 0,e);case 14:return c=t.sent,t.abrupt("return",null==c||null===(i=c.data)||void 0===i?void 0:i[0]);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"_getExpReq",value:function(t){return t||(t=this._cache.getMergedConfig()),{meta:{country:t.country,customid:t.customid,userid_str:t.userid,shopid_str:t.shopid,device_fingerprint:t.device_fingerprint},filter_data:t.filters,biz_name:t.bizName,scene_keys:t.sceneKeys}}},{key:"fetchInc",value:(f=v(h().mark((function t(e,n,r,i,o){var u;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fetch(Array.from(new Set([].concat(l(null!==(u=this._initConfig.sceneKeys)&&void 0!==u?u:[]),l(e)))),n,r,i,o));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r,i){return f.apply(this,arguments)})},{key:"fetch",value:(i=v(h().mark((function t(e,n,r,i,o){var a,c,l,f,d,v,p,y,g,b,m,_,w,S,O;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d=null!=o?o:{},e&&(d.sceneKeys=e),n&&(d.country=n),r&&(d.filters=r),this._debug("newOptions"),this._debug(d),this._cache.setMergedConfig(d),v=this._getExpReq(),this._debug("Fetch Exp Req Body"),this._debug(v),!i||"function"!=typeof i){t.next=18;break}return t.next=13,i(this._url,v);case 13:if(f=t.sent,!(null!==(p=f)&&void 0!==p&&p.error||null!==(y=f)&&void 0!==y&&y.error_msg)){t.next=16;break}throw Error("error: ".concat(null===(g=f)||void 0===g?void 0:g.error,", error msg: ").concat(null===(b=f)||void 0===b?void 0:b.error_msg));case 16:t.next=29;break;case 18:return t.next=20,(0,s.default)(this._url,{method:"POST",headers:u.reqHeaders,body:JSON.stringify(v),credentials:"include"});case 20:if(f=t.sent,null!==(m=f)&&void 0!==m&&m.ok){t.next=23;break}throw Error("网络异常, Status: ".concat(f.status,":").concat(f.statusText,", Text: ").concat(f.text));case 23:return t.next=25,f.json();case 25:if(f=t.sent,!(null!==(_=f)&&void 0!==_&&_.error||null!==(w=f)&&void 0!==w&&w.error_msg)){t.next=28;break}throw Error("error: ".concat(null===(S=f)||void 0===S?void 0:S.error,", error msg: ").concat(null===(O=f)||void 0===O?void 0:O.error_msg));case 28:f&&f.data&&0!==f.data.length||this._debug("对应的场景没有web实验, 您可以去站点上创建并开启实验");case 29:return this._debug("请求成功"),this._debug("分流信息: "),this._debug(null===(a=f)||void 0===a?void 0:a.data[0]),this._cache.setTraffic(null===(c=f)||void 0===c||null===(l=c.data)||void 0===l?void 0:l[0]),this._debug("Resp Body"),this._debug(f),t.abrupt("return",f);case 36:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r,o){return i.apply(this,arguments)})},{key:"_debug",value:function(t){this._initConfig.debug&&(0,c.debug)(t)}},{key:"getVersion",value:function(){return this._cache.getVersion()}},{key:"getGroupIdByPointId",value:function(t){return this._cache.getGroupIdByPointId(t)}},{key:"getCache",value:function(){return this._cache.getCache()}}],r=[{key:"init",value:function(e){e.filters||(e.filters=[]);var n=new t(e);return globalThis[u.windowInjectKey]=n,n}}],n&&p(e.prototype,n),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.ABTest=g},5714:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ABCache=void 0;var r,i=(r=n(9039))&&r.__esModule?r:{default:r},o=n(2923),u=n(2546),s=n(9919),a=n(5998);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"_cache",void 0),h(this,"_cacheTime",void 0),h(this,"_initConfig",void 0),h(this,"_cacheKey",""),h(this,"_mergedConfig",{}),this._initConfig=null!=e?e:{},this._cacheTime=null!==(n=null==e?void 0:e.cacheTime)&&void 0!==n?n:u.defaultConfig.cacheTime,this.setMergedConfig();var r=(0,o.getStorage)();this._cache=null!=r?r:{}}var e,n;return e=t,(n=[{key:"_debug",value:function(t){var e;null!==(e=this._initConfig)&&void 0!==e&&e.debug&&(0,s.debug)(t)}},{key:"validateCache",value:function(){var t,e={needRefresh:!0};if(this._cacheTime===u.nocache)return this._debug("设置为不使用本地缓存, 当前内容session有效"),e;var n=null===(t=this._cache)||void 0===t?void 0:t[this._cacheKey];return n&&n.resp?!n.expireTime||(0,a.isBefore)(n.expireTime,(0,a.currentDate)())?this._initConfig.cacheExpireRefresh?(this._debug("缓存已经失效 但是优先使用缓存结果"),e.resp=n.resp,e):(this._debug("缓存已经失效"),e):(this._debug("缓存失效时间为".concat((0,a.formateDate)(null==n?void 0:n.expireTime))),this._debug("当前时间为".concat((0,a.formateDate)(new Date))),this._debug("从缓存中拉取信息"),e.resp=n.resp,e.needRefresh=!1,e):(this._debug("本地无对应缓存"),e)}},{key:"getTraffic",value:function(){var t;return null!==(t=this.validateCache())&&void 0!==t?t:{}}},{key:"setTraffic",value:function(t){var e,n={resp:t,config:this._mergedConfig,expireTime:(0,a.currentDate)(this._cacheTime)};this._cache[this._cacheKey]=n,this._debug("更新内存信息"),this._debug(this._cache);var r=null!==(e=(0,o.getStorage)())&&void 0!==e?e:{};r[this._cacheKey]=n,this._debug("更新缓存信息"),this._debug(r),(0,o.setStorage)(r)}},{key:"getVersion",value:function(){var t,e,n=null===(t=this._cache)||void 0===t||null===(e=t[this._cacheKey])||void 0===e?void 0:e.resp;return this._debug("TMS获取版本信息"),this._debug(null==n?void 0:n.version),null==n?void 0:n.version}},{key:"getGroupIdByPointId",value:function(t){var e,n,r,i,o,u=null===(e=this._cache)||void 0===e||null===(n=e[this._cacheKey])||void 0===n?void 0:n.resp,s=null!==(r=null==u||null===(i=u.point_infos)||void 0===i||null===(o=i.find((function(e){return e.point_id===t})))||void 0===o?void 0:o.group_ids)&&void 0!==r?r:[];if(this._debug("根据Pointid".concat(t,"获取实验分组")),this._debug(s),0===s.length){var a=Object.values(this._cache).reduce((function(t,e){var n,r;return t.concat(null!==(n=null===(r=e.resp)||void 0===r?void 0:r.point_infos)&&void 0!==n?n:[])}),[]).filter((function(e){return e.point_id===t})).flatMap((function(t){return t.group_ids}));s=Array.from(new Set(a))}return s}},{key:"getCache",value:function(){return this._cache}},{key:"setMergedConfig",value:function(t){this._mergedConfig=l(l({},this._initConfig),null!=t?t:{}),this.setCacheKey()}},{key:"setCacheKey",value:function(){var t=this._mergedConfig;this._cacheKey=(0,i.default)(JSON.stringify({meta:{country:t.country,customid:t.customid,userid_str:t.userid,shopid_str:t.shopid,device_fingerprint:t.device_fingerprint},filter_data:t.filters,biz_name:t.bizName,scene_keys:t.sceneKeys}))}},{key:"getMergedConfig",value:function(){return this._mergedConfig}}])&&f(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.ABCache=d},2546:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.windowInjectKey=e.url2EnvMap=e.trafficAPI=e.reqHeaders=e.noneLiveEnv=e.nocache=e.localStorageKey=e.liveEnvUrl=e.env2UrlMap=e.env2AbEnv=e.defaultConfig=e.countryPostfixMap=e.byFeatureAPI=void 0;var r=n(9919);e.trafficAPI="api/v4/abtest/traffic/get_web_experiments",e.byFeatureAPI="api/v4/abtest/traffic/get_feature_by_feature_key",e.localStorageKey="__abtest__",e.windowInjectKey="__abtest__",e.nocache=0,e.liveEnvUrl="",e.defaultConfig={cacheTime:5,isInitFetch:!1};var i={live:"",liveish:"live-test",uat:"uat",test:"test",staging:"staging",stable:"test-stable"};e.env2UrlMap=i;var o=Object.values(i).filter((function(t){return""!==t}));e.noneLiveEnv=o;var u=(0,r.flip)(i);e.url2EnvMap=u,e.env2AbEnv={staging:"test","test-stable":"test",enableStaging:function(t){this.staging=t?"staging":"test"}},e.reqHeaders={"Content-Type":"application/json"},e.countryPostfixMap={shopeepay:"shopeepay.",shopee:"shopee."}},5998:function(t,e){"use strict";function n(t,e){return"number"==typeof t&&(t=new Date(t)),t.setMinutes(t.getMinutes()+e),t}Object.defineProperty(e,"__esModule",{value:!0}),e.addMin=n,e.currentDate=function(t){return t?n(new Date,t).valueOf():Date.now()},e.formateDate=function(t){return"number"==typeof t&&(t=new Date(t)),t.toString()},e.isBefore=function(t,e){return void 0!==t&&("number"!=typeof t&&(t=new Date(t)),"number"!=typeof e&&(e=new Date(e)),t.valueOf()<e.valueOf())}},6047:function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=((r=n(2400))&&r.__esModule?r:{default:r}).default;e.default=i},4937:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDevModeTrafficApi=function(t){return"//abtest-api.dataplt.".concat(null!=t?t:"test",".shopee.io/").concat(r.trafficAPI)},e.getTrafficApi=function(t){var e,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(null===globalThis||void 0===globalThis||null===(e=globalThis.location)||void 0===e?void 0:e.hostname)||"";t?(n=r.env2UrlMap[t],(0,i.isValidKey)(n,r.env2AbEnv)&&(n=r.env2AbEnv[n])):n=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===globalThis||void 0===globalThis||null===(t=globalThis.location)||void 0===t?void 0:t.hostname;if(!e||null!=e&&e.includes("localhost"))return"test";var n,i=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=u(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==e.return||e.return()}finally{if(s)throw i}}}}(r.noneLiveEnv);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=e.lastIndexOf("".concat(o,"."));if(0===s||"."===e[s-1])return"staging"===o||"test-stable"===o?r.env2AbEnv[o]:o}}catch(a){i.e(a)}finally{i.f()}return r.liveEnvUrl}(s);var a="";n!==r.liveEnvUrl&&(a=".");for(var c="",l=0,f=Object.entries(r.countryPostfixMap);l<f.length;l++){var h=o(f[l],2),d=h[0],v=h[1];if(s.includes(d)){c=o(s.split(v),2)[1];break}}return"io"!==c&&c||(c="sg"),"//".concat(n).concat(a,"shopee.").concat(c,"/").concat(r.trafficAPI)},e.getWsaTrafficApi=function(){return"/".concat(r.trafficAPI)};var r=n(2546),i=n(9919);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],u=!0,s=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(a){s=!0,i=a}finally{try{u||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},9756:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={ABTest:!0};Object.defineProperty(e,"ABTest",{enumerable:!0,get:function(){return i.ABTest}});var i=n(4393),o=n(2111);Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}))},2923:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getStorage=function(){try{var t=globalThis.localStorage.getItem(r.localStorageKey);if(t)return JSON.parse(t)}catch(e){}return null},e.setStorage=function(t){try{globalThis.localStorage.setItem(r.localStorageKey,JSON.stringify(t))}catch(e){}};var r=n(2546)},2111:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9919:function(t,e){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.debug=function(t){},e.flip=void 0,e.hasSetId=function(t){return!!(t.shopid||t.userid||t.customid||t.device_fingerprint)},e.isValidKey=function(t,e){return t in e},e.flip=function(t){return Object.fromEntries(Object.entries(t).map((function(t){var e,r,i=(r=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],u=!0,s=!1;try{for(n=n.call(t);!(u=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);u=!0);}catch(a){s=!0,i=a}finally{try{u||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,r)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0];return[i[1],o]})))}},8953:function(t){var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=e},3033:function(t){var e,n;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&n.rotl(t,8)|4278255360&n.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=n.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?n.push(e.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}},t.exports=n},3819:function(t){function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},2400:function(t,e,n){t.exports=self.fetch||(self.fetch=n(3073).default||n(3073))},9039:function(t,e,n){var r,i,o,u,s;r=n(3033),i=n(8953).utf8,o=n(3819),u=n(8953).bin,(s=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?u.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var n=r.bytesToWords(t),a=8*t.length,c=1732584193,l=-271733879,f=-1732584194,h=271733878,d=0;d<n.length;d++)n[d]=16711935&(n[d]<<8|n[d]>>>24)|4278255360&(n[d]<<24|n[d]>>>8);n[a>>>5]|=128<<a%32,n[14+(a+64>>>9<<4)]=a;var v=s._ff,p=s._gg,y=s._hh,g=s._ii;for(d=0;d<n.length;d+=16){var b=c,m=l,_=f,w=h;c=v(c,l,f,h,n[d+0],7,-680876936),h=v(h,c,l,f,n[d+1],12,-389564586),f=v(f,h,c,l,n[d+2],17,606105819),l=v(l,f,h,c,n[d+3],22,-1044525330),c=v(c,l,f,h,n[d+4],7,-176418897),h=v(h,c,l,f,n[d+5],12,1200080426),f=v(f,h,c,l,n[d+6],17,-1473231341),l=v(l,f,h,c,n[d+7],22,-45705983),c=v(c,l,f,h,n[d+8],7,1770035416),h=v(h,c,l,f,n[d+9],12,-1958414417),f=v(f,h,c,l,n[d+10],17,-42063),l=v(l,f,h,c,n[d+11],22,-1990404162),c=v(c,l,f,h,n[d+12],7,1804603682),h=v(h,c,l,f,n[d+13],12,-40341101),f=v(f,h,c,l,n[d+14],17,-1502002290),c=p(c,l=v(l,f,h,c,n[d+15],22,1236535329),f,h,n[d+1],5,-165796510),h=p(h,c,l,f,n[d+6],9,-1069501632),f=p(f,h,c,l,n[d+11],14,643717713),l=p(l,f,h,c,n[d+0],20,-373897302),c=p(c,l,f,h,n[d+5],5,-701558691),h=p(h,c,l,f,n[d+10],9,38016083),f=p(f,h,c,l,n[d+15],14,-660478335),l=p(l,f,h,c,n[d+4],20,-405537848),c=p(c,l,f,h,n[d+9],5,568446438),h=p(h,c,l,f,n[d+14],9,-1019803690),f=p(f,h,c,l,n[d+3],14,-187363961),l=p(l,f,h,c,n[d+8],20,1163531501),c=p(c,l,f,h,n[d+13],5,-1444681467),h=p(h,c,l,f,n[d+2],9,-51403784),f=p(f,h,c,l,n[d+7],14,1735328473),c=y(c,l=p(l,f,h,c,n[d+12],20,-1926607734),f,h,n[d+5],4,-378558),h=y(h,c,l,f,n[d+8],11,-2022574463),f=y(f,h,c,l,n[d+11],16,1839030562),l=y(l,f,h,c,n[d+14],23,-35309556),c=y(c,l,f,h,n[d+1],4,-1530992060),h=y(h,c,l,f,n[d+4],11,1272893353),f=y(f,h,c,l,n[d+7],16,-155497632),l=y(l,f,h,c,n[d+10],23,-1094730640),c=y(c,l,f,h,n[d+13],4,681279174),h=y(h,c,l,f,n[d+0],11,-358537222),f=y(f,h,c,l,n[d+3],16,-722521979),l=y(l,f,h,c,n[d+6],23,76029189),c=y(c,l,f,h,n[d+9],4,-640364487),h=y(h,c,l,f,n[d+12],11,-421815835),f=y(f,h,c,l,n[d+15],16,530742520),c=g(c,l=y(l,f,h,c,n[d+2],23,-995338651),f,h,n[d+0],6,-198630844),h=g(h,c,l,f,n[d+7],10,1126891415),f=g(f,h,c,l,n[d+14],15,-1416354905),l=g(l,f,h,c,n[d+5],21,-57434055),c=g(c,l,f,h,n[d+12],6,1700485571),h=g(h,c,l,f,n[d+3],10,-1894986606),f=g(f,h,c,l,n[d+10],15,-1051523),l=g(l,f,h,c,n[d+1],21,-2054922799),c=g(c,l,f,h,n[d+8],6,1873313359),h=g(h,c,l,f,n[d+15],10,-30611744),f=g(f,h,c,l,n[d+6],15,-1560198380),l=g(l,f,h,c,n[d+13],21,1309151649),c=g(c,l,f,h,n[d+4],6,-145523070),h=g(h,c,l,f,n[d+11],10,-1120210379),f=g(f,h,c,l,n[d+2],15,718787259),l=g(l,f,h,c,n[d+9],21,-343485551),c=c+b>>>0,l=l+m>>>0,f=f+_>>>0,h=h+w>>>0}return r.endian([c,l,f,h])})._ff=function(t,e,n,r,i,o,u){var s=t+(e&n|~e&r)+(i>>>0)+u;return(s<<o|s>>>32-o)+e},s._gg=function(t,e,n,r,i,o,u){var s=t+(e&r|n&~r)+(i>>>0)+u;return(s<<o|s>>>32-o)+e},s._hh=function(t,e,n,r,i,o,u){var s=t+(e^n^r)+(i>>>0)+u;return(s<<o|s>>>32-o)+e},s._ii=function(t,e,n,r,i,o,u){var s=t+(n^(e|~r))+(i>>>0)+u;return(s<<o|s>>>32-o)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(s(t,e));return e&&e.asBytes?n:e&&e.asString?u.bytesToString(n):r.bytesToHex(n)}},3073:function(t,e,n){"use strict";function r(t,e){return e=e||{},new Promise((function(n,r){var i=new XMLHttpRequest,o=[],u=[],s={},a=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return s[t.toLowerCase()]},has:function(t){return t.toLowerCase()in s}}}};for(var c in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),u.push([e,n]),s[e]=s[e]?s[e]+","+n:n})),n(a())},i.onerror=r,i.withCredentials="include"==e.credentials,e.headers)i.setRequestHeader(c,e.headers[c]);i.send(e.body||null)}))}n.r(e),n.d(e,{default:function(){return r}})},6560:function(t,e,n){"use strict";var r=n(7363),i="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},o=r.useState,u=r.useEffect,s=r.useLayoutEffect,a=r.useDebugValue;function c(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!i(t,n)}catch(r){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),r=o({inst:{value:n,getSnapshot:e}}),i=r[0].inst,l=r[1];return s((function(){i.value=n,i.getSnapshot=e,c(i)&&l({inst:i})}),[t,n,e]),u((function(){return c(i)&&l({inst:i}),t((function(){c(i)&&l({inst:i})}))}),[t]),a(n),n};e.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},8791:function(t,e,n){"use strict";t.exports=n(6560)},1312:function(t,e,n){"use strict";var r;n.d(e,{Z:function(){return l}});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}for(var u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=[],a=0;a<256;++a)s.push((a+256).toString(16).substr(1));var c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase();if(!function(t){return"string"==typeof t&&u.test(t)}(n))throw TypeError("Stringified UUID is invalid");return n},l=function(t,e,n){var r=(t=t||{}).random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return c(r)}},8542:function(t,e){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];n&&(t=u(t,o(n)))}return t}function o(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return i.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var n in t)r.call(t,n)&&t[n]&&(e=u(e,n));return e}function u(t,e){return e?t?t+" "+e:t+e:t}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},5214:function(t,e,n){"use strict";function r(t,e,n,r,i,o,u){try{var s=t[o](u),a=s.value}catch(t){return void n(t)}s.done?e(a):Promise.resolve(a).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var u=t.apply(e,n);function s(t){r(u,i,o,s,a,"next",t)}function a(t){r(u,i,o,s,a,"throw",t)}s(void 0)}))}}n.d(e,{Z:function(){return i}})},6744:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,{Z:function(){return i}})},4884:function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)}n.d(e,{Z:function(){return i}})},1986:function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}n.d(e,{Z:function(){return r}})},1630:function(t,e){"use strict";var n=Object.assign.bind();e.Z=n},3681:function(t,e,n){"use strict";n.d(e,{a:function(){return J}});var r=n(1630),i="undefined"==typeof window||"Deno"in window;function o(){}function u(t){return"number"==typeof t&&t>=0&&t!==1/0}function s(t,e){if(t===e)return t;var n=c(t)&&c(e);if(n||l(t)&&l(e)){for(var r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),o=i.length,u=n?[]:{},a=0,f=0;f<o;f++){var h=n?f:i[f];u[h]=s(t[h],e[h]),u[h]===t[h]&&a++}return r===o&&a===r?t:u}return e}function a(t,e){if(t&&!e||e&&!t)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0}function c(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function l(t){if(!f(t))return!1;var e=t.constructor;if(void 0===e)return!0;var n=e.prototype;return!!f(n)&&!!n.hasOwnProperty("isPrototypeOf")}function f(t){return"[object Object]"===Object.prototype.toString.call(t)}function h(t){new Promise((function(t){setTimeout(t,0)})).then(t)}function d(t,e,n){return null!=n.isDataEqual&&n.isDataEqual(t,e)?t:"function"==typeof n.structuralSharing?n.structuralSharing(t,e):!1!==n.structuralSharing?s(t,e):e}var v,p,y,g,b,m,_=n(1986),w=n(4884),S=(v=[],p=0,y=function(t){t()},g=function(t){t()},m=function(){var t=v;v=[],t.length&&h((function(){g((function(){t.forEach((function(t){y(t)}))}))}))},{batch:function(t){var e;p++;try{e=t()}finally{--p||m()}return e},batchCalls:function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];b((function(){t.apply(void 0,n)}))}},schedule:b=function(t){p?v.push(t):h((function(){y(t)}))},setNotifyFunction:function(t){y=t},setBatchNotifyFunction:function(t){g=t}}),O=function(){function t(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}var e=t.prototype;return e.subscribe=function(t){var e=this,n={listener:t};return this.listeners.add(n),this.onSubscribe(),function(){e.listeners.delete(n),e.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.size>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},t}(),E=new(function(t){function e(){var e;return(e=t.call(this)||this).setup=function(t){if(!i&&window.addEventListener){var e=function(){return t()};return window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1),function(){window.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e)}}},e}(0,w.Z)(e,t);var n=e.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)},n.setEventListener=function(t){var e,n=this;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((function(t){"boolean"==typeof t?n.setFocused(t):n.onFocus()}))},n.setFocused=function(t){this.focused!==t&&(this.focused=t,this.onFocus())},n.onFocus=function(){this.listeners.forEach((function(t){(0,t.listener)()}))},n.isFocused=function(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},e}(O)),x=["online","offline"],R=new(function(t){function e(){var e;return(e=t.call(this)||this).setup=function(t){if(!i&&window.addEventListener){var e=function(){return t()};return x.forEach((function(t){window.addEventListener(t,e,!1)})),function(){x.forEach((function(t){window.removeEventListener(t,e)}))}}},e}(0,w.Z)(e,t);var n=e.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)},n.setEventListener=function(t){var e,n=this;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((function(t){"boolean"==typeof t?n.setOnline(t):n.onOnline()}))},n.setOnline=function(t){this.online!==t&&(this.online=t,this.onOnline())},n.onOnline=function(){this.listeners.forEach((function(t){(0,t.listener)()}))},n.isOnline=function(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine},e}(O));var T=function(t){this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent},C=["refetchPage"],A=function(t){function e(e,n){var r;return(r=t.call(this)||this).client=e,r.options=n,r.trackedProps=new Set,r.selectError=null,r.bindMethods(),r.setOptions(n),r}(0,w.Z)(e,t);var n=e.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){1===this.listeners.size&&(this.currentQuery.addObserver(this),j(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.hasListeners()||this.destroy()},n.shouldFetchOnReconnect=function(){return I(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return I(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)},n.setOptions=function(t,e){var n=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),a(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();var i=this.hasListeners();i&&P(this.currentQuery,r,this.options,n)&&this.executeFetch(),this.updateResult(e),!i||this.currentQuery===r&&this.options.enabled===n.enabled&&this.options.staleTime===n.staleTime||this.updateStaleTimeout();var o=this.computeRefetchInterval();!i||this.currentQuery===r&&this.options.enabled===n.enabled&&o===this.currentRefetchInterval||this.updateRefetchInterval(o)},n.getOptimisticResult=function(t){var e=this.client.getQueryCache().build(this.client,t),n=this.createResult(e,t);return function(t,e,n){return!n.keepPreviousData&&(void 0!==n.placeholderData?e.isPlaceholderData:!a(t.getCurrentResult(),e))}(this,n,t)&&(this.currentResult=n,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),n},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(t){var e=this,n={};return Object.keys(t).forEach((function(r){Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:function(){return e.trackedProps.add(r),t[r]}})})),n},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(t){var e=void 0===t?{}:t,n=e.refetchPage,i=(0,_.Z)(e,C);return this.fetch((0,r.Z)({},i,{meta:{refetchPage:n}}))},n.fetchOptimistic=function(t){var e=this,n=this.client.defaultQueryOptions(t),r=this.client.getQueryCache().build(this.client,n);return r.isFetchingOptimistic=!0,r.fetch().then((function(){return e.createResult(r,n)}))},n.fetch=function(t){var e,n=this;return this.executeFetch((0,r.Z)({},t,{cancelRefetch:null==(e=t.cancelRefetch)||e})).then((function(){return n.updateResult(),n.currentResult}))},n.executeFetch=function(t){this.updateQuery();var e=this.currentQuery.fetch(this.options,t);return null!=t&&t.throwOnError||(e=e.catch(o)),e},n.updateStaleTimeout=function(){var t=this;if(this.clearStaleTimeout(),!i&&!this.currentResult.isStale&&u(this.options.staleTime)){var e,n,r=(e=this.currentResult.dataUpdatedAt,n=this.options.staleTime,Math.max(e+(n||0)-Date.now(),0)+1);this.staleTimeoutId=setTimeout((function(){t.currentResult.isStale||t.updateResult()}),r)}},n.computeRefetchInterval=function(){var t;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(t=this.options.refetchInterval)&&t},n.updateRefetchInterval=function(t){var e=this;this.clearRefetchInterval(),this.currentRefetchInterval=t,!i&&!1!==this.options.enabled&&u(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((function(){(e.options.refetchIntervalInBackground||E.isFocused())&&e.executeFetch()}),this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(t,e){var n,r,i=this.currentQuery,o=this.options,u=this.currentResult,s=this.currentResultState,a=this.currentResultOptions,c=t!==i,l=c?t.state:this.currentQueryInitialState,f=c?this.currentResult:this.previousQueryResult,h=t.state,v=h.dataUpdatedAt,p=h.error,y=h.errorUpdatedAt,g=h.fetchStatus,b=h.status,m=!1,_=!1;if(e._optimisticResults){var w=this.hasListeners(),S=!w&&j(t,e),O=w&&P(t,i,e,o);(S||O)&&(g="online"!==(null!=(r=t.options.networkMode)?r:"online")||R.isOnline()?"fetching":"paused",v||(b="loading")),"isRestoring"===e._optimisticResults&&(g="idle")}if(e.keepPreviousData&&!h.dataUpdatedAt&&null!=f&&f.isSuccess&&"error"!==b)n=f.data,v=f.dataUpdatedAt,b=f.status,m=!0;else if(e.select&&void 0!==h.data)if(u&&h.data===(null==s?void 0:s.data)&&e.select===this.selectFn)n=this.selectResult;else try{this.selectFn=e.select,n=e.select(h.data),n=d(null==u?void 0:u.data,n,e),this.selectResult=n,this.selectError=null}catch(A){this.selectError=A}else n=h.data;if(void 0!==e.placeholderData&&void 0===n&&"loading"===b){var E;if(null!=u&&u.isPlaceholderData&&e.placeholderData===(null==a?void 0:a.placeholderData))E=u.data;else if(E="function"==typeof e.placeholderData?e.placeholderData():e.placeholderData,e.select&&void 0!==E)try{E=e.select(E),this.selectError=null}catch(A){this.selectError=A}void 0!==E&&(b="success",n=d(null==u?void 0:u.data,E,e),_=!0)}this.selectError&&(p=this.selectError,n=this.selectResult,y=Date.now(),b="error");var x="fetching"===g,T="loading"===b,C="error"===b;return{status:b,fetchStatus:g,isLoading:T,isSuccess:"success"===b,isError:C,isInitialLoading:T&&x,data:n,dataUpdatedAt:v,error:p,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>l.dataUpdateCount||h.errorUpdateCount>l.errorUpdateCount,isFetching:x,isRefetching:x&&!T,isLoadingError:C&&0===h.dataUpdatedAt,isPaused:"paused"===g,isPlaceholderData:_,isPreviousData:m,isRefetchError:C&&0!==h.dataUpdatedAt,isStale:k(t,e),refetch:this.refetch,remove:this.remove}},n.updateResult=function(t){var e=this,n=this.currentResult,i=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!a(i,n)){this.currentResult=i;var o={cache:!0};!1!==(null==t?void 0:t.listeners)&&function(){if(!n)return!0;var t=e.options.notifyOnChangeProps,r="function"==typeof t?t():t;if("all"===r||!r&&!e.trackedProps.size)return!0;var i=new Set(null!=r?r:e.trackedProps);return e.options.useErrorBoundary&&i.add("error"),Object.keys(e.currentResult).some((function(t){var r=t;return e.currentResult[r]!==n[r]&&i.has(r)}))}()&&(o.listeners=!0),this.notify((0,r.Z)({},o,t))}},n.updateQuery=function(){var t=this.client.getQueryCache().build(this.client,this.options);if(t!==this.currentQuery){var e=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))}},n.onQueryUpdate=function(t){var e={};"success"===t.type?e.onSuccess=!t.manual:"error"!==t.type||t.error instanceof T||(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()},n.notify=function(t){var e=this;S.batch((function(){var n,r,i,o;if(t.onSuccess)null==(n=(r=e.options).onSuccess)||n.call(r,e.currentResult.data),null==(i=(o=e.options).onSettled)||i.call(o,e.currentResult.data,null);else if(t.onError){var u,s,a,c;null==(u=(s=e.options).onError)||u.call(s,e.currentResult.error),null==(a=(c=e.options).onSettled)||a.call(c,void 0,e.currentResult.error)}t.listeners&&e.listeners.forEach((function(t){(0,t.listener)(e.currentResult)})),t.cache&&e.client.getQueryCache().notify({query:e.currentQuery,type:"observerResultsUpdated"})}))},e}(O);function j(t,e){return function(t,e){return!(!1===e.enabled||t.state.dataUpdatedAt||"error"===t.state.status&&!1===e.retryOnMount)}(t,e)||t.state.dataUpdatedAt>0&&I(t,e,e.refetchOnMount)}function I(t,e,n){if(!1!==e.enabled){var r="function"==typeof n?n(t):n;return"always"===r||!1!==r&&k(t,e)}return!1}function P(t,e,n,r){return!1!==n.enabled&&(t!==e||!1===r.enabled)&&(!n.suspense||"error"!==t.state.status)&&k(t,n)}function k(t,e){return t.isStaleByTime(e.staleTime)}var L=n(7363),M=n(8791).useSyncExternalStore;var F,Q=L.createContext((F=!1,{clearReset:function(){F=!1},reset:function(){F=!0},isReset:function(){return F}})),U=function(){return L.useContext(Q)},B=L.createContext(void 0),D=L.createContext(!1);var K=function(t){var e=(void 0===t?{}:t).context,n=L.useContext(function(t,e){return t||(e&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=B),window.ReactQueryClientContext):B)}(e,L.useContext(D)));if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},q=L.createContext(!1),N=function(){return L.useContext(q)};q.Provider;var Z=function(t,e){(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},G=function(t){L.useEffect((function(){t.clearReset()}),[t])},V=function(t){var e,n,r=t.result,i=t.errorResetBoundary,o=t.useErrorBoundary,u=t.query;return r.isError&&!i.isReset()&&!r.isFetching&&(e=o,n=[r.error,u],"function"==typeof e?e.apply(void 0,n):!!e)},z=function(t){t.suspense&&"number"!=typeof t.staleTime&&(t.staleTime=1e3)},H=function(t,e,n){return(null==t?void 0:t.suspense)&&function(t,e){return t.isLoading&&t.isFetching&&!e}(e,n)},W=function(t,e,n){return e.fetchOptimistic(t).then((function(e){var n=e.data;null==t.onSuccess||t.onSuccess(n),null==t.onSettled||t.onSettled(n,null)})).catch((function(e){n.clearReset(),null==t.onError||t.onError(e),null==t.onSettled||t.onSettled(void 0,e)}))};function J(t,e,n){var i=function(t,e,n){return i=t,Array.isArray(i)?"function"==typeof e?(0,r.Z)({},n,{queryKey:t,queryFn:e}):(0,r.Z)({},e,{queryKey:t}):t;var i}(t,e,n);return function(t,e){var n=K({context:t.context}),r=N(),i=U(),o=n.defaultQueryOptions(t);o._optimisticResults=r?"isRestoring":"optimistic",o.onError&&(o.onError=S.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=S.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=S.batchCalls(o.onSettled)),z(o),Z(o,i),G(i);var u=L.useState((function(){return new e(n,o)}))[0],s=u.getOptimisticResult(o);if(M(L.useCallback((function(t){var e=r?function(){}:u.subscribe(S.batchCalls(t));return u.updateResult(),e}),[u,r]),(function(){return u.getCurrentResult()}),(function(){return u.getCurrentResult()})),L.useEffect((function(){u.setOptions(o,{listeners:!1})}),[o,u]),H(o,s,r))throw W(o,u,i);if(V({result:s,errorResetBoundary:i,useErrorBoundary:o.useErrorBoundary,query:u.getCurrentQuery()}))throw s.error;return o.notifyOnChangeProps?s:u.trackResult(s)}(i,A)}},4640:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=!0,i="Invariant failed";function o(t,e){if(!t){if(r)throw new Error(i);var n="function"==typeof e?e():e,o=n?"".concat(i,": ").concat(n):i;throw new Error(o)}}}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/mobilemall-buyernotimobiledefault/_/84.543ac38fddb8300ec512.legacy.js.map