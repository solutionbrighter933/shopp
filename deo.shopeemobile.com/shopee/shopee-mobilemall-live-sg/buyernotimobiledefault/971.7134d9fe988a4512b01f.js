(self.webpackChunk_shopee_buyer_noti_mobile_default=self.webpackChunk_shopee_buyer_noti_mobile_default||[]).push([[971],{4393:(t,e,r)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ABTest=void 0;var i,o=r(5714),s=r(2546),u=(i=r(6047))&&i.__esModule?i:{default:i},a=r(4937),c=r(9919);function l(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(){f=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function a(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{a({},"")}catch(C){a=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),s=new x(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return{value:void 0,done:!0}}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var u=S(s,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var a=l(t,e,r);if("normal"===a.type){if(n=r.done?"completed":"suspendedYield",a.arg===h)continue;return{value:a.arg,done:r.done}}"throw"===a.type&&(n="completed",r.method="throw",r.arg=a.arg)}}}(t,r,s),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(C){return{type:"throw",arg:C}}}t.wrap=c;var h={};function d(){}function p(){}function v(){}var y={};a(y,o,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(R([])));b&&b!==e&&r.call(b,o)&&(y=b);var m=v.prototype=d.prototype=Object.create(y);function _(t){["next","throw","return"].forEach((function(e){a(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(o,s,u,a){var c=l(t[o],t,s);if("throw"!==c.type){var h=c.arg,f=h.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,u,a)}),(function(t){i("throw",t,u,a)})):e.resolve(f).then((function(t){h.value=t,u(h)}),(function(t){return i("throw",t,u,a)}))}a(c.arg)}var o;this._invoke=function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return o=o?o.then(n,n):n()}}function S(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function R(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=v,a(m,"constructor",v),a(v,"constructor",p),p.displayName=a(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,a(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},_(w.prototype),a(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new w(c(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},_(m),a(m,u,"Generator"),a(m,o,(function(){return this})),a(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=R,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),a=r.call(o,"finallyLoc");if(u&&a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:R(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function d(t,e,r,n,i,o,s){try{var u=t[o](s),a=u.value}catch(c){return void r(c)}u.done?e(a):Promise.resolve(a).then(n,i)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){d(o,n,i,s,u,"next",t)}function u(t){d(o,n,i,s,u,"throw",t)}s(void 0)}))}}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=function(){function t(e){var r,n,i,u;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"_initConfig",void 0),y(this,"_url",void 0),y(this,"_cache",void 0),!e.country)throw Error("需要配置country参数, 如SG, ID");if(!e.bizName)throw Error("需要提供当前接入的业务方, 如ci.abtest-trafficservice");this._initConfig=e,this._debug("AB Test init Params:"),this._debug(e),s.env2AbEnv.enableStaging(e.enableStaging),e.devMode&&null!==(r=globalThis.location)&&void 0!==r&&null!==(n=r.host)&&void 0!==n&&null!==(i=n.includes)&&void 0!==i&&i.call(n,"localhost:")?this._url=(0,a.getDevModeTrafficApi)(e.env):e.isWsa?this._url=(0,a.getWsaTrafficApi)():this._url=(0,a.getTrafficApi)(e.env),this._debug("Traffic Path:"),this._debug(this._url),this._cache=new o.ABCache(e),(null!==(u=e.isInitFetch)&&void 0!==u?u:s.defaultConfig.isInitFetch)&&this.getExperiments()}var e,r,n,i,h,d,g,b,m,_;return e=t,r=[{key:"getExperiments",value:(_=p(f().mark((function t(e){var r,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getExperiments"),t.next=3,this._fetchTrafficResult(e);case 3:return n=t.sent,t.abrupt("return",null!==(r=null==n?void 0:n.experiments)&&void 0!==r?r:[]);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return _.apply(this,arguments)})},{key:"getExperiment",value:(m=p(f().mark((function t(e,r){var n,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getExperiment"),t.next=3,this.getExperiments(r);case 3:return n=t.sent,i=n.find((function(t){return t.exp_name===e})),this._debug(i),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return m.apply(this,arguments)})},{key:"getFeatures",value:(b=p(f().mark((function t(e){var r,n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getFeatures"),t.next=3,this._fetchTrafficResult(e);case 3:return n=t.sent,t.abrupt("return",null!==(r=null==n?void 0:n.feature_map)&&void 0!==r?r:[]);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)})},{key:"getFeatureByKey",value:(g=p(f().mark((function t(e,r){var n,i;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._debug("getFeatureByKey"),t.next=3,this.getFeatures(r);case 3:return n=t.sent,i=n.find((function(t){return t.feature_key===e})),this._debug(i),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return g.apply(this,arguments)})},{key:"_fetchTrafficResult",value:(d=p(f().mark((function t(e){var r,n,i,o,s,u,a,c;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._debug("内部请求分流结果"),this._cache.setMergedConfig(e),(o=null===(r=this._cache)||void 0===r?void 0:r.getMergedConfig()).sceneKeys&&0!==o.sceneKeys.filter((function(t){return t})).length){t.next=6;break}return this._debug("Scene Key 为空, 没有拉取实验"),t.abrupt("return");case 6:if(s=this._cache.getTraffic(),this._debug("获取分流缓存结果"),this._debug(s),null==s||!s.resp){t.next=12;break}return null!=s&&s.needRefresh&&this.fetch(o.sceneKeys,o.country,null!==(a=o.filters)&&void 0!==a?a:[],void 0,e),t.abrupt("return",null!==(u=null==s?void 0:s.resp)&&void 0!==u?u:[]);case 12:return t.next=14,this.fetch(o.sceneKeys,o.country,null!==(n=o.filters)&&void 0!==n?n:[],void 0,e);case 14:return c=t.sent,t.abrupt("return",null==c||null===(i=c.data)||void 0===i?void 0:i[0]);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"_getExpReq",value:function(t){return t||(t=this._cache.getMergedConfig()),{meta:{country:t.country,customid:t.customid,userid_str:t.userid,shopid_str:t.shopid,device_fingerprint:t.device_fingerprint},filter_data:t.filters,biz_name:t.bizName,scene_keys:t.sceneKeys}}},{key:"fetchInc",value:(h=p(f().mark((function t(e,r,n,i,o){var s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.fetch(Array.from(new Set([].concat(l(null!==(s=this._initConfig.sceneKeys)&&void 0!==s?s:[]),l(e)))),r,n,i,o));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n,i){return h.apply(this,arguments)})},{key:"fetch",value:(i=p(f().mark((function t(e,r,n,i,o){var a,c,l,h,d,p,v,y,g,b,m,_,w,S,O;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d=null!=o?o:{},e&&(d.sceneKeys=e),r&&(d.country=r),n&&(d.filters=n),this._debug("newOptions"),this._debug(d),this._cache.setMergedConfig(d),p=this._getExpReq(),this._debug("Fetch Exp Req Body"),this._debug(p),!i||"function"!=typeof i){t.next=18;break}return t.next=13,i(this._url,p);case 13:if(h=t.sent,!(null!==(v=h)&&void 0!==v&&v.error||null!==(y=h)&&void 0!==y&&y.error_msg)){t.next=16;break}throw Error("error: ".concat(null===(g=h)||void 0===g?void 0:g.error,", error msg: ").concat(null===(b=h)||void 0===b?void 0:b.error_msg));case 16:t.next=29;break;case 18:return t.next=20,(0,u.default)(this._url,{method:"POST",headers:s.reqHeaders,body:JSON.stringify(p),credentials:"include"});case 20:if(h=t.sent,null!==(m=h)&&void 0!==m&&m.ok){t.next=23;break}throw Error("网络异常, Status: ".concat(h.status,":").concat(h.statusText,", Text: ").concat(h.text));case 23:return t.next=25,h.json();case 25:if(h=t.sent,!(null!==(_=h)&&void 0!==_&&_.error||null!==(w=h)&&void 0!==w&&w.error_msg)){t.next=28;break}throw Error("error: ".concat(null===(S=h)||void 0===S?void 0:S.error,", error msg: ").concat(null===(O=h)||void 0===O?void 0:O.error_msg));case 28:h&&h.data&&0!==h.data.length||this._debug("对应的场景没有web实验, 您可以去站点上创建并开启实验");case 29:return this._debug("请求成功"),this._debug("分流信息: "),this._debug(null===(a=h)||void 0===a?void 0:a.data[0]),this._cache.setTraffic(null===(c=h)||void 0===c||null===(l=c.data)||void 0===l?void 0:l[0]),this._debug("Resp Body"),this._debug(h),t.abrupt("return",h);case 36:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n,o){return i.apply(this,arguments)})},{key:"_debug",value:function(t){this._initConfig.debug&&(0,c.debug)(t)}},{key:"getVersion",value:function(){return this._cache.getVersion()}},{key:"getGroupIdByPointId",value:function(t){return this._cache.getGroupIdByPointId(t)}},{key:"getCache",value:function(){return this._cache.getCache()}}],n=[{key:"init",value:function(e){e.filters||(e.filters=[]);var r=new t(e);return globalThis[s.windowInjectKey]=r,r}}],r&&v(e.prototype,r),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.ABTest=g},5714:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ABCache=void 0;var n,i=(n=r(9039))&&n.__esModule?n:{default:n},o=r(2923),s=r(2546),u=r(9919),a=r(5998);function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=function(){function t(e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"_cache",void 0),f(this,"_cacheTime",void 0),f(this,"_initConfig",void 0),f(this,"_cacheKey",""),f(this,"_mergedConfig",{}),this._initConfig=null!=e?e:{},this._cacheTime=null!==(r=null==e?void 0:e.cacheTime)&&void 0!==r?r:s.defaultConfig.cacheTime,this.setMergedConfig();var n=(0,o.getStorage)();this._cache=null!=n?n:{}}var e,r;return e=t,(r=[{key:"_debug",value:function(t){var e;null!==(e=this._initConfig)&&void 0!==e&&e.debug&&(0,u.debug)(t)}},{key:"validateCache",value:function(){var t,e={needRefresh:!0};if(this._cacheTime===s.nocache)return this._debug("设置为不使用本地缓存, 当前内容session有效"),e;var r=null===(t=this._cache)||void 0===t?void 0:t[this._cacheKey];return r&&r.resp?!r.expireTime||(0,a.isBefore)(r.expireTime,(0,a.currentDate)())?this._initConfig.cacheExpireRefresh?(this._debug("缓存已经失效 但是优先使用缓存结果"),e.resp=r.resp,e):(this._debug("缓存已经失效"),e):(this._debug("缓存失效时间为".concat((0,a.formateDate)(null==r?void 0:r.expireTime))),this._debug("当前时间为".concat((0,a.formateDate)(new Date))),this._debug("从缓存中拉取信息"),e.resp=r.resp,e.needRefresh=!1,e):(this._debug("本地无对应缓存"),e)}},{key:"getTraffic",value:function(){var t;return null!==(t=this.validateCache())&&void 0!==t?t:{}}},{key:"setTraffic",value:function(t){var e,r={resp:t,config:this._mergedConfig,expireTime:(0,a.currentDate)(this._cacheTime)};this._cache[this._cacheKey]=r,this._debug("更新内存信息"),this._debug(this._cache);var n=null!==(e=(0,o.getStorage)())&&void 0!==e?e:{};n[this._cacheKey]=r,this._debug("更新缓存信息"),this._debug(n),(0,o.setStorage)(n)}},{key:"getVersion",value:function(){var t,e,r=null===(t=this._cache)||void 0===t||null===(e=t[this._cacheKey])||void 0===e?void 0:e.resp;return this._debug("TMS获取版本信息"),this._debug(null==r?void 0:r.version),null==r?void 0:r.version}},{key:"getGroupIdByPointId",value:function(t){var e,r,n,i,o,s=null===(e=this._cache)||void 0===e||null===(r=e[this._cacheKey])||void 0===r?void 0:r.resp,u=null!==(n=null==s||null===(i=s.point_infos)||void 0===i||null===(o=i.find((function(e){return e.point_id===t})))||void 0===o?void 0:o.group_ids)&&void 0!==n?n:[];if(this._debug("根据Pointid".concat(t,"获取实验分组")),this._debug(u),0===u.length){var a=Object.values(this._cache).reduce((function(t,e){var r,n;return t.concat(null!==(r=null===(n=e.resp)||void 0===n?void 0:n.point_infos)&&void 0!==r?r:[])}),[]).filter((function(e){return e.point_id===t})).flatMap((function(t){return t.group_ids}));u=Array.from(new Set(a))}return u}},{key:"getCache",value:function(){return this._cache}},{key:"setMergedConfig",value:function(t){this._mergedConfig=l(l({},this._initConfig),null!=t?t:{}),this.setCacheKey()}},{key:"setCacheKey",value:function(){var t=this._mergedConfig;this._cacheKey=(0,i.default)(JSON.stringify({meta:{country:t.country,customid:t.customid,userid_str:t.userid,shopid_str:t.shopid,device_fingerprint:t.device_fingerprint},filter_data:t.filters,biz_name:t.bizName,scene_keys:t.sceneKeys}))}},{key:"getMergedConfig",value:function(){return this._mergedConfig}}])&&h(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.ABCache=d},2546:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.windowInjectKey=e.url2EnvMap=e.trafficAPI=e.reqHeaders=e.noneLiveEnv=e.nocache=e.localStorageKey=e.liveEnvUrl=e.env2UrlMap=e.env2AbEnv=e.defaultConfig=e.countryPostfixMap=e.byFeatureAPI=void 0;var n=r(9919);e.trafficAPI="api/v4/abtest/traffic/get_web_experiments",e.byFeatureAPI="api/v4/abtest/traffic/get_feature_by_feature_key",e.localStorageKey="__abtest__",e.windowInjectKey="__abtest__",e.nocache=0,e.liveEnvUrl="",e.defaultConfig={cacheTime:5,isInitFetch:!1};var i={live:"",liveish:"live-test",uat:"uat",test:"test",staging:"staging",stable:"test-stable"};e.env2UrlMap=i;var o=Object.values(i).filter((function(t){return""!==t}));e.noneLiveEnv=o;var s=(0,n.flip)(i);e.url2EnvMap=s,e.env2AbEnv={staging:"test","test-stable":"test",enableStaging:function(t){this.staging=t?"staging":"test"}},e.reqHeaders={"Content-Type":"application/json"},e.countryPostfixMap={shopeepay:"shopeepay.",shopee:"shopee."}},5998:(t,e)=>{"use strict";function r(t,e){return"number"==typeof t&&(t=new Date(t)),t.setMinutes(t.getMinutes()+e),t}Object.defineProperty(e,"__esModule",{value:!0}),e.addMin=r,e.currentDate=function(t){return t?r(new Date,t).valueOf():Date.now()},e.formateDate=function(t){return"number"==typeof t&&(t=new Date(t)),t.toString()},e.isBefore=function(t,e){return void 0!==t&&("number"!=typeof t&&(t=new Date(t)),"number"!=typeof e&&(e=new Date(e)),t.valueOf()<e.valueOf())}},6047:(t,e,r)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=((n=r(2400))&&n.__esModule?n:{default:n}).default;e.default=i},4937:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDevModeTrafficApi=function(t){return"//abtest-api.dataplt.".concat(null!=t?t:"test",".shopee.io/").concat(n.trafficAPI)},e.getTrafficApi=function(t){var e,r,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(null===globalThis||void 0===globalThis||null===(e=globalThis.location)||void 0===e?void 0:e.hostname)||"";t?(r=n.env2UrlMap[t],(0,i.isValidKey)(r,n.env2AbEnv)&&(r=n.env2AbEnv[r])):r=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===globalThis||void 0===globalThis||null===(t=globalThis.location)||void 0===t?void 0:t.hostname;if(!e||null!=e&&e.includes("localhost"))return"test";var r,i=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=s(t))){e&&(t=e);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==e.return||e.return()}finally{if(u)throw i}}}}(n.noneLiveEnv);try{for(i.s();!(r=i.n()).done;){var o=r.value,u=e.lastIndexOf("".concat(o,"."));if(0===u||"."===e[u-1])return"staging"===o||"test-stable"===o?n.env2AbEnv[o]:o}}catch(a){i.e(a)}finally{i.f()}return n.liveEnvUrl}(u);var a="";r!==n.liveEnvUrl&&(a=".");for(var c="",l=0,h=Object.entries(n.countryPostfixMap);l<h.length;l++){var f=o(h[l],2),d=f[0],p=f[1];if(u.includes(d)){c=o(u.split(p),2)[1];break}}return"io"!==c&&c||(c="sg"),"//".concat(r).concat(a,"shopee.").concat(c,"/").concat(n.trafficAPI)},e.getWsaTrafficApi=function(){return"/".concat(n.trafficAPI)};var n=r(2546),i=r(9919);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],s=!0,u=!1;try{for(r=r.call(t);!(s=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);s=!0);}catch(a){u=!0,i=a}finally{try{s||null==r.return||r.return()}finally{if(u)throw i}}return o}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}},9756:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={ABTest:!0};Object.defineProperty(e,"ABTest",{enumerable:!0,get:function(){return i.ABTest}});var i=r(4393),o=r(2111);Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===o[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))}))},2923:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getStorage=function(){try{var t=globalThis.localStorage.getItem(n.localStorageKey);if(t)return JSON.parse(t)}catch(e){}return null},e.setStorage=function(t){try{globalThis.localStorage.setItem(n.localStorageKey,JSON.stringify(t))}catch(e){}};var n=r(2546)},2111:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0})},9919:(t,e)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Object.defineProperty(e,"__esModule",{value:!0}),e.debug=function(t){},e.flip=void 0,e.hasSetId=function(t){return!!(t.shopid||t.userid||t.customid||t.device_fingerprint)},e.isValidKey=function(t,e){return t in e},e.flip=function(t){return Object.fromEntries(Object.entries(t).map((function(t){var e,n,i=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o=[],s=!0,u=!1;try{for(r=r.call(t);!(s=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);s=!0);}catch(a){u=!0,i=a}finally{try{s||null==r.return||r.return()}finally{if(u)throw i}}return o}}(e,n)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0];return[i[1],o]})))}},8953:t=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=e},3033:t=>{var e,r;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var r=[],n=0;n<t.length;n+=3)for(var i=t[n]<<16|t[n+1]<<8|t[n+2],o=0;o<4;o++)8*n+6*o<=8*t.length?r.push(e.charAt(i>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,i=0;n<t.length;i=++n%4)0!=i&&r.push((e.indexOf(t.charAt(n-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(n))>>>6-2*i);return r}},t.exports=r},3819:t=>{function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},2400:(t,e,r)=>{t.exports=self.fetch||(self.fetch=r(3073).default||r(3073))},9039:(t,e,r)=>{var n,i,o,s,u;n=r(3033),i=r(8953).utf8,o=r(3819),s=r(8953).bin,(u=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||t.constructor===Uint8Array||(t=t.toString());for(var r=n.bytesToWords(t),a=8*t.length,c=1732584193,l=-271733879,h=-1732584194,f=271733878,d=0;d<r.length;d++)r[d]=16711935&(r[d]<<8|r[d]>>>24)|4278255360&(r[d]<<24|r[d]>>>8);r[a>>>5]|=128<<a%32,r[14+(a+64>>>9<<4)]=a;var p=u._ff,v=u._gg,y=u._hh,g=u._ii;for(d=0;d<r.length;d+=16){var b=c,m=l,_=h,w=f;c=p(c,l,h,f,r[d+0],7,-680876936),f=p(f,c,l,h,r[d+1],12,-389564586),h=p(h,f,c,l,r[d+2],17,606105819),l=p(l,h,f,c,r[d+3],22,-1044525330),c=p(c,l,h,f,r[d+4],7,-176418897),f=p(f,c,l,h,r[d+5],12,1200080426),h=p(h,f,c,l,r[d+6],17,-1473231341),l=p(l,h,f,c,r[d+7],22,-45705983),c=p(c,l,h,f,r[d+8],7,1770035416),f=p(f,c,l,h,r[d+9],12,-1958414417),h=p(h,f,c,l,r[d+10],17,-42063),l=p(l,h,f,c,r[d+11],22,-1990404162),c=p(c,l,h,f,r[d+12],7,1804603682),f=p(f,c,l,h,r[d+13],12,-40341101),h=p(h,f,c,l,r[d+14],17,-1502002290),c=v(c,l=p(l,h,f,c,r[d+15],22,1236535329),h,f,r[d+1],5,-165796510),f=v(f,c,l,h,r[d+6],9,-1069501632),h=v(h,f,c,l,r[d+11],14,643717713),l=v(l,h,f,c,r[d+0],20,-373897302),c=v(c,l,h,f,r[d+5],5,-701558691),f=v(f,c,l,h,r[d+10],9,38016083),h=v(h,f,c,l,r[d+15],14,-660478335),l=v(l,h,f,c,r[d+4],20,-405537848),c=v(c,l,h,f,r[d+9],5,568446438),f=v(f,c,l,h,r[d+14],9,-1019803690),h=v(h,f,c,l,r[d+3],14,-187363961),l=v(l,h,f,c,r[d+8],20,1163531501),c=v(c,l,h,f,r[d+13],5,-1444681467),f=v(f,c,l,h,r[d+2],9,-51403784),h=v(h,f,c,l,r[d+7],14,1735328473),c=y(c,l=v(l,h,f,c,r[d+12],20,-1926607734),h,f,r[d+5],4,-378558),f=y(f,c,l,h,r[d+8],11,-2022574463),h=y(h,f,c,l,r[d+11],16,1839030562),l=y(l,h,f,c,r[d+14],23,-35309556),c=y(c,l,h,f,r[d+1],4,-1530992060),f=y(f,c,l,h,r[d+4],11,1272893353),h=y(h,f,c,l,r[d+7],16,-155497632),l=y(l,h,f,c,r[d+10],23,-1094730640),c=y(c,l,h,f,r[d+13],4,681279174),f=y(f,c,l,h,r[d+0],11,-358537222),h=y(h,f,c,l,r[d+3],16,-722521979),l=y(l,h,f,c,r[d+6],23,76029189),c=y(c,l,h,f,r[d+9],4,-640364487),f=y(f,c,l,h,r[d+12],11,-421815835),h=y(h,f,c,l,r[d+15],16,530742520),c=g(c,l=y(l,h,f,c,r[d+2],23,-995338651),h,f,r[d+0],6,-198630844),f=g(f,c,l,h,r[d+7],10,1126891415),h=g(h,f,c,l,r[d+14],15,-1416354905),l=g(l,h,f,c,r[d+5],21,-57434055),c=g(c,l,h,f,r[d+12],6,1700485571),f=g(f,c,l,h,r[d+3],10,-1894986606),h=g(h,f,c,l,r[d+10],15,-1051523),l=g(l,h,f,c,r[d+1],21,-2054922799),c=g(c,l,h,f,r[d+8],6,1873313359),f=g(f,c,l,h,r[d+15],10,-30611744),h=g(h,f,c,l,r[d+6],15,-1560198380),l=g(l,h,f,c,r[d+13],21,1309151649),c=g(c,l,h,f,r[d+4],6,-145523070),f=g(f,c,l,h,r[d+11],10,-1120210379),h=g(h,f,c,l,r[d+2],15,718787259),l=g(l,h,f,c,r[d+9],21,-343485551),c=c+b>>>0,l=l+m>>>0,h=h+_>>>0,f=f+w>>>0}return n.endian([c,l,h,f])})._ff=function(t,e,r,n,i,o,s){var u=t+(e&r|~e&n)+(i>>>0)+s;return(u<<o|u>>>32-o)+e},u._gg=function(t,e,r,n,i,o,s){var u=t+(e&n|r&~n)+(i>>>0)+s;return(u<<o|u>>>32-o)+e},u._hh=function(t,e,r,n,i,o,s){var u=t+(e^r^n)+(i>>>0)+s;return(u<<o|u>>>32-o)+e},u._ii=function(t,e,r,n,i,o,s){var u=t+(r^(e|~n))+(i>>>0)+s;return(u<<o|u>>>32-o)+e},u._blocksize=16,u._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var r=n.wordsToBytes(u(t,e));return e&&e.asBytes?r:e&&e.asString?s.bytesToString(r):n.bytesToHex(r)}},3073:(t,e,r)=>{"use strict";function n(t,e){return e=e||{},new Promise((function(r,n){var i=new XMLHttpRequest,o=[],s=[],u={},a=function(){return{ok:2==(i.status/100|0),statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return s},get:function(t){return u[t.toLowerCase()]},has:function(t){return t.toLowerCase()in u}}}};for(var c in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,r){o.push(e=e.toLowerCase()),s.push([e,r]),u[e]=u[e]?u[e]+","+r:r})),r(a())},i.onerror=n,i.withCredentials="include"==e.credentials,e.headers)i.setRequestHeader(c,e.headers[c]);i.send(e.body||null)}))}r.r(e),r.d(e,{default:()=>n})},6560:(t,e,r)=>{"use strict";var n=r(7363),i="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},o=n.useState,s=n.useEffect,u=n.useLayoutEffect,a=n.useDebugValue;function c(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!i(t,r)}catch(n){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var r=e(),n=o({inst:{value:r,getSnapshot:e}}),i=n[0].inst,l=n[1];return u((function(){i.value=r,i.getSnapshot=e,c(i)&&l({inst:i})}),[t,r,e]),s((function(){return c(i)&&l({inst:i}),t((function(){c(i)&&l({inst:i})}))}),[t]),a(r),r};e.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},8791:(t,e,r)=>{"use strict";t.exports=r(6560)},1312:(t,e,r)=>{"use strict";var n;r.d(e,{Z:()=>l});var i=new Uint8Array(16);function o(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=[],a=0;a<256;++a)u.push((a+256).toString(16).substr(1));const c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!function(t){return"string"==typeof t&&s.test(t)}(r))throw TypeError("Stringified UUID is invalid");return r},l=function(t,e,r){var n=(t=t||{}).random||(t.rng||o)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return c(n)}},8542:(t,e)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t="",e=0;e<arguments.length;e++){var r=arguments[e];r&&(t=s(t,o(r)))}return t}function o(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return i.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var e="";for(var r in t)n.call(t,r)&&t[r]&&(e=s(e,r));return e}function s(t,e){return e?t?t+" "+e:t+e:t}t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},1986:(t,e,r)=>{"use strict";function n(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}r.d(e,{Z:()=>n})},1630:(t,e,r)=>{"use strict";r.d(e,{Z:()=>n});const n=Object.assign.bind()},3681:(t,e,r)=>{"use strict";r.d(e,{a:()=>q});var n=r(1630);const i="undefined"==typeof window||"Deno"in window;function o(){}function s(t){return"number"==typeof t&&t>=0&&t!==1/0}function u(t,e){if(t===e)return t;const r=c(t)&&c(e);if(r||l(t)&&l(e)){const n=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),o=i.length,s=r?[]:{};let a=0;for(let c=0;c<o;c++){const n=r?c:i[c];s[n]=u(t[n],e[n]),s[n]===t[n]&&a++}return n===o&&a===n?t:s}return e}function a(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function c(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function l(t){if(!h(t))return!1;const e=t.constructor;if(void 0===e)return!0;const r=e.prototype;return!!h(r)&&!!r.hasOwnProperty("isPrototypeOf")}function h(t){return"[object Object]"===Object.prototype.toString.call(t)}function f(t){new Promise((t=>{setTimeout(t,0)})).then(t)}function d(t,e,r){return null!=r.isDataEqual&&r.isDataEqual(t,e)?t:"function"==typeof r.structuralSharing?r.structuralSharing(t,e):!1!==r.structuralSharing?u(t,e):e}var p=r(1986);const v=function(){let t=[],e=0,r=t=>{t()},n=t=>{t()};const i=n=>{e?t.push(n):f((()=>{r(n)}))};return{batch:i=>{let o;e++;try{o=i()}finally{e--,e||(()=>{const e=t;t=[],e.length&&f((()=>{n((()=>{e.forEach((t=>{r(t)}))}))}))})()}return o},batchCalls:t=>(...e)=>{i((()=>{t(...e)}))},schedule:i,setNotifyFunction:t=>{r=t},setBatchNotifyFunction:t=>{n=t}}}();class y{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const e={listener:t};return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const g=new class extends y{constructor(){super(),this.setup=t=>{if(!i&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1),()=>{window.removeEventListener("visibilitychange",e),window.removeEventListener("focus",e)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)}setEventListener(t){var e;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((t=>{"boolean"==typeof t?this.setFocused(t):this.onFocus()}))}setFocused(t){this.focused!==t&&(this.focused=t,this.onFocus())}onFocus(){this.listeners.forEach((({listener:t})=>{t()}))}isFocused(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)}},b=["online","offline"],m=new class extends y{constructor(){super(),this.setup=t=>{if(!i&&window.addEventListener){const e=()=>t();return b.forEach((t=>{window.addEventListener(t,e,!1)})),()=>{b.forEach((t=>{window.removeEventListener(t,e)}))}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){var t;this.hasListeners()||(null==(t=this.cleanup)||t.call(this),this.cleanup=void 0)}setEventListener(t){var e;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t((t=>{"boolean"==typeof t?this.setOnline(t):this.onOnline()}))}setOnline(t){this.online!==t&&(this.online=t,this.onOnline())}onOnline(){this.listeners.forEach((({listener:t})=>{t()}))}isOnline(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine}};class _{constructor(t){this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent}}const w=["refetchPage"];class S extends y{constructor(t,e){super(),this.client=t,this.options=e,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(e)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.currentQuery.addObserver(this),O(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return E(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return E(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(t,e){const r=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),a(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const i=this.hasListeners();i&&x(this.currentQuery,n,this.options,r)&&this.executeFetch(),this.updateResult(e),!i||this.currentQuery===n&&this.options.enabled===r.enabled&&this.options.staleTime===r.staleTime||this.updateStaleTimeout();const o=this.computeRefetchInterval();!i||this.currentQuery===n&&this.options.enabled===r.enabled&&o===this.currentRefetchInterval||this.updateRefetchInterval(o)}getOptimisticResult(t){const e=this.client.getQueryCache().build(this.client,t),r=this.createResult(e,t);return function(t,e,r){return!r.keepPreviousData&&(void 0!==r.placeholderData?e.isPlaceholderData:!a(t.getCurrentResult(),e))}(this,r,t)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(t){const e={};return Object.keys(t).forEach((r=>{Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),t[r])})})),e}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch(t={}){let{refetchPage:e}=t,r=(0,p.Z)(t,w);return this.fetch((0,n.Z)({},r,{meta:{refetchPage:e}}))}fetchOptimistic(t){const e=this.client.defaultQueryOptions(t),r=this.client.getQueryCache().build(this.client,e);return r.isFetchingOptimistic=!0,r.fetch().then((()=>this.createResult(r,e)))}fetch(t){var e;return this.executeFetch((0,n.Z)({},t,{cancelRefetch:null==(e=t.cancelRefetch)||e})).then((()=>(this.updateResult(),this.currentResult)))}executeFetch(t){this.updateQuery();let e=this.currentQuery.fetch(this.options,t);return null!=t&&t.throwOnError||(e=e.catch(o)),e}updateStaleTimeout(){if(this.clearStaleTimeout(),i||this.currentResult.isStale||!s(this.options.staleTime))return;var t,e;const r=(t=this.currentResult.dataUpdatedAt,e=this.options.staleTime,Math.max(t+(e||0)-Date.now(),0)+1);this.staleTimeoutId=setTimeout((()=>{this.currentResult.isStale||this.updateResult()}),r)}computeRefetchInterval(){var t;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(t=this.options.refetchInterval)&&t}updateRefetchInterval(t){this.clearRefetchInterval(),this.currentRefetchInterval=t,!i&&!1!==this.options.enabled&&s(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval((()=>{(this.options.refetchIntervalInBackground||g.isFocused())&&this.executeFetch()}),this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(t,e){const r=this.currentQuery,n=this.options,i=this.currentResult,o=this.currentResultState,s=this.currentResultOptions,u=t!==r,a=u?t.state:this.currentQueryInitialState,c=u?this.currentResult:this.previousQueryResult,{state:l}=t;let h,{dataUpdatedAt:f,error:p,errorUpdatedAt:v,fetchStatus:y,status:g}=l,b=!1,_=!1;if(e._optimisticResults){const i=this.hasListeners(),o=!i&&O(t,e),s=i&&x(t,r,e,n);(o||s)&&(y="online"!==(null!=(w=t.options.networkMode)?w:"online")||m.isOnline()?"fetching":"paused",f||(g="loading")),"isRestoring"===e._optimisticResults&&(y="idle")}var w;if(e.keepPreviousData&&!l.dataUpdatedAt&&null!=c&&c.isSuccess&&"error"!==g)h=c.data,f=c.dataUpdatedAt,g=c.status,b=!0;else if(e.select&&void 0!==l.data)if(i&&l.data===(null==o?void 0:o.data)&&e.select===this.selectFn)h=this.selectResult;else try{this.selectFn=e.select,h=e.select(l.data),h=d(null==i?void 0:i.data,h,e),this.selectResult=h,this.selectError=null}catch(C){this.selectError=C}else h=l.data;if(void 0!==e.placeholderData&&void 0===h&&"loading"===g){let t;if(null!=i&&i.isPlaceholderData&&e.placeholderData===(null==s?void 0:s.placeholderData))t=i.data;else if(t="function"==typeof e.placeholderData?e.placeholderData():e.placeholderData,e.select&&void 0!==t)try{t=e.select(t),this.selectError=null}catch(C){this.selectError=C}void 0!==t&&(g="success",h=d(null==i?void 0:i.data,t,e),_=!0)}this.selectError&&(p=this.selectError,h=this.selectResult,v=Date.now(),g="error");const S="fetching"===y,E="loading"===g,T="error"===g;return{status:g,fetchStatus:y,isLoading:E,isSuccess:"success"===g,isError:T,isInitialLoading:E&&S,data:h,dataUpdatedAt:f,error:p,errorUpdatedAt:v,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>a.dataUpdateCount||l.errorUpdateCount>a.errorUpdateCount,isFetching:S,isRefetching:S&&!E,isLoadingError:T&&0===l.dataUpdatedAt,isPaused:"paused"===y,isPlaceholderData:_,isPreviousData:b,isRefetchError:T&&0!==l.dataUpdatedAt,isStale:R(t,e),refetch:this.refetch,remove:this.remove}}updateResult(t){const e=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,a(r,e))return;this.currentResult=r;const i={cache:!0};!1!==(null==t?void 0:t.listeners)&&(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.trackedProps.size)return!0;const n=new Set(null!=r?r:this.trackedProps);return this.options.useErrorBoundary&&n.add("error"),Object.keys(this.currentResult).some((t=>{const r=t;return this.currentResult[r]!==e[r]&&n.has(r)}))})()&&(i.listeners=!0),this.notify((0,n.Z)({},i,t))}updateQuery(){const t=this.client.getQueryCache().build(this.client,this.options);if(t===this.currentQuery)return;const e=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))}onQueryUpdate(t){const e={};"success"===t.type?e.onSuccess=!t.manual:"error"!==t.type||t.error instanceof _||(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()}notify(t){v.batch((()=>{var e,r,n,i;if(t.onSuccess)null==(e=(r=this.options).onSuccess)||e.call(r,this.currentResult.data),null==(n=(i=this.options).onSettled)||n.call(i,this.currentResult.data,null);else if(t.onError){var o,s,u,a;null==(o=(s=this.options).onError)||o.call(s,this.currentResult.error),null==(u=(a=this.options).onSettled)||u.call(a,void 0,this.currentResult.error)}t.listeners&&this.listeners.forEach((({listener:t})=>{t(this.currentResult)})),t.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})}))}}function O(t,e){return function(t,e){return!(!1===e.enabled||t.state.dataUpdatedAt||"error"===t.state.status&&!1===e.retryOnMount)}(t,e)||t.state.dataUpdatedAt>0&&E(t,e,e.refetchOnMount)}function E(t,e,r){if(!1!==e.enabled){const n="function"==typeof r?r(t):r;return"always"===n||!1!==n&&R(t,e)}return!1}function x(t,e,r,n){return!1!==r.enabled&&(t!==e||!1===n.enabled)&&(!r.suspense||"error"!==t.state.status)&&R(t,r)}function R(t,e){return t.isStaleByTime(e.staleTime)}var T=r(7363);const C=r(8791).useSyncExternalStore;const A=T.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}()),j=()=>T.useContext(A),I=T.createContext(void 0),P=T.createContext(!1);const k=({context:t}={})=>{const e=T.useContext(function(t,e){return t||(e&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=I),window.ReactQueryClientContext):I)}(t,T.useContext(P)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},L=T.createContext(!1),M=()=>T.useContext(L);L.Provider;const F=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},Q=t=>{T.useEffect((()=>{t.clearReset()}),[t])},B=({result:t,errorResetBoundary:e,useErrorBoundary:r,query:n})=>{return t.isError&&!e.isReset()&&!t.isFetching&&(i=r,o=[t.error,n],"function"==typeof i?i(...o):!!i);var i,o},U=t=>{t.suspense&&"number"!=typeof t.staleTime&&(t.staleTime=1e3)},D=(t,e,r)=>(null==t?void 0:t.suspense)&&((t,e)=>t.isLoading&&t.isFetching&&!e)(e,r),K=(t,e,r)=>e.fetchOptimistic(t).then((({data:e})=>{null==t.onSuccess||t.onSuccess(e),null==t.onSettled||t.onSettled(e,null)})).catch((e=>{r.clearReset(),null==t.onError||t.onError(e),null==t.onSettled||t.onSettled(void 0,e)}));function q(t,e,r){const i=function(t,e,r){return i=t,Array.isArray(i)?"function"==typeof e?(0,n.Z)({},r,{queryKey:t,queryFn:e}):(0,n.Z)({},e,{queryKey:t}):t;var i}(t,e,r);return function(t,e){const r=k({context:t.context}),n=M(),i=j(),o=r.defaultQueryOptions(t);o._optimisticResults=n?"isRestoring":"optimistic",o.onError&&(o.onError=v.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=v.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=v.batchCalls(o.onSettled)),U(o),F(o,i),Q(i);const[s]=T.useState((()=>new e(r,o))),u=s.getOptimisticResult(o);if(C(T.useCallback((t=>{const e=n?()=>{}:s.subscribe(v.batchCalls(t));return s.updateResult(),e}),[s,n]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),T.useEffect((()=>{s.setOptions(o,{listeners:!1})}),[o,s]),D(o,u,n))throw K(o,s,i);if(B({result:u,errorResetBoundary:i,useErrorBoundary:o.useErrorBoundary,query:s.getCurrentQuery()}))throw u.error;return o.notifyOnChangeProps?u:s.trackResult(u)}(i,S)}},4640:(t,e,r)=>{"use strict";r.d(e,{Z:()=>o});var n=!0,i="Invariant failed";function o(t,e){if(!t){if(n)throw new Error(i);var r="function"==typeof e?e():e,o=r?"".concat(i,": ").concat(r):i;throw new Error(o)}}}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/mobilemall-buyernotimobiledefault/_/971.7134d9fe988a4512b01f.js.map