(self.mfeModules=self.mfeModules||[]).push(["shopee__pc-page-configuration-context",["Platform","React","ReactRedux"],(e,r,t)=>()=>Promise.resolve((()=>{"use strict";var e,o={};o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};o.r(n),o.d(n,{FOOTER_PAGE_TYPE:()=>l,Footer:()=>v,Header:()=>T,PageConfigurationContext:()=>g,PageConfigurationProvider:()=>d,__exports:()=>F,withPageConfiguration:()=>m});var a={};o.r(a),o.d(a,{DEFAULT_PAGE_CONTEXT:()=>P,PageConfigurationContext:()=>g});var u={};o.r(u),o.d(u,{FOOTER_PAGE_TYPE:()=>l,Footer:()=>v,Header:()=>T,PageConfigurationContext:()=>g,PageConfigurationProvider:()=>d,withPageConfiguration:()=>m});var i={};function s(){return(s=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}o.r(i),o.d(i,{FOOTER_PAGE_TYPE:()=>l,Footer:()=>C,Header:()=>O,PageConfigurationContext:()=>g,PageConfigurationProvider:()=>E,PageConfigurationSsrRehydrator:()=>S,withPageConfiguration:()=>_});var l=Object.freeze({HOME:0,SHOP:1,PRODUCT:2,EVENT:3,SEARCH_RESULT:4,COLLECTION:5,CATEGORY_PAGE:6,OFFICIAL_SHOP:8,FLASH_SALE:9,ALL_CAMPAIGNS:10,GROUP_BUY_BROWSE_DEAL:11,SHOPEE_MART:14});function f(e){return{type:"SET_DEFAULT_THEME",page:e}}function c(e,r){return{type:"SET_OFFICIAL_SHOP_THEME",show:e,page:r}}function p(e){return{type:"SET_SHOPEE_MART_THEME",page:e}}var h=((e=h||{}).DEFAULT="default",e.OFS="ofs",e.S_MART="s-mart",e.HEB="heb",e);h.DEFAULT;var P={headerProps:{enable:!1},footerProps:{enable:!1},pageTheme:h.DEFAULT,promises:{},setHeaderProps:function(){},setFooterProps:function(){},setPageTheme:function(){},handlers:{fetchCartDrawerItems:function(){}}},g=r.createContext(P);function d(e){var o,n,a,u=e.children,i=e.context,l=e.handlers,P=r.useState(i),d=P[0],T=P[1],v=(0,t.useDispatch)(),m=r.useCallback(function(e){T(function(r){return(0,t.shallowEqual)(null==r?void 0:r.headerProps,e)?r:s({},r,{headerProps:e})})},[]),E=r.useCallback(function(e){T(function(r){return(0,t.shallowEqual)(null==r?void 0:r.footerProps,e)?r:s({},r,{footerProps:e})})},[]),S=r.useCallback(function(e){var r=e.theme,t=e.pageName;r&&t?((!(null==i?void 0:i.pageTheme)||(null==i?void 0:i.pageTheme)&&(null==i?void 0:i.pageTheme)!==r)&&T(function(e){return s({},e,{pageTheme:r})}),r===h.S_MART?v(p(t)):r===h.OFS?v(c(!0,t)):r===h.DEFAULT&&v(f(t))):v(f(""))},[null==i?void 0:i.pageTheme]);return r.createElement(g.Provider,{value:{hasSsr:void 0!==i,headerProps:null!=(o=null==d?void 0:d.headerProps)?o:{},footerProps:null!=(n=null==d?void 0:d.footerProps)?n:{},pageTheme:null!=(a=null==d?void 0:d.pageTheme)?a:h.DEFAULT,setHeaderProps:m,setFooterProps:E,setPageTheme:S,handlers:void 0===l?{fetchCartDrawerItems:function(){}}:l}},u)}function T(e){var t=r.useContext(g),o=t.setHeaderProps,n=t.hasSsr;return r.useEffect(function(){n||o(e)},[JSON.stringify(e),n]),null}function v(e){var t=r.useContext(g),o=t.setFooterProps,n=t.hasSsr;return r.useEffect(function(){n||o(e)},[JSON.stringify(e),n]),null}var m=function(e){return void 0===e&&(e={}),function(t){var o,n,a={withOFS:null!=(o=e.withIsOfficialShopTheme)&&o,withSMART:null!=(n=e.withIsShopeeMartTheme)&&n};return function(e){var o=r.useContext(g).pageTheme;return r.createElement(t,s({},e,{isOfficialShopTheme:a.withOFS&&o===h.OFS,isShopeeMartTheme:a.withSMART&&o===h.S_MART}))}}};function E(e){var o=e.children,n=e.context,a=r.useRef(),u=(0,t.useDispatch)(),i=r.useRef({header:function(){},footer:function(){}}),s=r.useRef({header:new Promise(function(e){i.current.header=e}),footer:new Promise(function(e){i.current.footer=e})}),l=r.useRef(function(e){var r=e.pageName,t=e.theme;t&&r&&(a.current?a.current.pageTheme=t:a.current={pageTheme:t},n&&(n.pageTheme=t),t===h.S_MART?u(p(r)):t===h.OFS?u(c(!0,r)):t===h.DEFAULT&&u(f(r)))}),P=r.useRef(function(e){a.current?a.current.headerProps=e:a.current={headerProps:e},i.current.header(e),n&&(n.headerProps=e)}),d=r.useRef(function(e){a.current?a.current.footerProps=e:a.current={footerProps:e},i.current.footer(e),n&&(n.footerProps=e)});return r.createElement(g.Provider,{value:{get headerProps(){var T,v;return null!=(v=null==(T=a.current)?void 0:T.headerProps)?v:{}},get footerProps(){var m,E;return null!=(E=null==(m=a.current)?void 0:m.footerProps)?E:{}},get pageTheme(){var S,O;return null!=(O=null==(S=a.current)?void 0:S.pageTheme)?O:h.DEFAULT},get promises(){var C;return null!=(C=s.current)?C:{}},get setHeaderProps(){return P.current},get setFooterProps(){return d.current},get setPageTheme(){return l.current}}},o)}function S(e){var t=e.pageContext,o=e.pageName,n=r.useContext(g),a=n.setHeaderProps,u=n.setFooterProps,i=n.setPageTheme;return r.useMemo(function(){(null==t?void 0:t.headerProps)&&a(t.headerProps),(null==t?void 0:t.footerProps)&&u(t.footerProps),(null==t?void 0:t.pageTheme)&&o&&i({pageName:o,theme:t.pageTheme})},[]),null}function O(e){var t=r.useContext(g).setHeaderProps;return r.useMemo(function(){t(e)},[]),null}function C(e){var t=r.useContext(g).setFooterProps;return r.useMemo(function(){t(e)},[]),null}var _=function(e){return void 0===e&&(e={}),function(t){var o,n,a={withOFS:null!=(o=e.withIsOfficialShopTheme)&&o,withSMart:null!=(n=e.withIsShopeeMartTheme)&&n};return function(e){var o=r.useContext(g).pageTheme;return r.createElement(t,s({},e,{isOfficialShopTheme:a.withOFS&&o===h.OFS,isShopeeMartTheme:a.withSMart&&o===h.S_MART}))}}},F={"./client":u,"./server":i,"./context":a};return n})()).then(r=>{e.setModule("shopee__pc-page-configuration-context",r,{type:"module",version:"0.2.57",isSingleton:!0,originalPackageName:"@shopee/pc-page-configuration-context"})}),2]);
//# sourceMappingURL=https://files.webfe.shopee.io/modules-federation/bundle/0/shopee__pc-page-configuration-context/0.2.57.2017.js.map