(self.mfeModules=self.mfeModules||[]).push(["shopee__pc-page-configuration-context",["Platform","React","ReactRedux"],(e,r,t)=>()=>Promise.resolve((()=>{"use strict";var e,o={};o.d=(e,r)=>{for(var t in r)o.o(r,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},o.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};o.r(n),o.d(n,{FOOTER_PAGE_TYPE:()=>i,Footer:()=>E,Header:()=>g,PageConfigurationContext:()=>P,PageConfigurationProvider:()=>T,__exports:()=>A,withPageConfiguration:()=>S});var a={};o.r(a),o.d(a,{DEFAULT_PAGE_CONTEXT:()=>c,PageConfigurationContext:()=>P});var u={};o.r(u),o.d(u,{FOOTER_PAGE_TYPE:()=>i,Footer:()=>E,Header:()=>g,PageConfigurationContext:()=>P,PageConfigurationProvider:()=>T,withPageConfiguration:()=>S});var s={};o.r(s),o.d(s,{FOOTER_PAGE_TYPE:()=>i,Footer:()=>_,Header:()=>O,PageConfigurationContext:()=>P,PageConfigurationProvider:()=>m,PageConfigurationSsrRehydrator:()=>d,withPageConfiguration:()=>C});let i=Object.freeze({HOME:0,SHOP:1,PRODUCT:2,EVENT:3,SEARCH_RESULT:4,COLLECTION:5,CATEGORY_PAGE:6,OFFICIAL_SHOP:8,FLASH_SALE:9,ALL_CAMPAIGNS:10,GROUP_BUY_BROWSE_DEAL:11,SHOPEE_MART:14});function h(e){return{type:"SET_DEFAULT_THEME",page:e}}function p(e,r){return{type:"SET_OFFICIAL_SHOP_THEME",show:e,page:r}}function f(e){return{type:"SET_SHOPEE_MART_THEME",page:e}}var l=((e=l||{}).DEFAULT="default",e.OFS="ofs",e.S_MART="s-mart",e.HEB="heb",e);l.DEFAULT;let c={headerProps:{enable:!1},footerProps:{enable:!1},pageTheme:l.DEFAULT,promises:{},setHeaderProps:()=>{},setFooterProps:()=>{},setPageTheme:()=>{},handlers:{fetchCartDrawerItems:()=>{}}},P=r.createContext(c);function T({children:e,context:o,handlers:n={fetchCartDrawerItems:()=>{}}}){let[a,u]=r.useState(o),s=(0,t.useDispatch)(),i=r.useCallback(e=>{u(r=>(0,t.shallowEqual)(r?.headerProps,e)?r:{...r,headerProps:e})},[]),c=r.useCallback(e=>{u(r=>(0,t.shallowEqual)(r?.footerProps,e)?r:{...r,footerProps:e})},[]),T=r.useCallback(({theme:e,pageName:r})=>{e&&r?((!o?.pageTheme||o?.pageTheme&&o?.pageTheme!==e)&&u(r=>({...r,pageTheme:e})),e===l.S_MART?s(f(r)):e===l.OFS?s(p(!0,r)):e===l.DEFAULT&&s(h(r))):s(h(""))},[o?.pageTheme]);return r.createElement(P.Provider,{value:{hasSsr:void 0!==o,headerProps:a?.headerProps??{},footerProps:a?.footerProps??{},pageTheme:a?.pageTheme??l.DEFAULT,setHeaderProps:i,setFooterProps:c,setPageTheme:T,handlers:n}},e)}function g(e){let{setHeaderProps:t,hasSsr:o}=r.useContext(P);return r.useEffect(()=>{o||t(e)},[JSON.stringify(e),o]),null}function E(e){let{setFooterProps:t,hasSsr:o}=r.useContext(P);return r.useEffect(()=>{o||t(e)},[JSON.stringify(e),o]),null}let S=(e={})=>t=>{let o={withOFS:e.withIsOfficialShopTheme??!1,withSMART:e.withIsShopeeMartTheme??!1};return e=>{let{pageTheme:n}=r.useContext(P);return r.createElement(t,{...e,isOfficialShopTheme:o.withOFS&&n===l.OFS,isShopeeMartTheme:o.withSMART&&n===l.S_MART})}};function m({children:e,context:o}){let n=r.useRef(),a=(0,t.useDispatch)(),u=r.useRef({header:()=>{},footer:()=>{}}),s=r.useRef({header:new Promise(e=>{u.current.header=e}),footer:new Promise(e=>{u.current.footer=e})}),i=r.useRef(({pageName:e,theme:r})=>{r&&e&&(n.current?n.current.pageTheme=r:n.current={pageTheme:r},o&&(o.pageTheme=r),r===l.S_MART?a(f(e)):r===l.OFS?a(p(!0,e)):r===l.DEFAULT&&a(h(e)))}),c=r.useRef(e=>{n.current?n.current.headerProps=e:n.current={headerProps:e},u.current.header(e),o&&(o.headerProps=e)}),T=r.useRef(e=>{n.current?n.current.footerProps=e:n.current={footerProps:e},u.current.footer(e),o&&(o.footerProps=e)});return r.createElement(P.Provider,{value:{get headerProps(){return n.current?.headerProps??{}},get footerProps(){return n.current?.footerProps??{}},get pageTheme(){return n.current?.pageTheme??l.DEFAULT},get promises(){return s.current??{}},get setHeaderProps(){return c.current},get setFooterProps(){return T.current},get setPageTheme(){return i.current}}},e)}function d({pageContext:e,pageName:t}){let{setHeaderProps:o,setFooterProps:n,setPageTheme:a}=r.useContext(P);return r.useMemo(()=>{e?.headerProps&&o(e.headerProps),e?.footerProps&&n(e.footerProps),e?.pageTheme&&t&&a({pageName:t,theme:e.pageTheme})},[]),null}function O(e){let{setHeaderProps:t}=r.useContext(P);return r.useMemo(()=>{t(e)},[]),null}function _(e){let{setFooterProps:t}=r.useContext(P);return r.useMemo(()=>{t(e)},[]),null}let C=(e={})=>t=>{let o={withOFS:e.withIsOfficialShopTheme??!1,withSMart:e.withIsShopeeMartTheme??!1};return e=>{let{pageTheme:n}=r.useContext(P);return r.createElement(t,{...e,isOfficialShopTheme:o.withOFS&&n===l.OFS,isShopeeMartTheme:o.withSMart&&n===l.S_MART})}},A={"./client":u,"./server":s,"./context":a};return n})()).then(r=>{e.setModule("shopee__pc-page-configuration-context",r,{type:"module",version:"0.2.57",isSingleton:!0,originalPackageName:"@shopee/pc-page-configuration-context"})}),2]);
//# sourceMappingURL=https://files.webfe.shopee.io/modules-federation/bundle/0/shopee__pc-page-configuration-context/0.2.57.2023.js.map